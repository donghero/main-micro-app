<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>freelogApp</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/freelog.ico">
    <meta name="description" content="freelog 开发者文档">
    
    <link rel="preload" href="/assets/css/0.styles.e5b3790f.css" as="style"><link rel="preload" href="/assets/js/app.027de721.js" as="script"><link rel="preload" href="/assets/js/2.733019b2.js" as="script"><link rel="preload" href="/assets/js/8.1eda1bf1.js" as="script"><link rel="prefetch" href="/assets/js/3.613ecfcf.js"><link rel="prefetch" href="/assets/js/4.fc333d27.js"><link rel="prefetch" href="/assets/js/5.d58e9858.js"><link rel="prefetch" href="/assets/js/6.2d0a63f8.js"><link rel="prefetch" href="/assets/js/7.9cd7fc1a.js"><link rel="prefetch" href="/assets/js/9.b33174be.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e5b3790f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/home.jpg" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/api/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  API
</a></div><div class="nav-item"><a href="/faq/" class="nav-link">
  FAQ
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/api/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  API
</a></div><div class="nav-item"><a href="/faq/" class="nav-link">
  FAQ
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>freelogApp</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/#节点相关" class="sidebar-link">节点相关</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/#nodeinfo" class="sidebar-link">nodeInfo</a></li></ul></li><li><a href="/api/#插件相关" class="sidebar-link">插件相关</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/#getstaticpath" class="sidebar-link">getStaticPath</a></li><li class="sidebar-sub-header"><a href="/api/#devdata" class="sidebar-link">devData</a></li><li class="sidebar-sub-header"><a href="/api/#initglobalstate" class="sidebar-link">initGlobalState</a></li><li class="sidebar-sub-header"><a href="/api/#getselfid" class="sidebar-link">getSelfId</a></li><li class="sidebar-sub-header"><a href="/api/#getselfconfig" class="sidebar-link">getSelfConfig</a></li><li class="sidebar-sub-header"><a href="/api/#getsubdep" class="sidebar-link">getSubDep</a></li><li class="sidebar-sub-header"><a href="/api/#mountwidget" class="sidebar-link">mountWidget</a></li><li class="sidebar-sub-header"><a href="/api/#reload" class="sidebar-link">reload</a></li><li class="sidebar-sub-header"><a href="/api/#setviewport" class="sidebar-link">setViewport</a></li></ul></li><li><a href="/api/#展品获取" class="sidebar-link">展品获取</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/#getexhibitlistbypaging" class="sidebar-link">getExhibitListByPaging</a></li><li class="sidebar-sub-header"><a href="/api/#getexhibitlistbyid" class="sidebar-link">getExhibitListById</a></li><li class="sidebar-sub-header"><a href="/api/#getexhibitinfo" class="sidebar-link">getExhibitInfo</a></li><li class="sidebar-sub-header"><a href="/api/#getexhibitfilestream" class="sidebar-link">getExhibitFileStream</a></li><li class="sidebar-sub-header"><a href="/api/#getexhibitdepfilestream" class="sidebar-link">getExhibitDepFileStream</a></li><li class="sidebar-sub-header"><a href="/api/#getexhibitsigncount" class="sidebar-link">getExhibitSignCount</a></li><li class="sidebar-sub-header"><a href="/api/#getexhibitauthstatus" class="sidebar-link">getExhibitAuthStatus</a></li><li class="sidebar-sub-header"><a href="/api/#getexhibitavailalbe" class="sidebar-link">getExhibitAvailalbe</a></li><li class="sidebar-sub-header"><a href="/api/#getsignstatistics" class="sidebar-link">getSignStatistics</a></li></ul></li><li><a href="/api/#授权处理相关" class="sidebar-link">授权处理相关</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/#callauth" class="sidebar-link">callAuth</a></li><li class="sidebar-sub-header"><a href="/api/#addauth" class="sidebar-link">addAuth</a></li><li class="sidebar-sub-header"><a href="/api/#resulttype" class="sidebar-link">resultType</a></li></ul></li><li><a href="/api/#用户相关" class="sidebar-link">用户相关</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/#onlogin" class="sidebar-link">onLogin</a></li><li class="sidebar-sub-header"><a href="/api/#onuserchange" class="sidebar-link">onUserChange</a></li><li class="sidebar-sub-header"><a href="/api/#getcurrentuser" class="sidebar-link">getCurrentUser</a></li><li class="sidebar-sub-header"><a href="/api/#setuserdata" class="sidebar-link">setUserData</a></li><li class="sidebar-sub-header"><a href="/api/#getuserdata" class="sidebar-link">getUserData</a></li><li class="sidebar-sub-header"><a href="/api/#calllogin" class="sidebar-link">callLogin</a></li><li class="sidebar-sub-header"><a href="/api/#callloginout" class="sidebar-link">callLoginOut</a></li><li class="sidebar-sub-header"><a href="/api/#isuserchange" class="sidebar-link">isUserChange</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="freelogapp"><a href="#freelogapp" class="header-anchor">#</a> freelogApp</h1> <h3 id="阅读说明"><a href="#阅读说明" class="header-anchor">#</a> 阅读说明</h3> <p><strong>下面所有接口都挂在 window.freelogApp 对象上</strong></p> <p><strong>文中参数说明“:”后面的为类型，类型后面是具体解释</strong></p> <p><strong>文中参数类型为 int 的'是否'都用 1 和 0 传递</strong></p> <h2 id="节点相关"><a href="#节点相关" class="header-anchor">#</a> 节点相关</h2> <h3 id="nodeinfo"><a href="#nodeinfo" class="header-anchor">#</a> nodeInfo</h3> <p><strong>用途：获取节点信息</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 目前没有权限控制，主题和插件都可以获取到，后期整体考虑权限时会限制插件使用</span>
<span class="token comment">// 如果使用到了节点信息，插件开发者应当在使用说明里明确使用到了节点信息以及无法获取到的影响</span>
<span class="token keyword">const</span> nodeInfo <span class="token operator">=</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span>nodeInfo<span class="token punctuation">;</span>
</code></pre></div><h2 id="插件相关"><a href="#插件相关" class="header-anchor">#</a> 插件相关</h2> <h3 id="getstaticpath"><a href="#getstaticpath" class="header-anchor">#</a> getStaticPath</h3> <p><strong>用途：获取图片字体等静态作品的正确路径</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>参数说明<span class="token operator">**</span>
 <span class="token punctuation">(</span>
  path<span class="token operator">:</span> <span class="token builtin">string</span>  以<span class="token operator">/</span>开头的正常路径
 <span class="token punctuation">)</span>

<span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">getStaticPath</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="devdata"><a href="#devdata" class="header-anchor">#</a> devData</h3> <p><strong>用途：获取当前 dev 数据（url 数据）</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span>devData<span class="token punctuation">;</span>
</code></pre></div><h3 id="initglobalstate"><a href="#initglobalstate" class="header-anchor">#</a> initGlobalState</h3> <p><strong>用途：设置全局数据</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token comment">// 主题独有方法，但主题可以传递给插件使用</span>
<span class="token comment">// 初始化全局数据，只能修改不能添加, 例如可以修改a:{} 为对象，但不能添加同级的b、c、d</span>
window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">initGlobalState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getselfid"><a href="#getselfid" class="header-anchor">#</a> getSelfId</h3> <p><strong>用途：获取自身 Id</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> selfId <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">getSelfId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getselfconfig"><a href="#getselfconfig" class="header-anchor">#</a> getSelfConfig</h3> <p><strong>用途：获取自身配置数据</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> widgetConfig <span class="token operator">=</span>  window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">getSelfConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="getsubdep"><a href="#getsubdep" class="header-anchor">#</a> getSubDep</h3> <p><strong>用途：获取插件自身依赖</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">getSubDep</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token operator">**</span>返回值<span class="token operator">**</span>
<span class="token punctuation">{</span>
  exhibitName<span class="token punctuation">,</span>  展品名称
  exhibitId<span class="token punctuation">,</span>   展品id
  articleNid<span class="token punctuation">,</span> 作品链路id
  resourceType<span class="token punctuation">,</span> 作品类型
  subDep<span class="token punctuation">,</span>  子依赖数组
  versionInfo<span class="token operator">:</span> <span class="token punctuation">{</span> exhibitProperty <span class="token punctuation">}</span><span class="token punctuation">,</span> 版本信息
  <span class="token operator">...</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">,</span>  其它信息
<span class="token punctuation">}</span>
</code></pre></div><h3 id="mountwidget"><a href="#mountwidget" class="header-anchor">#</a> mountWidget</h3> <p><strong>用途：加载插件</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>参数说明<span class="token operator">**</span>
  paramObj<span class="token operator">:</span> <span class="token punctuation">{</span>
    widget<span class="token operator">:</span> object<span class="token punctuation">,</span>      必传，插件数据
    container<span class="token operator">:</span> htmlElement<span class="token punctuation">,</span> 必传，挂载容器
    topExhibitData<span class="token operator">:</span> object<span class="token punctuation">,</span>  最外层展品数据（子孙插件都需要用）
    config<span class="token operator">:</span> object<span class="token punctuation">,</span>      给到子插件的配置数据，可传递方法用于通信
    seq<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>         如果要用多个同样的子插件需要传递序号，可以考虑与其余节点插件避免相同的序号<span class="token punctuation">,</span> 注意用户数据是根据插件id<span class="token operator">+</span>序号保存的
    widget_entry<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> 本地url，dev模式下，可以使用本地url调试子插件
  <span class="token punctuation">}</span>

<span class="token operator">**</span>返回对象说明<span class="token operator">**</span>
<span class="token keyword">let</span> widgetController <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">mountWidget</span><span class="token punctuation">(</span>paramObj<span class="token punctuation">)</span>

widgetController<span class="token operator">:</span> <span class="token punctuation">{</span>
  mount
  unmount
  update
  getStatus
  loadPromise
  bootstrapPromise
  mountPromise
  unmountPromise
  getApi
<span class="token punctuation">}</span>

<span class="token operator">**</span>具体解释<span class="token operator">**</span>
<span class="token function">unmount</span><span class="token punctuation">(</span> keeplocation<span class="token operator">:</span> Boolean<span class="token punctuation">)</span> 卸载插件，返回一个promise。 keeplocation： 布尔值 是否保持url（即路由），<span class="token boolean">false</span>不保持时该插件对应的url清空

<span class="token function">mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  重新插件，返回一个promise

<span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 返回一个字符串代表插件的状态。所有状态如下：
    <span class="token constant">NOT_BOOTSTRAPPED</span><span class="token operator">:</span> 未初始化
    <span class="token constant">BOOTSTRAPPING</span><span class="token operator">:</span> 初始化中
    <span class="token constant">NOT_MOUNTED</span><span class="token operator">:</span> 完成初始化，未挂载
    <span class="token constant">MOUNTED</span><span class="token operator">:</span> 激活状态，且已挂载至<span class="token constant">DOM</span>
    <span class="token constant">UNMOUNTING</span><span class="token operator">:</span> 卸载中
    <span class="token constant">SKIP_BECAUSE_BROKEN</span><span class="token operator">:</span> 在初始化、挂载、卸载或更新时发生异常。其他插件可能会被正常使用，但当前插件会被跳过。

loadPromise  <span class="token function">一个promise，当插件被装载</span><span class="token punctuation">(</span>loaded<span class="token punctuation">)</span>后resolve。

bootstrapPromise 一个promise，当插件初始化后resolve。

mountPromise  一个promise，当插件加载后resolve。通常用于检测插件生成的<span class="token constant">DOM</span>是否已经挂载。

unmountPromise 一个promise，当插件卸载后resolve。

<span class="token function">getApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  在子插件加载完成后 <span class="token function">使用getApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法获取子插件的对外api， 由于子插件可能自己重载、或操作子插件重载，每次调用都需要使用方法获取，不能直接获取
</code></pre></div><p><strong>加载自身依赖的插件</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> subData <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">getSubDep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subData<span class="token punctuation">.</span>subDep<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span>sub<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">mountWidget</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    widget<span class="token operator">:</span> sub<span class="token punctuation">,</span>
    container<span class="token operator">:</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;freelog-single&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 注意每一个插件都需要不同容器</span>
    topExhibitData<span class="token operator">:</span> subData<span class="token punctuation">,</span>
    config<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    seq<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>加载展品插件</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">getExhibitListById</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  articleResourceTypes<span class="token operator">:</span> <span class="token string">&quot;widget&quot;</span><span class="token punctuation">,</span>
  isLoadVersionProperty<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> widgets <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>dataList<span class="token punctuation">;</span>
widgets<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span>widget<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">mountWidget</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    widget<span class="token operator">:</span> widget<span class="token punctuation">,</span>
    container<span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;freelog-single&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">// 注意每一个插件都需要不同容器</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="reload"><a href="#reload" class="header-anchor">#</a> reload</h3> <p><strong>用途：整个网页重载（仅主题可用，插件可访问主题开发者提供的方法进行全局刷新）</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>用法<span class="token operator">**</span>
window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="setviewport"><a href="#setviewport" class="header-anchor">#</a> setViewport</h3> <p><strong>用途：设置 viewport 的 meta</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>用法<span class="token operator">**</span>
window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">setViewport</span><span class="token punctuation">(</span>keys<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span>
keys <span class="token operator">=</span> <span class="token punctuation">{</span>
  width<span class="token operator">:</span> <span class="token string">&quot;device-width&quot;</span><span class="token punctuation">,</span> <span class="token comment">// immutable</span>
  height<span class="token operator">:</span> <span class="token string">&quot;device-height&quot;</span><span class="token punctuation">,</span> <span class="token comment">// not supported in browser</span>
  <span class="token string-property property">&quot;initial-scale&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 0.0-10.0   available for theme</span>
  <span class="token string-property property">&quot;maximum-scale&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 0.0-10.0   available for theme</span>
  <span class="token string-property property">&quot;minimum-scale&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 0.0-10.0   available for theme</span>
  <span class="token string-property property">&quot;user-scalable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;no&quot;</span><span class="token punctuation">,</span> <span class="token comment">// available for theme</span>
  <span class="token string-property property">&quot;viewport-fit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;auto&quot;</span><span class="token punctuation">,</span> <span class="token comment">// not supported in browser</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="展品获取"><a href="#展品获取" class="header-anchor">#</a> 展品获取</h2> <h3 id="getexhibitlistbypaging"><a href="#getexhibitlistbypaging" class="header-anchor">#</a> getExhibitListByPaging</h3> <p><strong>用途：分页获取展品</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">getExhibitListByPaging</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  skip<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  limit<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>query 可选参数</strong></p> <table><thead><tr><th style="text-align:left;">参数</th> <th style="text-align:left;">必选</th> <th style="text-align:left;">类型及范围</th> <th style="text-align:left;">说明</th></tr></thead> <tbody><tr><td style="text-align:left;">skip</td> <td style="text-align:left;">可选</td> <td style="text-align:left;">int</td> <td style="text-align:left;">跳过的数量.默认为 0.</td></tr> <tr><td style="text-align:left;">limit</td> <td style="text-align:left;">可选</td> <td style="text-align:left;">int</td> <td style="text-align:left;">本次请求获取的数据条数.一般不允许超过 100</td></tr> <tr><td style="text-align:left;">sort</td> <td style="text-align:left;">可选</td> <td style="text-align:left;">string</td> <td style="text-align:left;">排序,格式为{排序字段}:{1 或-1},1 是正序,-1 是倒序，例如&quot;updateDate:-1&quot;</td></tr> <tr><td style="text-align:left;">articleResourceTypes</td> <td style="text-align:left;">可选</td> <td style="text-align:left;">string</td> <td style="text-align:left;">作品作品类型,多个用逗号分隔</td></tr> <tr><td style="text-align:left;">omitArticleResourceType</td> <td style="text-align:left;">可选</td> <td style="text-align:left;">string</td> <td style="text-align:left;">忽略的作品作品类型,与 resourceType 参数互斥</td></tr> <tr><td style="text-align:left;">onlineStatus</td> <td style="text-align:left;">可选</td> <td style="text-align:left;">int</td> <td style="text-align:left;">上线状态 (0:下线 1:上线 2:全部) 默认 1</td></tr> <tr><td style="text-align:left;">tags</td> <td style="text-align:left;">可选</td> <td style="text-align:left;">string</td> <td style="text-align:left;">用户创建 presentable 时设置的自定义标签,多个用&quot;,&quot;分割</td></tr> <tr><td style="text-align:left;">projection</td> <td style="text-align:left;">可选</td> <td style="text-align:left;">string</td> <td style="text-align:left;">指定返回的字段,多个用逗号分隔</td></tr> <tr><td style="text-align:left;">keywords</td> <td style="text-align:left;">可选</td> <td style="text-align:left;">string[1,100]</td> <td style="text-align:left;">搜索关键字,目前支持模糊搜索节点作品名称和作品名称</td></tr> <tr><td style="text-align:left;">isLoadVersionProperty</td> <td style="text-align:left;">可选</td> <td style="text-align:left;">int</td> <td style="text-align:left;">是否响应展品版本属性</td></tr> <tr><td style="text-align:left;">isLoadPolicyInfo</td> <td style="text-align:left;">可选</td> <td style="text-align:left;">int</td> <td style="text-align:left;">是否加载策略信息</td></tr> <tr><td style="text-align:left;">isTranslate</td> <td style="text-align:left;">可选</td> <td style="text-align:left;">int</td> <td style="text-align:left;">是否加载翻译信息</td></tr> <tr><td style="text-align:left;">tagQueryType</td> <td style="text-align:left;">可选</td> <td style="text-align:left;">int</td> <td style="text-align:left;">tags 的查询方式 1:任意匹配一个标签 2:全部匹配所有标签 默认:1</td></tr></tbody></table> <p><strong>返回说明：</strong></p> <table><thead><tr><th style="text-align:left;">返回值字段</th> <th style="text-align:left;">字段类型</th> <th style="text-align:left;">字段说明</th></tr></thead> <tbody><tr><td style="text-align:left;">exhibitId</td> <td style="text-align:left;">string</td> <td style="text-align:left;">展品 ID</td></tr> <tr><td style="text-align:left;">exhibitName</td> <td style="text-align:left;">string</td> <td style="text-align:left;">展品名称</td></tr> <tr><td style="text-align:left;">exhibitTitle</td> <td style="text-align:left;">string</td> <td style="text-align:left;">展品标题</td></tr> <tr><td style="text-align:left;">tags</td> <td style="text-align:left;">string[]</td> <td style="text-align:left;">展品标签</td></tr> <tr><td style="text-align:left;">intro</td> <td style="text-align:left;">string</td> <td style="text-align:left;">展品简介</td></tr> <tr><td style="text-align:left;">coverImages</td> <td style="text-align:left;">string[]</td> <td style="text-align:left;">展品封面图</td></tr> <tr><td style="text-align:left;">version</td> <td style="text-align:left;">string</td> <td style="text-align:left;">展品版本</td></tr> <tr><td style="text-align:left;">onlineStatus</td> <td style="text-align:left;">int</td> <td style="text-align:left;">上线状态 0:下线 1:上线</td></tr> <tr><td style="text-align:left;">userId</td> <td style="text-align:left;">int</td> <td style="text-align:left;">展品的创建者 ID</td></tr> <tr><td style="text-align:left;">nodeId</td> <td style="text-align:left;">int</td> <td style="text-align:left;">展品所属节点 ID</td></tr> <tr><td style="text-align:left;">policies</td> <td style="text-align:left;">object[]</td> <td style="text-align:left;">对外授权的策略组</td></tr> <tr><td style="text-align:left;">** policyId</td> <td style="text-align:left;">string</td> <td style="text-align:left;">策略 ID</td></tr> <tr><td style="text-align:left;">** policyName</td> <td style="text-align:left;">string</td> <td style="text-align:left;">策略名称</td></tr> <tr><td style="text-align:left;">** status</td> <td style="text-align:left;">int</td> <td style="text-align:left;">策略状态 0:下线(未启用) 1:上线(启用)</td></tr> <tr><td style="text-align:left;">** policyText</td> <td style="text-align:left;">string</td> <td style="text-align:left;">策略文本</td></tr> <tr><td style="text-align:left;">** translateInfo</td> <td style="text-align:left;">object</td> <td style="text-align:left;">翻译信息&lt;详见策略翻译文档&gt;</td></tr> <tr><td style="text-align:left;">** fsmDescriptionInfo</td> <td style="text-align:left;">object</td> <td style="text-align:left;">策略状态机描述信息&lt;策略语言编译对象&gt;</td></tr> <tr><td style="text-align:left;">articleInfo</td> <td style="text-align:left;">object</td> <td style="text-align:left;">展品实际挂载的作品信息</td></tr> <tr><td style="text-align:left;">** articleId</td> <td style="text-align:left;">string</td> <td style="text-align:left;">作品 ID</td></tr> <tr><td style="text-align:left;">** articleName</td> <td style="text-align:left;">string</td> <td style="text-align:left;">作品名称</td></tr> <tr><td style="text-align:left;">** resourceType</td> <td style="text-align:left;">[string]</td> <td style="text-align:left;">作品作品类型</td></tr> <tr><td style="text-align:left;">** articleType</td> <td style="text-align:left;">int</td> <td style="text-align:left;">作品类型 (1:独立作品 2:组合作品 3:节点组合作品 4:存储对象)</td></tr> <tr><td style="text-align:left;">** articleOwnerId</td> <td style="text-align:left;">int</td> <td style="text-align:left;">作品所有者 ID</td></tr> <tr><td style="text-align:left;">** articleOwnerName</td> <td style="text-align:left;">string</td> <td style="text-align:left;">作品所有者名称</td></tr> <tr><td style="text-align:left;">versionInfo</td> <td style="text-align:left;">object</td> <td style="text-align:left;">展品的版本信息,加载版本属性时,才会赋值</td></tr> <tr><td style="text-align:left;">**exhibitProperty</td> <td style="text-align:left;">object</td> <td style="text-align:left;">展品的版本属性</td></tr></tbody></table> <h3 id="getexhibitlistbyid"><a href="#getexhibitlistbyid" class="header-anchor">#</a> getExhibitListById</h3> <p><strong>用途：查找展品</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>参数说明<span class="token operator">**</span>
  query<span class="token operator">:</span><span class="token punctuation">{</span>
    exhibitIds<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>  展品ids 多个使用<span class="token string">&quot;,&quot;</span>隔开
    isLoadVersionProperty<span class="token operator">:</span> <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">,</span> 可选，是否加载版本信息<span class="token punctuation">,</span>默认<span class="token number">0</span>
  <span class="token punctuation">}</span>

<span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">getExhibitListById</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span>
</code></pre></div><p><strong>返回说明</strong></p> <table><thead><tr><th style="text-align:left;">返回值字段</th> <th style="text-align:left;">字段类型</th> <th style="text-align:left;">字段说明</th></tr></thead> <tbody><tr><td style="text-align:left;">exhibitId</td> <td style="text-align:left;">string</td> <td style="text-align:left;">展品 ID</td></tr> <tr><td style="text-align:left;">exhibitName</td> <td style="text-align:left;">string</td> <td style="text-align:left;">展品名称</td></tr> <tr><td style="text-align:left;">exhibitTitle</td> <td style="text-align:left;">string</td> <td style="text-align:left;">展品标题</td></tr> <tr><td style="text-align:left;">tags</td> <td style="text-align:left;">string[]</td> <td style="text-align:left;">展品标签</td></tr> <tr><td style="text-align:left;">intro</td> <td style="text-align:left;">string</td> <td style="text-align:left;">展品简介</td></tr> <tr><td style="text-align:left;">coverImages</td> <td style="text-align:left;">string[]</td> <td style="text-align:left;">展品封面图</td></tr> <tr><td style="text-align:left;">version</td> <td style="text-align:left;">string</td> <td style="text-align:left;">展品版本</td></tr> <tr><td style="text-align:left;">onlineStatus</td> <td style="text-align:left;">int</td> <td style="text-align:left;">上线状态 0:下线 1:上线</td></tr> <tr><td style="text-align:left;">userId</td> <td style="text-align:left;">int</td> <td style="text-align:left;">展品的创建者 ID</td></tr> <tr><td style="text-align:left;">nodeId</td> <td style="text-align:left;">int</td> <td style="text-align:left;">展品所属节点 ID</td></tr> <tr><td style="text-align:left;">policies</td> <td style="text-align:left;">object[]</td> <td style="text-align:left;">对外授权的策略组</td></tr> <tr><td style="text-align:left;">** policyId</td> <td style="text-align:left;">string</td> <td style="text-align:left;">策略 ID</td></tr> <tr><td style="text-align:left;">** policyName</td> <td style="text-align:left;">string</td> <td style="text-align:left;">策略名称</td></tr> <tr><td style="text-align:left;">** status</td> <td style="text-align:left;">int</td> <td style="text-align:left;">策略状态 0:下线(未启用) 1:上线(启用)</td></tr> <tr><td style="text-align:left;">** policyText</td> <td style="text-align:left;">string</td> <td style="text-align:left;">策略文本</td></tr> <tr><td style="text-align:left;">** translateInfo</td> <td style="text-align:left;">object</td> <td style="text-align:left;">翻译信息&lt;详见策略翻译文档&gt;</td></tr> <tr><td style="text-align:left;">** fsmDescriptionInfo</td> <td style="text-align:left;">object</td> <td style="text-align:left;">策略状态机描述信息&lt;策略语言编译对象&gt;</td></tr> <tr><td style="text-align:left;">articleInfo</td> <td style="text-align:left;">object</td> <td style="text-align:left;">展品实际挂载的作品信息</td></tr> <tr><td style="text-align:left;">** articleId</td> <td style="text-align:left;">string</td> <td style="text-align:left;">作品 ID</td></tr> <tr><td style="text-align:left;">** articleName</td> <td style="text-align:left;">string</td> <td style="text-align:left;">作品名称</td></tr> <tr><td style="text-align:left;">** resourceType</td> <td style="text-align:left;">[string]</td> <td style="text-align:left;">作品作品类型</td></tr> <tr><td style="text-align:left;">** articleType</td> <td style="text-align:left;">int</td> <td style="text-align:left;">作品类型 (1:独立作品 2:组合作品 3:节点组合作品 4:存储对象)</td></tr> <tr><td style="text-align:left;">** articleOwnerId</td> <td style="text-align:left;">int</td> <td style="text-align:left;">作品所有者 ID</td></tr> <tr><td style="text-align:left;">** articleOwnerName</td> <td style="text-align:left;">string</td> <td style="text-align:left;">作品所有者名称</td></tr> <tr><td style="text-align:left;">versionInfo</td> <td style="text-align:left;">object</td> <td style="text-align:left;">展品的版本信息,加载版本属性时,才会赋值</td></tr> <tr><td style="text-align:left;">**exhibitProperty</td> <td style="text-align:left;">object</td> <td style="text-align:left;">展品的版本属性</td></tr></tbody></table> <h3 id="getexhibitinfo"><a href="#getexhibitinfo" class="header-anchor">#</a> getExhibitInfo</h3> <p><strong>用途：获取单个展品详情</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>参数说明<span class="token operator">**</span>
  exhibitId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>  展品id
  query<span class="token operator">:</span><span class="token punctuation">{</span>
    isLoadVersionProperty<span class="token operator">:</span> <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">,</span> 可选，是否加载版本信息<span class="token punctuation">,</span>默认<span class="token number">0</span>
  <span class="token punctuation">}</span>

<span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">getExhibitInfo</span><span class="token punctuation">(</span>exhibitId<span class="token punctuation">,</span> query<span class="token punctuation">)</span>
</code></pre></div><p><strong>返回说明</strong></p> <table><thead><tr><th style="text-align:left;">返回值字段</th> <th style="text-align:left;">字段类型</th> <th style="text-align:left;">字段说明</th></tr></thead> <tbody><tr><td style="text-align:left;">exhibitId</td> <td style="text-align:left;">string</td> <td style="text-align:left;">展品 ID</td></tr> <tr><td style="text-align:left;">exhibitName</td> <td style="text-align:left;">string</td> <td style="text-align:left;">展品名称</td></tr> <tr><td style="text-align:left;">exhibitTitle</td> <td style="text-align:left;">string</td> <td style="text-align:left;">展品标题</td></tr> <tr><td style="text-align:left;">tags</td> <td style="text-align:left;">string[]</td> <td style="text-align:left;">展品标签</td></tr> <tr><td style="text-align:left;">intro</td> <td style="text-align:left;">string</td> <td style="text-align:left;">展品简介</td></tr> <tr><td style="text-align:left;">coverImages</td> <td style="text-align:left;">string[]</td> <td style="text-align:left;">展品封面图</td></tr> <tr><td style="text-align:left;">version</td> <td style="text-align:left;">string</td> <td style="text-align:left;">展品版本</td></tr> <tr><td style="text-align:left;">onlineStatus</td> <td style="text-align:left;">int</td> <td style="text-align:left;">上线状态 0:下线 1:上线</td></tr> <tr><td style="text-align:left;">userId</td> <td style="text-align:left;">int</td> <td style="text-align:left;">展品的创建者 ID</td></tr> <tr><td style="text-align:left;">nodeId</td> <td style="text-align:left;">int</td> <td style="text-align:left;">展品所属节点 ID</td></tr> <tr><td style="text-align:left;">policies</td> <td style="text-align:left;">object[]</td> <td style="text-align:left;">对外授权的策略组</td></tr> <tr><td style="text-align:left;">** policyId</td> <td style="text-align:left;">string</td> <td style="text-align:left;">策略 ID</td></tr> <tr><td style="text-align:left;">** policyName</td> <td style="text-align:left;">string</td> <td style="text-align:left;">策略名称</td></tr> <tr><td style="text-align:left;">** status</td> <td style="text-align:left;">int</td> <td style="text-align:left;">策略状态 0:下线(未启用) 1:上线(启用)</td></tr> <tr><td style="text-align:left;">** policyText</td> <td style="text-align:left;">string</td> <td style="text-align:left;">策略文本</td></tr> <tr><td style="text-align:left;">** translateInfo</td> <td style="text-align:left;">object</td> <td style="text-align:left;">翻译信息&lt;详见策略翻译文档&gt;</td></tr> <tr><td style="text-align:left;">** fsmDescriptionInfo</td> <td style="text-align:left;">object</td> <td style="text-align:left;">策略状态机描述信息&lt;策略语言编译对象&gt;</td></tr> <tr><td style="text-align:left;">articleInfo</td> <td style="text-align:left;">object</td> <td style="text-align:left;">展品实际挂载的作品信息</td></tr> <tr><td style="text-align:left;">** articleId</td> <td style="text-align:left;">string</td> <td style="text-align:left;">作品 ID</td></tr> <tr><td style="text-align:left;">** articleName</td> <td style="text-align:left;">string</td> <td style="text-align:left;">作品名称</td></tr> <tr><td style="text-align:left;">** resourceType</td> <td style="text-align:left;">[string]</td> <td style="text-align:left;">作品作品类型</td></tr> <tr><td style="text-align:left;">** articleType</td> <td style="text-align:left;">int</td> <td style="text-align:left;">作品类型 (1:独立作品 2:组合作品 3:节点组合作品 4:存储对象)</td></tr> <tr><td style="text-align:left;">** articleOwnerId</td> <td style="text-align:left;">int</td> <td style="text-align:left;">作品所有者 ID</td></tr> <tr><td style="text-align:left;">** articleOwnerName</td> <td style="text-align:left;">string</td> <td style="text-align:left;">作品所有者名称</td></tr> <tr><td style="text-align:left;">versionInfo</td> <td style="text-align:left;">object</td> <td style="text-align:left;">展品的版本信息,加载版本属性时,才会赋值</td></tr> <tr><td style="text-align:left;">**exhibitProperty</td> <td style="text-align:left;">object</td> <td style="text-align:left;">展品的版本属性</td></tr></tbody></table> <h3 id="getexhibitfilestream"><a href="#getexhibitfilestream" class="header-anchor">#</a> getExhibitFileStream</h3> <p><strong>用途：获取展品作品文件</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>参数说明<span class="token operator">**</span>
  exhibitId<span class="token operator">:</span> 展品id，
  options<span class="token operator">:</span> <span class="token punctuation">{</span>
    returnUrl<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> 是否只返回url， 例如img标签图片只需要url
    config<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>   axios的config 目前仅支持<span class="token string">&quot;onUploadProgress&quot;</span><span class="token punctuation">,</span>  <span class="token string">&quot;onDownloadProgress&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;responseType&quot;</span>
    subFilePath<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>   漫画中的图片等子文件的路径
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">getExhibitFileStream</span><span class="token punctuation">(</span>
  exhibitId<span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    returnUrl<span class="token punctuation">,</span>
    config
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><h3 id="getexhibitdepfilestream"><a href="#getexhibitdepfilestream" class="header-anchor">#</a> getExhibitDepFileStream</h3> <p><strong>用途：获取展品子依赖作品文件</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>参数说明<span class="token operator">**</span>
  exhibitId<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">,</span>  自身展品id
  parentNid<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>     自身链路id
  subArticleIdOrName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>   子依赖作品id或名称
  returnUrl<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> 是否只返回url， 例如img标签图片只需要url
  config<span class="token operator">?</span><span class="token operator">:</span> object<span class="token punctuation">,</span>    axios的config 目前仅支持<span class="token string">&quot;onUploadProgress&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;onDownloadProgress&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;responseType&quot;</span>

<span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">getExhibitDepFileStream</span><span class="token punctuation">(</span>
  exhibitId<span class="token punctuation">,</span>
  parentNid<span class="token punctuation">,</span>
  subArticleIdOrName<span class="token punctuation">,</span>
  returnUrl<span class="token punctuation">,</span>
  config
<span class="token punctuation">)</span>
</code></pre></div><h3 id="getexhibitsigncount"><a href="#getexhibitsigncount" class="header-anchor">#</a> getExhibitSignCount</h3> <p><strong>用途：查找展品签约数量（同一个用户的多次签约只计算一次）</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>参数说明<span class="token operator">**</span>
  exhibitIds<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>  用英文逗号隔开的展品id

<span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">getExhibitSignCount</span><span class="token punctuation">(</span>exhibitIds<span class="token punctuation">)</span>
</code></pre></div><h3 id="getexhibitauthstatus"><a href="#getexhibitauthstatus" class="header-anchor">#</a> getExhibitAuthStatus</h3> <p><strong>用途：批量查询展品授权</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>参数说明<span class="token operator">**</span>
  exhibitIds<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> 用英文逗号隔开的展品id

<span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">getExhibitAuthStatus</span><span class="token punctuation">(</span>exhibitIds<span class="token punctuation">)</span>
</code></pre></div><h3 id="getexhibitavailalbe"><a href="#getexhibitavailalbe" class="header-anchor">#</a> getExhibitAvailalbe</h3> <p><strong>用途：批量查询展品是否可用（即能否提供给用户签约）</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>参数说明<span class="token operator">**</span>
  exhibitIds<span class="token operator">:</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>  用英文逗号隔开的展品id

<span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">getExhibitAvailalbe</span><span class="token punctuation">(</span>exhibitIds<span class="token punctuation">)</span>
</code></pre></div><p><strong>返回说明</strong></p> <table><thead><tr><th style="text-align:left;">返回值字段</th> <th style="text-align:left;">字段类型</th> <th style="text-align:left;">字段说明</th></tr></thead> <tbody><tr><td style="text-align:left;">exhibitId</td> <td style="text-align:left;">string</td> <td style="text-align:left;">展品 ID</td></tr> <tr><td style="text-align:left;">exhibitName</td> <td style="text-align:left;">string</td> <td style="text-align:left;">展品名称</td></tr> <tr><td style="text-align:left;">referee</td> <td style="text-align:left;">int</td> <td style="text-align:left;">做出授权结果的标的物服务类型(1:作品服务 2:展品服务)</td></tr> <tr><td style="text-align:left;">defaulterIdentityType</td> <td style="text-align:left;">int</td> <td style="text-align:left;">授权不通过责任方(0:无 1:作品 2:节点 4:c 端消费者 128:未知)</td></tr> <tr><td style="text-align:left;">authCode</td> <td style="text-align:left;">int</td> <td style="text-align:left;">授权码</td></tr> <tr><td style="text-align:left;">isAuth</td> <td style="text-align:left;">boolean</td> <td style="text-align:left;">是否授权通过</td></tr> <tr><td style="text-align:left;">errorMsg</td> <td style="text-align:left;">string</td> <td style="text-align:left;">错误信息</td></tr></tbody></table> <h3 id="getsignstatistics"><a href="#getsignstatistics" class="header-anchor">#</a> getSignStatistics</h3> <p><strong>用途：统计展品签约量</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>参数说明<span class="token operator">**</span>
    keywords<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> 搜索关键字

<span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">getSignStatistics</span><span class="token punctuation">(</span>keywords<span class="token punctuation">)</span>
</code></pre></div><p><strong>返回说明</strong></p> <table><thead><tr><th style="text-align:left;">返回值字段</th> <th style="text-align:left;">字段类型</th> <th style="text-align:left;">字段说明</th></tr></thead> <tbody><tr><td style="text-align:left;">subjectId</td> <td style="text-align:left;">string</td> <td style="text-align:left;">标的物 ID</td></tr> <tr><td style="text-align:left;">subjectName</td> <td style="text-align:left;">string</td> <td style="text-align:left;">标的物名称</td></tr> <tr><td style="text-align:left;">policyIds</td> <td style="text-align:left;">string[]</td> <td style="text-align:left;">签约的策略</td></tr> <tr><td style="text-align:left;">latestSignDate</td> <td style="text-align:left;">date</td> <td style="text-align:left;">最后签约日期</td></tr> <tr><td style="text-align:left;">count</td> <td style="text-align:left;">int</td> <td style="text-align:left;">签约次数</td></tr></tbody></table> <h2 id="授权处理相关"><a href="#授权处理相关" class="header-anchor">#</a> 授权处理相关</h2> <h3 id="callauth"><a href="#callauth" class="header-anchor">#</a> callAuth</h3> <p><strong>用途：呼出授权</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>用法说明：当addAuth多个未授权展品且没有立刻呼出（或者存在未授权展品且已经addAuth <span class="token function">但用户关闭了，插件想要用户签约时）可以通过callAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>唤出<span class="token operator">**</span>
window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">callAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="addauth"><a href="#addauth" class="header-anchor">#</a> addAuth</h3> <p><strong>用途：对未授权展品添加进待授权队列</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>参数说明<span class="token operator">**</span>
  exhibitId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  options<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    immediate<span class="token operator">:</span> <span class="token builtin">boolean</span>  <span class="token comment">// 是否立即弹出授权窗口</span>
  <span class="token punctuation">}</span>

<span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> res <span class="token operator">=</span>  <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">addAuth</span><span class="token punctuation">(</span>exhibitId<span class="token punctuation">,</span>options<span class="token punctuation">)</span>

<span class="token operator">**</span>返回值说明<span class="token operator">**</span>
res<span class="token operator">:</span> <span class="token punctuation">{</span>status<span class="token operator">:</span> <span class="token constant">SUCCESS</span><span class="token punctuation">,</span> data<span class="token punctuation">}</span>

status 枚举判断：
  status <span class="token operator">===</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span>resultType<span class="token punctuation">.</span><span class="token constant">SUCCESS</span><span class="token punctuation">;</span>  <span class="token comment">// 成功</span>
  status <span class="token operator">===</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span>resultType<span class="token punctuation">.</span><span class="token constant">FAILED</span><span class="token punctuation">;</span>   <span class="token comment">// 失败</span>
  status <span class="token operator">===</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span>resultType<span class="token punctuation">.</span><span class="token constant">USER_CANCEL</span><span class="token punctuation">;</span> <span class="token comment">// 用户取消</span>
  status <span class="token operator">===</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span>resultType<span class="token punctuation">.</span><span class="token constant">DATA_ERROR</span><span class="token punctuation">;</span>  <span class="token comment">// 数据错误</span>
  status <span class="token operator">===</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span>resultType<span class="token punctuation">.</span><span class="token constant">OFFLINE</span><span class="token punctuation">;</span> <span class="token comment">// 展品已经下线</span>
data<span class="token operator">:</span> 如果是<span class="token constant">DATA_ERROR</span>或<span class="token constant">OFFLINE</span>，会返回错误数据或展品数据
</code></pre></div><h3 id="resulttype"><a href="#resulttype" class="header-anchor">#</a> resultType</h3> <p><strong>用途：授权状态枚举</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> res <span class="token operator">=</span>  <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">addAuth</span><span class="token punctuation">(</span>exhibitId<span class="token punctuation">,</span>options<span class="token punctuation">)</span>

<span class="token operator">**</span>返回值说明<span class="token operator">**</span>
res<span class="token operator">:</span> <span class="token punctuation">{</span>status<span class="token operator">:</span> <span class="token constant">SUCCESS</span><span class="token punctuation">,</span> data<span class="token punctuation">}</span>

status 枚举判断：
  status <span class="token operator">===</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span>resultType<span class="token punctuation">.</span><span class="token constant">SUCCESS</span><span class="token punctuation">;</span>  <span class="token comment">// 成功</span>
  status <span class="token operator">===</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span>resultType<span class="token punctuation">.</span><span class="token constant">FAILED</span><span class="token punctuation">;</span>   <span class="token comment">// 失败</span>
  status <span class="token operator">===</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span>resultType<span class="token punctuation">.</span><span class="token constant">USER_CANCEL</span><span class="token punctuation">;</span> <span class="token comment">// 用户取消</span>
  status <span class="token operator">===</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span>resultType<span class="token punctuation">.</span><span class="token constant">DATA_ERROR</span><span class="token punctuation">;</span>  <span class="token comment">// 数据错误</span>
  status <span class="token operator">===</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span>resultType<span class="token punctuation">.</span><span class="token constant">OFFLINE</span><span class="token punctuation">;</span> <span class="token comment">// 展品已经下线</span>
data<span class="token operator">:</span> 如果是<span class="token constant">DATA_ERROR</span>或<span class="token constant">OFFLINE</span>，会返回错误数据或展品数据
</code></pre></div><h2 id="用户相关"><a href="#用户相关" class="header-anchor">#</a> 用户相关</h2> <h3 id="onlogin"><a href="#onlogin" class="header-anchor">#</a> onLogin</h3> <p><strong>用途：监听用户登录</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token comment">// callback: 登录成功的回调，登录失败不会回调,这里需要考虑一下，</span>
window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">onLogin</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="onuserchange"><a href="#onuserchange" class="header-anchor">#</a> onUserChange</h3> <p><strong>用途：监听用户登录变化</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token comment">// 监听用户在其余页面切换账号或登录事件  callback: 再次进入页面发现账号变化后会回调所有函数</span>
window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">onUserChange</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getcurrentuser"><a href="#getcurrentuser" class="header-anchor">#</a> getCurrentUser</h3> <p><strong>用途：获取当前登录的用户信息</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> loginUser <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">getCurrentUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// TODO</span>
<span class="token operator">**</span>返回值说明<span class="token operator">**</span>

</code></pre></div><h3 id="setuserdata"><a href="#setuserdata" class="header-anchor">#</a> setUserData</h3> <p><strong>用途：改变当前登录的用户在当前插件保存的数据</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">setUserData</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getuserdata"><a href="#getuserdata" class="header-anchor">#</a> getUserData</h3> <p><strong>用途：获取当前登录的用户在当前插件保存的数据</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token keyword">const</span> userData <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">getUserData</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="calllogin"><a href="#calllogin" class="header-anchor">#</a> callLogin</h3> <p><strong>用途：唤起登录 UI</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>用法<span class="token operator">**</span>
<span class="token comment">// callback: 登录成功的回调，登录失败不会回调,这里需要考虑一下，</span>
window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">callLogin</span><span class="token punctuation">(</span>callBack<span class="token punctuation">)</span>
</code></pre></div><h3 id="callloginout"><a href="#callloginout" class="header-anchor">#</a> callLoginOut</h3> <p><strong>用途：唤起退出登录 UI</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>用法<span class="token operator">**</span>
window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">callLoginOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="isuserchange"><a href="#isuserchange" class="header-anchor">#</a> isUserChange</h3> <p><strong>用途：调用此方法发现用户切换后会刷新网页，否则返回 false</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">**</span>用法<span class="token operator">**</span>
window<span class="token punctuation">.</span>freelogApp<span class="token punctuation">.</span><span class="token function">isUserChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.027de721.js" defer></script><script src="/assets/js/2.733019b2.js" defer></script><script src="/assets/js/8.1eda1bf1.js" defer></script>
  </body>
</html>
