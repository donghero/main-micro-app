(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{233:function(e,t,n){},235:function(e,t,n){},236:function(e,t,n){},262:function(e,t,n){},264:function(e,t,n){},265:function(e,t,n){},380:function(e,t,n){},381:function(e,t,n){},383:function(e,t,n){},384:function(e,t,n){},385:function(e,t,n){},394:function(e,t,n){},395:function(e,t,n){},400:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"ensureJQuerySupport",(function(){return lt})),n.d(r,"setBootstrapMaxTime",(function(){return tt})),n.d(r,"setMountMaxTime",(function(){return nt})),n.d(r,"setUnmountMaxTime",(function(){return rt})),n.d(r,"setUnloadMaxTime",(function(){return at})),n.d(r,"addErrorHandler",(function(){return je})),n.d(r,"removeErrorHandler",(function(){return ge})),n.d(r,"mountRootParcel",(function(){return Ke})),n.d(r,"NOT_LOADED",(function(){return Oe})),n.d(r,"LOADING_SOURCE_CODE",(function(){return we})),n.d(r,"NOT_BOOTSTRAPPED",(function(){return Ne})),n.d(r,"BOOTSTRAPPING",(function(){return Ie})),n.d(r,"NOT_MOUNTED",(function(){return Ee})),n.d(r,"MOUNTING",(function(){return Se})),n.d(r,"UPDATING",(function(){return _e})),n.d(r,"LOAD_ERROR",(function(){return Pe})),n.d(r,"MOUNTED",(function(){return Te})),n.d(r,"UNMOUNTING",(function(){return ke})),n.d(r,"SKIP_BECAUSE_BROKEN",(function(){return Ce}));var a={};n.r(a),n.d(a,"ScopedCSS",(function(){return Kn})),n.d(a,"FreelogCSSRewriteAttr",(function(){return Jn})),n.d(a,"process",(function(){return Zn}));var c=n(0),o=n(25),i=n.n(o),s=n(12),u=(n(233),n(7)),l=n.n(u),d=n(14),f=n(10),p=n(11),m=n(409),h=n(1),b={main:{common:"text-align-center px-10 py-5 brs-4 cur-pointer select-none fw-medium fc-white",normal:"bg-main",hover:"bg-hover",active:"bg-active",disabled:"bg-disabled bg-main"},cancel:{common:"text-align-center px-10 py-5 brs-4 cur-pointer select-none fc-grey",normal:"bg-c-main",hover:"bg-c-hover",active:"bg-c-active",disabled:"bg-disabled bg-c-main"}},v=function(e){var t=Object(c.useState)(0),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(b.main),i=Object(s.a)(o,2),u=i[0],l=i[1];return Object(c.useEffect)((function(){a(e.disabled?3:0),l(b[e.type||"main"]||u)})),Object(h.jsx)("div",{onClick:function(t){return!e.disabled&&e.click&&e.click(t),!0},onMouseDown:function(t){!e.disabled&&a(2)},onMouseUp:function(t){!e.disabled&&a(0)},onMouseEnter:function(t){!e.disabled&&a(1)},onMouseLeave:function(){!e.disabled&&a(0)},className:e.className+" "+(0===r?u.normal:1===r?u.hover:2===r?u.active:u.disabled)+" "+u.common,children:e.children})},j=(n(235),n(410)),g=n(408),x=n(405),y=(n(236),n(147)),O=n.n(y);O.a.interceptors.request.use((function(e){return e}),(function(e){console.error(e),Promise.reject(e)})),O.a.interceptors.response.use((function(e){return e}),(function(e){console.error(e)}));var w=O.a,N="urlPlaceHolder",I="http://qi.freelog.com/v2/";window.location.href.indexOf("testfreelog")>-1&&(I="http://qi.testfreelog.com/v2/");var E={baseURL:I,withCredentials:!0,timeout:3e4};function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object.prototype.toString.call(e),a=Object.prototype.toString.call(t);if(a===r&&"[object Array]"===r)e={0:e},t={0:t};else if(r!==a||"[object Object]"!==r)return!["[object Array]","[object object]"].includes(r)&&console.error(e+" is not object or array"),void(!["[object Array]","[object object]"].includes(a)&&console.error(t+" is not object or array"));Object.keys(t).forEach((function(r){var a=!n;Object.keys(e).some((function(c){if(r===c){if(a=!a,n)return!0;var o=Object.prototype.toString.call(e[c]),i=Object.prototype.toString.call(t[r]);return o===i&&"[object Object]"===i?S(e[c],t[r],n):o===i&&"[object Array]"===i&&"[object Object]"===Object.prototype.toString.call(e[r][0])&&t[r].forEach((function(t){"[object Array]"===Object.prototype.toString.call(t)&&S(e[c][0],t,n)})),!0}return!1})),a&&delete t[r]}))}var T=new Map,_=new Map,k=new Map,P=null,C=null;var M=!1;function A(e){M=!!e}var F=!1;function D(e,t,n,r){var a;"function"!==typeof t&&(t=function(){}),"function"!==typeof n&&(n=function(){});var c=this.name;if("node"!==c){var o,i=T.get(e);if(!i)return void(n&&n({errorCode:2,msg:e+" is inncorrect or not required for callUI"}));3===i.errCode&&i.authCode,a=1;var s=(null===(o=_.get(e))||void 0===o?void 0:o.callBacks)||[];s.push({resolve:t,reject:n,options:r});var u=e;return 0===a&&(u=a),_.set(u,Object(d.a)(Object(d.a)({event:a,eventId:u},i),{},{callBacks:s})),r&&r.immediate&&(F?M?setTimeout((function(){C&&C()}),0):C&&C():P&&P()),void(F=!0)}_.set(c,{event:this.event,eventId:c,presentableId:e,callBacks:[{resolve:t,reject:n,options:r}]}),P&&P(),F=!0}function R(e){e?_.delete(e):_.clear(),M?setTimeout((function(){C&&C()}),0):C&&C()}function L(e,t,n){switch(t){case 0:_.get(e).callBacks.forEach((function(e){e.resolve(n)})),T.delete(e),R(e);break;case 1:_.get(e).callBacks.forEach((function(e){e.reject(1,n)})),T.delete(e),R(e);break;case 2:_.forEach((function(e){e.callBacks.forEach((function(e){e.reject(2,n)}))})),T.clear(),R(),console.log(T)}}function B(e,t,n,r,a){var c=this,o=Object.assign({},e),i=o.url;if(i.indexOf(N)>-1){if(!t||!t.length)return void console.error("urlData is required: "+t);t.forEach((function(e){i=i.replace(N,e+"")}))}o.dataModel&&(n=Object.assign({},n),S(o.dataModel,n,!!o.isDiff)),o.before&&(n=o.before(n)||n),"get"===o.method.toLowerCase()?o.params=n:o.data=n,["url","before","after"].forEach((function(e){delete o[e]}));var s={};a&&["onUploadProgress","onDownloadProgress","responseType"].forEach((function(e){a[e]&&(s[e]=a[e])}));var u=Object.assign(s,E,o);if(r&&"get"===u.method.toLowerCase()){var d="";return u.params&&Object.keys(u.params).forEach((function(e){d=d+"&"+e+"="+u.params[e]})),d&&(d="?"+d),u.baseURL+i+d}return new Promise((function(e,t){w(i,u).then(function(){var t=Object(p.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.after&&o.after(n),!n.data.errCode||3!==n.data.errCode||!c||!c.presentableId&&!c.resourceIdOrName){t.next=9;break}return r=n.headers["freelog-presentable-id"],a=decodeURI(n.headers["freelog-presentable-name"]),i=r,s={widget:c.name,errCode:n.data.errCode,authCode:n.data.data.authCode,contracts:n.data.data.data.contracts||[],policies:n.data.data.data.policies,presentableName:a,presentableId:r,info:n.data},T.set(i,s),e({data:{errCode:3,authCode:n.data.errCode,presentableName:a,presentableId:r,errorMsg:n.data.data.errorMsg}}),t.abrupt("return");case 9:e(n);case 10:case"end":return t.stop()}var i,s}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){t({error:e})}))}))}var V={login:{url:"passport/login",method:"post",dataModel:{loginName:"string",password:"string",isRemember:"string",returnUrl:"string",jwtType:"string"}},loginOut:{url:"passport/logout",method:"post",params:{returnUrl:"string"}},getCurrent:{url:"users/current",method:"get"},getAccount:{url:"accounts/individualAccounts/".concat(N),method:"get"},postRegister:{url:"users",method:"post",dataModel:{loginName:"string",password:"string",username:"string",authCode:"string"}},getAuthCode:{url:"messages/send",method:"post",dataModel:{loginName:"string",authCodeType:"string"}}},G={pay:{url:"contracts/".concat(N,"/events/payment"),method:"POST",dataModel:{eventId:"string",accountId:"int",transactionAmount:"string",password:"string"}}},H={getRecord:{url:"transactions/records/".concat(N),method:"get"}},U={getPresentableDetail:{url:"presentables/".concat(N),method:"GET"},getPagingPresentables:{url:"presentables",method:"GET",dataModel:{nodeId:"string",skip:"string",limit:"string",resourceType:"string",omitResourceType:"string",onlineStatus:"string",tags:"string",projection:"string",keywords:"string",isLoadVersionProperty:"string",isLoadPolicyInfo:"string"}},getPresentables:{url:"presentables/list",method:"GET",dataModel:{nodeId:"string",userId:"string",presentableIds:"string",resourceIds:"string",resourceNames:"string",isLoadVersionProperty:"string",isLoadPolicyInfo:"string",projection:"string"}},getByPresentableId:{url:"auths/presentables/".concat(N,"/").concat(N),method:"GET"},getByResourceIdOrName:{url:"auths/presentables/nodes/".concat(N,"/").concat(N,"/").concat(N),method:"GET"},getTestPagingData:{url:"testNodes/".concat(N,"/testResources"),method:"GET",dataModel:{nodeId:"string",skip:"string",limit:"string",resourceType:"string",onlineStatus:"string",tags:"string",omitResourceType:"string",keywords:"string"}},getTestByPresentableId:{url:"auths/testResources/".concat(N,"/").concat(N),method:"GET"},getTestByResourceIdOrName:{url:"auths/testResources/nodes/".concat(N,"/").concat(N,"/").concat(N),method:"GET"}},W={getInfoById:{url:"nodes/".concat(N),method:"GET"},getInfoByNameOrDomain:{url:"nodes/detail",method:"GET",dataModel:{nodeName:"string",nodeDomain:"string"}},postUserData:{url:"storages/buckets/.UserNodeData/objects/".concat(N),method:"POST"},putUserData:{url:"storages/buckets/.UserNodeData/objects/".concat(N),method:"PUT"},getUserData:{url:"storages/buckets/.UserNodeData/objects/".concat(N),method:"GET"}},q=!1;0===window.location.href.replace("http://","").replace("https://","").indexOf("t.")&&(q=!0);var Y="";function z(){return(z=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||"[object Object]"===Object.prototype.toString.call(t)){e.next=2;break}return e.abrupt("return","query parameter must be object");case 2:if(!q){e.next=4;break}return e.abrupt("return",B.bind({name:this.name})(U.getTestPagingData,[Y],Object(d.a)({},t)));case 4:return e.abrupt("return",B.bind({name:this.name})(U.getPagingPresentables,"",Object(d.a)({nodeId:Y},t)));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function $(){return($=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||"[object Object]"===Object.prototype.toString.call(t)){e.next=2;break}return e.abrupt("return","query parameter must be object");case 2:if(!q){e.next=4;break}return e.abrupt("return",B.bind({name:this.name})(U.getTestPagingData,[Y],Object(d.a)({},t)));case 4:return e.abrupt("return",B.bind({name:this.name})(U.getPagingPresentables,"",Object(d.a)({nodeId:Y},t)));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function K(){return(K=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||"[object Object]"===Object.prototype.toString.call(t)){e.next=2;break}return e.abrupt("return","query parameter must be object");case 2:if(!q){e.next=4;break}return e.abrupt("return",B.bind({name:this.name})(U.getTestPagingData,[Y],Object(d.a)({},t)));case 4:return e.abrupt("return",B.bind({name:this.name})(U.getPresentables,"",Object(d.a)({nodeId:Y},t)));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function J(e,t,n,r,a,c,o){if(!t)return"presentableId is required";var i={},s={};return r&&(i.parentNid=r,s.parentNid=r),a&&(i.subEntityIdOrName=a,s.subResourceIdOrName=a),q?B.bind({name:e,presentableId:t})(U.getTestByPresentableId,[t,n],i,c,o):B.bind({name:e,presentableId:r?"":t})(U.getByPresentableId,[t,n],s,c,o)}function Z(){return(Z=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(this.name,t,"result","",""));case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Q(e){return X.apply(this,arguments)}function X(){return(X=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(this.name,t,"info","",""));case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function ee(){return(ee=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!q){e.next=2;break}return e.abrupt("return","not supported!");case 2:return e.abrupt("return",J(this.name,t,"resourceInfo","",""));case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function te(){return(te=Object(p.a)(l.a.mark((function e(t,n,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(this.name,t,"fileStream","","",n,r));case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function ne(){return(ne=Object(p.a)(l.a.mark((function e(t,n,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&r){e.next=2;break}return e.abrupt("return","parentNid and subResourceIdOrName is required!");case 2:return e.abrupt("return",J(this.name,t,"result",n,r));case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function re(){return(re=Object(p.a)(l.a.mark((function e(t,n,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&r){e.next=2;break}return e.abrupt("return","parentNid and subResourceIdOrName is required!");case 2:return e.abrupt("return",J(this.name,t,"info",n,r));case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function ae(){return(ae=Object(p.a)(l.a.mark((function e(t,n,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&r){e.next=2;break}return e.abrupt("return","parentNid and subResourceIdOrName is required!");case 2:if(!q){e.next=4;break}return e.abrupt("return","not supported!");case 4:return e.abrupt("return",J(this.name,t,"resourceInfo",n,r));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function ce(){return(ce=Object(p.a)(l.a.mark((function e(t,n,r,a,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&r){e.next=2;break}return e.abrupt("return","parentNid and subResourceIdOrName is required!");case 2:return e.abrupt("return",J(this.name,t,"fileStream",n,r,a,c));case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function oe(e,t,n,r,a,c,o){if(!t)return"resourceIdOrName is required";var i={},s={};return r&&(i.parentNid=r,s.parentNid=r),a&&(i.subEntityIdOrName=a,s.subResourceIdOrName=a),q?B.bind({name:e,resourceIdOrName:r?"":t})(U.getTestByResourceIdOrName,[t,n],i,c,o):B.bind({name:e,resourceIdOrName:r?"":t})(U.getByResourceIdOrName,[Y,t,n],s,c,o)}function ie(){return(ie=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oe(this.name,t,"result","",""));case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function se(){return(se=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oe(this.name,t,"info","",""));case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function ue(){return(ue=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!q){e.next=2;break}return e.abrupt("return","not supported!");case 2:return e.abrupt("return",oe(this.name,t,"resourceInfo","",""));case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function le(){return(le=Object(p.a)(l.a.mark((function e(t,n,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oe(this.name,t,"fileStream","","",n,r));case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function de(){return(de=Object(p.a)(l.a.mark((function e(t,n,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&r){e.next=2;break}return e.abrupt("return","parentNid and subResourceIdOrName is required!");case 2:return e.abrupt("return",oe(this.name,t,"result",n,r));case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function fe(){return(fe=Object(p.a)(l.a.mark((function e(t,n,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&r){e.next=2;break}return e.abrupt("return","parentNid and subResourceIdOrName is required!");case 2:return e.abrupt("return",oe(this.name,t,"info",n,r));case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function pe(){return(pe=Object(p.a)(l.a.mark((function e(t,n,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&r){e.next=2;break}return e.abrupt("return","parentNid and subResourceIdOrName is required!");case 2:if(!q){e.next=4;break}return e.abrupt("return","not supported!");case 4:return e.abrupt("return",oe(this.name,t,"resourceInfo",n,r));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function me(){return(me=Object(p.a)(l.a.mark((function e(t,n,r,a,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&r){e.next=2;break}return e.abrupt("return","parentNid and subResourceIdOrName is required!");case 2:return e.abrupt("return",oe(this.name,t,"fileStream",n,r,a,c));case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var he=n(125),be=[];function ve(e,t,n){var r=ye(e,t,n);be.length?be.forEach((function(e){return e(r)})):setTimeout((function(){throw r}))}function je(e){if("function"!==typeof e)throw Error(xe(28,window.__DEV__&&"a single-spa error handler must be a function"));be.push(e)}function ge(e){if("function"!==typeof e)throw Error(xe(29,window.__DEV__&&"a single-spa error handler must be a function"));var t=!1;return be=be.filter((function(n){var r=n===e;return t=t||r,!r})),t}function xe(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return"single-spa minified message #".concat(e,": ").concat(t?t+" ":"","See https://single-spa.js.org/error/?code=").concat(e).concat(r.length?"&arg=".concat(r.join("&arg=")):"")}function ye(e,t,n){var r,a="".concat(Fe(t)," '").concat(Me(t),"' died in status ").concat(t.status,": ");if(e instanceof Error){try{e.message=a+e.message}catch(c){}r=e}else{console.warn(xe(30,window.__DEV__&&"While ".concat(t.status,", '").concat(Me(t),"' rejected its lifecycle function promise with a non-Error. This will cause stack traces to not be accurate."),t.status,Me(t)));try{r=Error(a+JSON.stringify(e))}catch(c){r=e}}return r.appOrParcelName=Me(t),t.status=n,r}var Oe="NOT_LOADED",we="LOADING_SOURCE_CODE",Ne="NOT_BOOTSTRAPPED",Ie="BOOTSTRAPPING",Ee="NOT_MOUNTED",Se="MOUNTING",Te="MOUNTED",_e="UPDATING",ke="UNMOUNTING",Pe="LOAD_ERROR",Ce="SKIP_BECAUSE_BROKEN";function Me(e){return e.name}function Ae(e){return Boolean(e.unmountThisParcel)}function Fe(e){return Ae(e)?"parcel":"application"}function De(){for(var e=arguments.length-1;e>0;e--)for(var t in arguments[e])"__proto__"!==t&&(arguments[e-1][t]=arguments[e][t]);return arguments[0]}function Re(e){return e&&("function"===typeof e||(t=e,Array.isArray(t)&&!function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n];return null}(t,(function(e){return"function"!==typeof e}))));var t}function Le(e,t){var n=e[t]||[];0===(n=Array.isArray(n)?n:[n]).length&&(n=[function(){return Promise.resolve()}]);var r=Fe(e),a=Me(e);return function(e){return n.reduce((function(n,c,o){return n.then((function(){var n=c(e);return Be(n)?n:Promise.reject(xe(15,window.__DEV__&&"Within ".concat(r," ").concat(a,", the lifecycle function ").concat(t," at array index ").concat(o," did not return a promise"),r,a,t,o))}))}),Promise.resolve())}}function Be(e){return e&&"function"===typeof e.then&&"function"===typeof e.catch}function Ve(e,t){return Promise.resolve().then((function(){return e.status!==Ne?e:(e.status=Ie,e.bootstrap?ct(e,"bootstrap").then(n).catch((function(n){if(t)throw ye(n,e,Ce);return ve(n,e,Ce),e})):Promise.resolve().then(n))}));function n(){return e.status=Ee,e}}var Ge=n(168),He=n.n(Ge);function Ue(e,t){return Promise.resolve().then((function(){if(e.status!==Te)return e;e.status=ke;var n=Object.keys(e.parcels).map((function(t){return e.parcels[t].unmountThisParcel()}));return Promise.all(n).then(r,(function(n){return r().then((function(){var r=Error(n.message);if(t)throw ye(r,e,Ce);ve(r,e,Ce)}))})).then((function(){return e}));function r(){return ct(e,"unmount").then((function(){e.status=Ee})).catch((function(n){if(t)throw ye(n,e,Ce);ve(n,e,Ce)}))}}))}var We=!1,qe=!1;function Ye(e,t){return Promise.resolve().then((function(){return e.status!==Ee?e:(We||(window.dispatchEvent(new He.a("single-spa:before-first-mount")),We=!0),ct(e,"mount").then((function(){return e.status=Te,qe||(window.dispatchEvent(new He.a("single-spa:first-mount")),qe=!0),e})).catch((function(n){return e.status=Te,Ue(e,!0).then(r,r);function r(){if(t)throw ye(n,e,Ce);return ve(n,e,Ce),e}})))}))}var ze=0,$e={parcels:{}};function Ke(){return Je.apply($e,arguments)}function Je(e,t){var n=this,r=e.name||"";if(!e||"object"!==typeof e&&"function"!==typeof e)throw Error(xe(2,window.__DEV__&&"Cannot mount parcel without a config object or config loading function"));if(e.name&&"string"!==typeof e.name)throw Error(xe(3,window.__DEV__&&"Parcel name must be a string, if provided. Was given ".concat(typeof e.name),typeof e.name));if("object"!==typeof t)throw Error(xe(4,window.__DEV__&&"Parcel ".concat(r," has invalid customProps -- must be an object but was given ").concat(typeof t),r,typeof t));if(!t.domElement)throw Error(xe(5,window.__DEV__&&"Parcel ".concat(r," cannot be mounted without a domElement provided as a prop"),r));var a,c=ze++,o="function"===typeof e,i=o?e:function(){return Promise.resolve(e)},s={id:c,parcels:{},status:o?we:Ne,customProps:t,parentName:Me(n),unmountThisParcel:function(){if(s.status!==Te)throw Error(xe(6,window.__DEV__&&"Cannot unmount parcel '".concat(r,"' -- it is in a ").concat(s.status," status"),r,s.status));return Ue(s,!0).then((function(e){return s.parentName&&delete n.parcels[s.id],e})).then((function(e){return l(e),e})).catch((function(e){throw s.status=Ce,d(e),e}))}};n.parcels[c]=s;var u=i();if(!u||"function"!==typeof u.then)throw Error(xe(7,window.__DEV__&&"When mounting a parcel, the config loading function must return a promise that resolves with the parcel config"));var l,d,f=(u=u.then((function(e){if(!e)throw Error(xe(8,window.__DEV__&&"When mounting a parcel, the config loading function returned a promise that did not resolve with a parcel config"));var t=e.name||"parcel-".concat(c);if(Object.prototype.hasOwnProperty.call(e,"bootstrap")&&!Re(e.bootstrap))throw Error(xe(9,window.__DEV__&&"Parcel ".concat(t," provided an invalid bootstrap function"),t));if(!Re(e.mount))throw Error(xe(10,window.__DEV__&&"Parcel ".concat(t," must have a valid mount function"),t));if(!Re(e.unmount))throw Error(xe(11,window.__DEV__&&"Parcel ".concat(t," must have a valid unmount function"),t));if(e.update&&!Re(e.update))throw Error(xe(12,window.__DEV__&&"Parcel ".concat(t," provided an invalid update function"),t));var n=Le(e,"bootstrap"),r=Le(e,"mount"),o=Le(e,"unmount");s.status=Ne,s.name=t,s.bootstrap=n,s.mount=r,s.unmount=o,s.timeouts=ot(e.timeouts),e.update&&(s.update=Le(e,"update"),a.update=function(e){return s.customProps=e,Ze(function(e){return Promise.resolve().then((function(){if(e.status!==Te)throw Error(xe(32,window.__DEV__&&"Cannot update parcel '".concat(Me(e),"' because it is not mounted"),Me(e)));return e.status=_e,ct(e,"update").then((function(){return e.status=Te,e})).catch((function(t){throw ye(t,e,Ce)}))}))}(s))})}))).then((function(){return Ve(s,!0)})),p=f.then((function(){return Ye(s,!0)})),m=new Promise((function(e,t){l=e,d=t}));return a={mount:function(){return Ze(Promise.resolve().then((function(){if(s.status!==Ee)throw Error(xe(13,window.__DEV__&&"Cannot mount parcel '".concat(r,"' -- it is in a ").concat(s.status," status"),r,s.status));return n.parcels[c]=s,Ye(s)})))},unmount:function(){return Ze(s.unmountThisParcel())},getStatus:function(){return s.status},loadPromise:Ze(u),bootstrapPromise:Ze(f),mountPromise:Ze(p),unmountPromise:Ze(m)}}function Ze(e){return e.then((function(){return null}))}function Qe(e){var t=Me(e),n="function"===typeof e.customProps?e.customProps(t,window.location):e.customProps;("object"!==typeof n||null===n||Array.isArray(n))&&(n={},console.warn(xe(40,window.__DEV__&&"single-spa: ".concat(t,"'s customProps function must return an object. Received ").concat(n)),t,n));var a=De({},n,{name:t,mountParcel:Je.bind(e),singleSpa:r});return Ae(e)&&(a.unmountSelf=e.unmountThisParcel),a}var Xe=1e3,et={bootstrap:{millis:4e3,dieOnTimeout:!1,warningMillis:Xe},mount:{millis:3e3,dieOnTimeout:!1,warningMillis:Xe},unmount:{millis:3e3,dieOnTimeout:!1,warningMillis:Xe},unload:{millis:3e3,dieOnTimeout:!1,warningMillis:Xe},update:{millis:3e3,dieOnTimeout:!1,warningMillis:Xe}};function tt(e,t,n){if("number"!==typeof e||e<=0)throw Error(xe(16,window.__DEV__&&"bootstrap max time must be a positive integer number of milliseconds"));et.bootstrap={millis:e,dieOnTimeout:t,warningMillis:n||Xe}}function nt(e,t,n){if("number"!==typeof e||e<=0)throw Error(xe(17,window.__DEV__&&"mount max time must be a positive integer number of milliseconds"));et.mount={millis:e,dieOnTimeout:t,warningMillis:n||Xe}}function rt(e,t,n){if("number"!==typeof e||e<=0)throw Error(xe(18,window.__DEV__&&"unmount max time must be a positive integer number of milliseconds"));et.unmount={millis:e,dieOnTimeout:t,warningMillis:n||Xe}}function at(e,t,n){if("number"!==typeof e||e<=0)throw Error(xe(19,window.__DEV__&&"unload max time must be a positive integer number of milliseconds"));et.unload={millis:e,dieOnTimeout:t,warningMillis:n||Xe}}function ct(e,t){var n=e.timeouts[t],r=n.warningMillis,a=Fe(e);return new Promise((function(c,o){var i=!1,s=!1;e[t](Qe(e)).then((function(e){i=!0,c(e)})).catch((function(e){i=!0,o(e)})),setTimeout((function(){return l(1)}),r),setTimeout((function(){return l(!0)}),n.millis);var u=xe(31,window.__DEV__&&"Lifecycle function ".concat(t," for ").concat(a," ").concat(Me(e)," lifecycle did not resolve or reject for ").concat(n.millis," ms."),t,a,Me(e),n.millis);function l(e){if(!i)if(!0===e)s=!0,n.dieOnTimeout?o(Error(u)):console.error(u);else if(!s){var t=e,a=t*r;console.warn(u),a+r<n.millis&&setTimeout((function(){return l(t+1)}),r)}}}))}function ot(e){var t={};for(var n in et)t[n]=De({},et[n],e&&e[n]||{});return t}var it={NOT_LOADED:Oe,toLoadPromise:function(e){return Promise.resolve().then((function(){return e.loadPromise?e.loadPromise:e.status!==Oe&&e.status!==Pe?e:(e.status=we,e.loadPromise=Promise.resolve().then((function(){var r=e.loadApp(Qe(e));if(!Be(r))throw n=!0,Error(xe(33,window.__DEV__&&"single-spa loading function did not return a promise. Check the second argument to registerApplication('".concat(Me(e),"', loadingFunction, activityFunction)"),Me(e)));return r.then((function(n){var r,a;e.loadErrorTime=null,"object"!==typeof(t=n)&&(a=34,window.__DEV__&&(r="does not export anything")),Object.prototype.hasOwnProperty.call(t,"bootstrap")&&!Re(t.bootstrap)&&(a=35,window.__DEV__&&(r="does not export a valid bootstrap function or array of functions")),Re(t.mount)||(a=36,window.__DEV__&&(r="does not export a bootstrap function or array of functions")),Re(t.unmount)||(a=37,window.__DEV__&&(r="does not export a bootstrap function or array of functions"));var c=Fe(t);if(a){var o;try{o=JSON.stringify(t)}catch(i){}return console.error(xe(a,window.__DEV__&&"The loading function for single-spa ".concat(c," '").concat(Me(e),"' resolved with the following, which does not have bootstrap, mount, and unmount functions"),c,Me(e),o),t),ve(r,e,Ce),e}return t.devtools&&t.devtools.overlays&&(e.devtools.overlays=De({},e.devtools.overlays,t.devtools.overlays)),e.status=Ne,e.bootstrap=Le(t,"bootstrap"),e.mount=Le(t,"mount"),e.unmount=Le(t,"unmount"),e.unload=Le(t,"unload"),e.timeouts=ot(t.timeouts),delete e.loadPromise,e}))})).catch((function(t){var r;return delete e.loadPromise,n?r=Ce:(r=Pe,e.loadErrorTime=(new Date).getTime()),ve(t,e,r),e})));var t,n}))},toBootstrapPromise:Ve},st="undefined"!==typeof window,ut=!1;function lt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.jQuery;if(e||window.$&&window.$.fn&&window.$.fn.jquery&&(e=window.$),e&&!ut){var t=e.fn.on,n=e.fn.off;e.fn.on=function(e,n){return dt.call(this,t,window.addEventListener,e,n,arguments)},e.fn.off=function(e,t){return dt.call(this,n,window.removeEventListener,e,t,arguments)},ut=!0}}function dt(e,t,n,r,a){return"string"!==typeof n?e.apply(this,a):(n.split(/\s+/).forEach((function(e){["hashchange","popstate"].indexOf(e)>=0&&(t(e,r),n=n.replace(e,""))})),""===n.trim()?this:e.apply(this,a))}window.__DEV__=!1,st&&window.__SINGLE_SPA_DEVTOOLS__&&(window.__SINGLE_SPA_DEVTOOLS__.exposedMethods=it);var ft,pt,mt,ht=n(227),bt="undefined"!==typeof navigator&&-1!==navigator.userAgent.indexOf("Trident");function vt(e,t){if(!e.hasOwnProperty(t)||!isNaN(t)&&t<e.length)return!0;if(!bt)return!1;try{return e[t]&&"undefined"!==typeof window&&e[t].parent===window}catch(n){return!0}}function jt(e){var t,n=0,r=!1;for(var a in e)if(!vt(e,a)){for(var c=0;c<window.frames.length&&!r;c++){if(window.frames[c]===e[a]){r=!0;break}}if(!r&&(0===n&&a!==ft||1===n&&a!==pt))return a;n++,t=a}if(t!==mt)return t}function gt(e){for(var t in ft=pt=void 0,e)vt(e,t)||(ft?pt||(pt=t):ft=t,mt=t);return mt}function xt(e){var t=e.indexOf(">")+1,n=e.lastIndexOf("<");return e.substring(t,n)}function yt(e){if("object"===typeof e)return"/";try{var t=new URL(e.startsWith("//")?"".concat(window.location.protocol).concat(e):e,window.location.href),n=t.origin,r=t.pathname.split("/");return"".concat(n).concat(r.join("/"),"/")}catch(a){return console.warn(a),""}}var Ot=window.requestIdleCallback||function(e){var t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)};function wt(e,t){if(!t)return e.text();if(!e.headers)return e.text();var n=e.headers.get("Content-Type");if(!n)return e.text();var r="utf-8",a=n.split(";");if(2===a.length){var c=a[1].split("="),o=Object(s.a)(c,2)[1],i=o&&o.trim();i&&(r=i)}return"UTF-8"===r.toUpperCase()?e.text():e.blob().then((function(e){return new Promise((function(t,n){var a=new window.FileReader;a.onload=function(){t(a.result)},a.onerror=n,a.readAsText(e,r)}))}))}var Nt=/(<script[\s\S]*?>)[\s\S]*?<\/script>/gi,It=/<(script)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+((?!type=('|")text\/ng\x2Dtemplate\3)[\s\S])*?>[\s\S]*?<\/\1>/i,Et=/.*\ssrc=('|")?([^>'"\s]+)/,St=/.*\stype=('|")?([^>'"\s]+)/,Tt=/.*\sentry\s*.*/,_t=/.*\sasync\s*.*/,kt=/.*\snomodule\s*.*/,Pt=/.*\stype=('|")?module('|")?\s*.*/,Ct=/<(link)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+[\s\S]*?>/gi,Mt=/\srel=('|")?(preload|prefetch)\1/,At=/.*\shref=('|")?([^>'"\s]+)/,Ft=/.*\sas=('|")?font\1.*/,Dt=/<style[^>]*>[\s\S]*?<\/style>/gi,Rt=/\s+rel=('|")?stylesheet\1.*/,Lt=/.*\shref=('|")?([^>'"\s]+)/,Bt=/<!--([\s\S]*?)-->/g,Vt=/<link([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+[\s\S]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)ignore([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+[\s\S]*|=[\s\S]*)>/i,Gt=/<style([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+[\s\S]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)ignore([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+[\s\S]*|=[\s\S]*)>/i,Ht=/<script([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+[\s\S]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)ignore([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+[\s\S]*|=[\s\S]*)>/i;function Ut(e){return e.startsWith("//")||e.startsWith("http://")||e.startsWith("https://")}function Wt(e,t){return/\/\/$/.test(t)&&(t=t.substr(0,t.length-1)),/\/$/.test(t)||(t+="/"),e.startsWith("/")&&(e=e.replace("/","")),t+e}var qt=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"\x3c!-- ".concat(t?"prefetch/preload":""," link ").concat(e," replaced by import-html-entry --\x3e")},Yt=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"\x3c!-- ".concat(t?"async":""," script ").concat(e," replaced by import-html-entry --\x3e")},zt=function(e){return"\x3c!-- ignore asset ".concat(e||"file"," replaced by import-html-entry --\x3e")},$t=function(e,t){return"\x3c!-- ".concat(t?"nomodule":"module"," script ").concat(e," ignored by import-html-entry --\x3e")};function Kt(e,t){var n=[],r=[],a=null,c="noModule"in document.createElement("script");return/\/\/$/.test(t)&&(t=t.substr(0,t.length-1)),/\/$/.test(t)||(t+="/"),{template:e.replace(/url\(static/g,"url(".concat(t,"static")).replace(/url\(\/static/g,"url(".concat(t,"static")).replace(Bt,"").replace(Ct,(function(e){if(!!e.match(Rt)){var n=e.match(Lt),a=e.match(Vt);if(n){var c=n&&n[2],o=c;return c&&!Ut(c)&&(o=Wt(c,t)),a?zt(o):(r.push(o),qt(o))}}if(e.match(Mt)&&e.match(At)&&!e.match(Ft)){var i=e.match(At),u=Object(s.a)(i,3)[2];return qt(u,!0)}return e})).replace(Dt,(function(e){return Gt.test(e)?zt("style file"):e})).replace(Nt,(function(e,r){var o,i=r.match(Ht),s=c&&!!r.match(kt)||!c&&!!r.match(Pt),u=r.match(St),l=u&&u[2];if((o=l)&&-1===["text/javascript","module","application/javascript","text/ecmascript","application/ecmascript"].indexOf(o))return e;if(It.test(e)&&r.match(Et)){var d=r.match(Tt),f=r.match(Et),p=f&&f[2];if(a&&d)throw new SyntaxError("You should not set multiply entry script!");if(p&&!Ut(p)&&(p=Wt(p,t)),a=a||d&&p,i)return zt(p||"js file");if(s)return $t(p||"js file",c);if(p){var m=!!r.match(_t);return n.push(m?{async:!0,src:p}:p),Yt(p,m)}return e}return i?zt("js file"):s?$t("js file",c):(xt(e).split(/[\r\n]+/).every((function(e){return!e.trim()||e.trim().startsWith("//")}))||n.push(e),"\x3c!-- inline scripts replaced by import-html-entry --\x3e")})),scripts:n=n.filter((function(e){return!!e})),styles:r,entry:a||n[n.length-1]}}var Jt=new Map;function Zt(e,t,n){var r=Jt.get(e)||{length:0,histories:[],position:0};if(n&&r.length>0)r.histories.splice(r.position,1,t);else{var a=r.position;r.histories=r.histories.slice(0,a+1),r.histories.push(t),r.length=r.histories.length,r.position=r.histories.length-1}Jt.set(e,r)}function Qt(e){var t=Jt.get(e)||{length:0,histories:[],position:0};return Object(d.a)({},t)}function Xt(){if(!(window.location.search?window.location.search.split("?"):[])[1])return{type:0};var e=window.location.search.split("?")[1].split("&"),t={};return e.forEach((function(e){t[e.split("=")[0]]=e.split("=")[1]})),t.dev?"replace"===t.dev.toLowerCase()?{type:2,params:t}:(t.dev=t.dev.split("$_")[0],{type:1,params:t}):{type:0}}var en=document,tn=window.location,nn=window.localStorage,rn=new Map;function an(){if(tn.href.includes("$freelog")){var e=tn.href.split("freelog.com/")[1].split("$");if(1===window.freelogApp.devData.type){var t=tn.search.split("$_")[1];e=t?t.split("$"):[]}e.forEach((function(e){try{if(!e)return;if((e=e.replace("_","?")).indexOf("?")>-1){var t=e.indexOf("?"),n=e.substring(0,t).split("="),r=Object(s.a)(n,2),a=r[0],c=r[1],o=e.substring(t);return void rn.set(a,{pathname:c,href:c+o,search:o})}var i=e.split("=");rn.set(i[0],{pathname:i[1],href:i[1],search:""})}catch(u){console.error("url is error"+u)}}))}}function cn(){var e="";if(rn.forEach((function(t,n){ja.get(n)?e+="$"+n+"="+t.href||!1:rn.delete(n)})),1===window.freelogApp.devData.type){var t=tn.search.split("$_")[0];t.endsWith("/")||(t+="/");var n=tn.origin+t+"$_"+e.replace("?","_")+tn.hash;window.history.pushState("","",n)}else{var r=tn.origin+"/"+e.replace("?","_")+tn.hash+tn.search;window.history.pushState("","",r)}}window.addEventListener("popstate",(function(e){an()}),!0),window.addEventListener("hashchange",(function(){an()}),!0);var on=function(e,t){var n=rn.get(e)||{};t.pathname&&t.pathname.indexOf(tn.host)>-1&&(t.pathname=t.pathname.replace(tn.protocol,"").replace(tn.host,"").replace("//","")),rn.set(e,Object(d.a)(Object(d.a)({},n),t)),cn()},sn=function(e){return rn.get(e)};var un=function(e,t){!function(e,t){xa.has(e)&&console.warn(ba.get(e).name+"reloaded");xa.set(e,t)}(e,t)},ln=function(e,t){function n(){var t="";arguments[2]&&arguments[2].indexOf("#")>-1&&(t=arguments[2]);var n=arguments[2],r=n.split("?"),a=Object(s.a)(r,2),c=a[0],o=a[1];on(e,{pathname:c,href:n,search:o,hash:t})}var r=Qt(e).histories[Qt(e).position]?[0]:{},a=Qt(e).length;return Object(d.a)(Object(d.a)({length:a},window.history),{},{pushState:function(){n.apply(void 0,arguments),Zt(e,arguments)},replaceState:function(){n.apply(void 0,arguments),Zt(e,arguments,!0)},state:r,go:function(t){var r=function(e,t){var n=Jt.get(e)||{length:0,histories:[],position:0};return n.length>0&&n.position>0&&n.position+t<n.length-1&&n.position+t>=0&&(n.position=n.position+t,n.histories[n.position])}(e,t);r&&n.apply(void 0,Object(f.a)(r))},back:function(){var t=function(e){var t=Jt.get(e)||{length:0,histories:[],position:0};return t.length>0&&t.position>0&&(t.position=t.position-1,t.histories[t.position])}(e);t&&n.apply(void 0,Object(f.a)(t))},forward:function(){var t=function(e){var t=Jt.get(e)||{length:0,histories:[],position:0};return t.length>0&&t.position<t.length-1&&(t.position=t.position+1,t.histories[t.position])}(e);t&&n.apply(void 0,Object(f.a)(t))}})};en.write=function(){console.warn("please be careful")},en.writeln=function(){console.warn("please be careful")};var dn=en.getElementsByClassName,fn=en.getElementsByTagName,pn=en.getElementsByTagNameNS,mn=en.querySelector,hn=en.querySelectorAll,bn=en.getElementById,vn=en.body.appendChild,jn=en.body.removeChild,gn=en.addEventListener;!function(){var e=window.fetch;window.fetch=function(t,n){return n=n||{},t.indexOf("freelog.com")>-1?e(t,Object(d.a)(Object(d.a)({},n),{},{credentials:"include"})):e(t,n)}}();var xn={},yn={},On={};if(!window.fetch)throw new Error('[import-html-entry] Here is no "fetch" on the window env, you need to polyfill it');var wn=window.fetch.bind(window);function Nn(e){return e}function In(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.fetch,a=void 0===r?wn:r,c=e;return Tn(t,a).then((function(e){return c=t.reduce((function(t,n,r){return t=t.replace(qt(n),"<style>/* ".concat(n," */").concat(e[r],"</style>"))}),c)}))}var En=function(e){return e.startsWith("<")};function Sn(e,t,n,r){var a=En(e)?"":"//# sourceURL=".concat(e,"\n");return(0,eval)("window").proxy=n,r?";(function(window, self, globalThis){with(window){;".concat(t,"\n").concat(a,"}}).bind(window.proxy)(window.proxy, window.proxy, window.proxy);"):";(function(window, self, globalThis){;".concat(t,"\n").concat(a,"}).bind(window.proxy)(window.proxy, window.proxy, window.proxy);")}function Tn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wn;return Promise.all(e.map((function(e){return En(e)?xt(e):xn[e]||(xn[e]=t(e).then((function(e){return e.text()})))})))}function _n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wn,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=function(e){return yn[e]||(yn[e]=t(e).then((function(t){if(t.status>=400)throw n(),new Error("".concat(e," load failed with status ").concat(t.status));return t.text()})))};return Promise.all(e.map((function(e){if("string"===typeof e)return En(e)?xt(e):r(e);var t=e.src;return e.async?{src:t,async:!0,content:new Promise((function(e,n){return Ot((function(){return r(t).then(e,n)}))}))}:r(t)})))}function kn(e,t){setTimeout((function(){throw console.error(t),e}))}"undefined"!==typeof performance&&"function"===typeof performance.mark&&"function"===typeof performance.clearMarks&&"function"===typeof performance.measure&&performance.clearMeasures;function Pn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.fetch,c=void 0===a?wn:a,o=r.strictGlobal,i=void 0!==o&&o,s=r.success,u=r.error,l=void 0===u?function(){}:u,d=r.beforeExec,f=void 0===d?function(){}:d,p=r.afterExec,m=void 0===p?function(){}:p;return _n(t,c,l).then((function(r){var a=function(e,t){var r=Sn(e,f(t,e)||t,n,i);(0,eval)(r),m(t,e)};function c(o,s){o<t.length&&(!function(t,r,c){if("Evaluating script ".concat(t),"Evaluating Time Consuming: ".concat(t),t===e){gt(i?n:window);try{a(t,r),c(n[jt(i?n:window)]||{})}catch(o){throw console.error("[import-html-entry]: error occurs while executing entry script ".concat(t)),o}}else if("string"===typeof r)try{a(t,r)}catch(o){kn(o,"[import-html-entry]: error occurs while executing normal script ".concat(t))}else r.async&&(null===r||void 0===r||r.content.then((function(e){return a(r.src,e)})).catch((function(e){kn(e,"[import-html-entry]: error occurs while executing async script ".concat(r.src))})))}(t[o],r[o],s),e||o!==t.length-1?c(o+1,s):s())}return new Promise((function(e){return c(0,s||e)}))}))}function Cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=wn,r=!1,a=Nn;return"function"===typeof t?n=t:(t.fetch&&("function"===typeof t.fetch?n=t.fetch:(n=t.fetch.fn||wn,r=!!t.fetch.autoDecodeResponse)),t.getPublicPath||t.getDomain||yt,a=t.getTemplate||Nn),On[e]||(On[e]=n(e+"/index.html").then((function(e){return wt(e,r)})).then((function(t){var r=e,c=Kt(a(t),r),o=c.template,i=c.scripts,s=c.entry,u=c.styles;return In(o,u,{fetch:n},r).then((function(e){return{template:e,assetPublicPath:r,getExternalScripts:function(){return _n(i,n)},getExternalStyleSheets:function(){return Tn(u,n)},execScripts:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.length?Pn(s,i,e,{fetch:n,strictGlobal:t,beforeExec:r.beforeExec,afterExec:r.afterExec}):Promise.resolve()}}}))})))}function Mn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.fetch,r=void 0===n?wn:n,a=t.getTemplate,c=void 0===a?Nn:a,o=t.getPublicPath||t.getDomain||yt;if(!e)throw new SyntaxError("entry should not be empty!");if("string"===typeof e)return Cn(e,{fetch:r,getPublicPath:o,getTemplate:c});if(Array.isArray(e.scripts)||Array.isArray(e.styles)){var i=e.scripts,s=void 0===i?[]:i,u=e.styles,l=void 0===u?[]:u,d=e.html,f=void 0===d?"":d,p=function(e){return l.reduceRight((function(e,t){return"".concat(qt(t)).concat(e)}),e)},m=function(e){return s.reduce((function(e,t){return"".concat(e).concat(Yt(t))}),e)};return In(c(m(p(f))),l,{fetch:r}).then((function(t){return{template:t,assetPublicPath:o(e),getExternalScripts:function(){return _n(s,r)},getExternalStyleSheets:function(){return Tn(l,r)},execScripts:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s.length?Pn(s[s.length-1],s,e,{fetch:r,strictGlobal:t,beforeExec:n.beforeExec,afterExec:n.afterExec}):Promise.resolve()}}}))}throw new SyntaxError("entry scripts or styles should be array!")}var An=n(30),Fn=window.__INJECTED_PUBLIC_PATH_BY_FREELOG__;function Dn(e,t){return Object(An.mergeWith)({},function(e){return{beforeLoad:function(){return Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.__POWERED_BY_FREELOG__=!0;case 1:case"end":return t.stop()}}),t)})))()},beforeMount:function(){return Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.__POWERED_BY_FREELOG__=!0;case 1:case"end":return t.stop()}}),t)})))()},beforeUnmount:function(){return Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:delete e.__POWERED_BY_FREELOG__;case 1:case"end":return t.stop()}}),t)})))()}}}(e),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=!1;return{beforeLoad:function(){return Object(p.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.__INJECTED_PUBLIC_PATH_BY_FREELOG__=t;case 1:case"end":return n.stop()}}),n)})))()},beforeMount:function(){return Object(p.a)(l.a.mark((function r(){return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n&&(e.__INJECTED_PUBLIC_PATH_BY_FREELOG__=t);case 1:case"end":return r.stop()}}),r)})))()},beforeUnmount:function(){return Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:void 0===Fn?delete e.__INJECTED_PUBLIC_PATH_BY_FREELOG__:e.__INJECTED_PUBLIC_PATH_BY_FREELOG__=Fn,n=!0;case 2:case"end":return t.stop()}}),t)})))()}}}(e,t),(function(e,t){return Object(An.concat)(null!==e&&void 0!==e?e:[],null!==t&&void 0!==t?t:[])}))}var Rn,Ln=n(13),Bn={},Vn={};function Gn(e,t){Object.keys(Vn).forEach((function(n){Vn[n]instanceof Function&&Vn[n](Object(An.cloneDeep)(e),Object(An.cloneDeep)(t))}))}function Hn(e,t){return{onGlobalStateChange:function(t,n){if(t instanceof Function){Vn[e]&&console.warn("[freelog] '".concat(e,"' global listener already exists before this, new listener will overwrite it.")),Vn[e]=t;var r=Object(An.cloneDeep)(Bn);n&&t(r,r)}else console.error("[freelog] callback must be function!")},setGlobalState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e===Bn)return console.warn("[freelog] state has not changed\uff01"),!1;var n=[],r=Object(An.cloneDeep)(Bn);return Bn=Object(An.cloneDeep)(Object.keys(e).reduce((function(r,a){return t||r.hasOwnProperty(a)?(n.push(a),Object.assign(r,Object(Ln.a)({},a,e[a]))):(console.warn("[freelog] '".concat(a,"' not declared when init state\uff01")),r)}),Bn)),0===n.length?(console.warn("[freelog] state has not changed\uff01"),!1):(Gn(Bn,r),!0)},offGlobalStateChange:function(){return delete Vn[e],!0}}}!function(e){e.Proxy="Proxy",e.Snapshot="Snapshot",e.LegacyProxy="LegacyProxy"}(Rn||(Rn={}));var Un,Wn=n(4),qn=n(5);!function(e){e[e.STYLE=1]="STYLE",e[e.MEDIA=4]="MEDIA",e[e.SUPPORTS=12]="SUPPORTS",e[e.IMPORT=3]="IMPORT",e[e.FONT_FACE=5]="FONT_FACE",e[e.PAGE=6]="PAGE",e[e.KEYFRAMES=7]="KEYFRAMES",e[e.KEYFRAME=8]="KEYFRAME"}(Un||(Un={}));var Yn,zn=function(e){return[].slice.call(e,0)},$n=HTMLBodyElement.prototype.appendChild,Kn=function(){function e(t){Object(Wn.a)(this,e),this.sheet=void 0,this.swapNode=void 0,this.appName=void 0;var n=document.createElement("style");$n.call(document.body,n),this.appName=t.appName,this.swapNode=n,this.sheet=n.sheet,this.sheet.disabled=!0}return Object(qn.a)(e,[{key:"process",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(""!==t.textContent){var a,c=document.createTextNode(t.textContent||"");this.swapNode.appendChild(c);var o=this.swapNode.sheet,i=zn(null!==(a=null===o||void 0===o?void 0:o.cssRules)&&void 0!==a?a:[]),s=this.rewrite(i,r);return t.textContent=s,void this.swapNode.removeChild(c)}var u=new MutationObserver((function(a){for(var c=0;c<a.length;c+=1){var o=a[c];if(e.ModifiedTag in t)return;if("childList"===o.type){var i,s=t.sheet,u=zn(null!==(i=null===s||void 0===s?void 0:s.cssRules)&&void 0!==i?i:[]),l=n.rewrite(u,r);t.textContent=l,t[e.ModifiedTag]=!0}}}));u.observe(t,{childList:!0})}},{key:"rewrite",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r="";return e.forEach((function(e){switch(e.type){case Un.STYLE:r+=t.ruleStyle(e,n);break;case Un.MEDIA:r+=t.ruleMedia(e,n);break;case Un.SUPPORTS:r+=t.ruleSupport(e,n);break;default:r+="".concat(e.cssText)}})),r}},{key:"ruleFont",value:function(e,t){var n=e.cssText;return n=n.replace(/url\(\"\//gi,'url("'+va.get(this.appName).entry+"/"),console.log(n,va.get(this.appName).entry),n}},{key:"ruleStyle",value:function(e,t){var n=/((?:[^\w\-.#]|^)(body|html|:root))/gm,r=/(html[^\w{[]+)/gm,a=e.selectorText.trim(),c=e.cssText;if("html"===a||"body"===a||":root"===a)return c.replace(n,t);if(r.test(e.selectorText)){/(html[^\w{]+)(\+|~)/gm.test(e.selectorText)||(c=c.replace(r,""))}return c=c.replace(/^[\s\S]+{/,(function(e){return e.replace(/(^|,\n?)([^,]+)/g,(function(e,r,a){return n.test(e)?e.replace(n,(function(e){return e&&[",","("].includes(e[0])?"".concat(e[0]).concat(t):t})):"".concat(r).concat(t," ").concat(a.replace(/^ */,""))}))}))}},{key:"ruleMedia",value:function(e,t){var n=this.rewrite(zn(e.cssRules),t);return"@media ".concat(e.conditionText," {").concat(n,"}")}},{key:"ruleSupport",value:function(e,t){var n=this.rewrite(zn(e.cssRules),t);return"@supports ".concat(e.conditionText," {").concat(n,"}")}}]),e}();Kn.ModifiedTag="Symbol(style-modified-freelog)";var Jn="data-freelog",Zn=function(e,t,n){Yn||(Yn=new Kn({appName:n})),"LINK"===t.tagName&&console.warn("Feature: sandbox.experimentalStyleIsolation is not support for link element yet.");if(e){var r=(e.tagName||"").toLowerCase();if(r&&"STYLE"===t.tagName){var a="".concat(r,"[").concat(Jn,'="').concat(n,'"]');Yn.process(t,a)}}};function Qn(e){return Array.isArray(e)?e:[e]}var Xn=new WeakMap;var er="function"===typeof document.all&&"undefined"===typeof document.all?function(e){return"function"===typeof e&&"undefined"!==typeof e}:function(e){return"function"===typeof e},tr=new WeakMap;function nr(e,t){return function(n){return'<div id="'.concat(rr(e),'" data-name="').concat(t,'">').concat(n,"</div>")}}function rr(e){return"__freelog_microapp_wrapper_for_".concat(Object(An.snakeCase)(e),"__")}function ar(e){var t=null!==e&&void 0!==e?e:{},n=t.bootstrap,r=t.mount,a=t.unmount;return Object(An.isFunction)(n)&&Object(An.isFunction)(r)&&Object(An.isFunction)(a)}var cr,or=function e(){var t=this;Object(Wn.a)(this,e),this.promise=void 0,this.resolve=void 0,this.reject=void 0,this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))};"undefined"!==typeof performance&&"function"===typeof performance.mark&&"function"===typeof performance.clearMarks&&"function"===typeof performance.measure&&"function"===typeof performance.clearMeasures&&performance.getEntriesByName;function ir(e){return"object"===typeof e&&(!e.strictStyleIsolation&&!!e.experimentalStyleIsolation)}function sr(e){return"string"===typeof e?document.querySelector(e):e}function ur(e){cr=e}var lr=new WeakMap;function dr(e,t){var n=lr.get(t);if(n)return n;if(er(t)&&!function(e){if(tr.has(e))return tr.get(e);var t=0===e.name.indexOf("bound ")&&!e.hasOwnProperty("prototype");return tr.set(e,t),t}(t)&&!function(e){if(Xn.has(e))return Xn.get(e);var t=e.prototype&&e.prototype.constructor===e&&Object.getOwnPropertyNames(e.prototype).length>1||/^function\b\s[A-Z].*/.test(e.toString())||/^class\b/.test(e.toString());return Xn.set(e,t),t}(t)){var r=Function.prototype.bind.call(t,e);for(var a in t)r[a]=t[a];return t.hasOwnProperty("prototype")&&!r.hasOwnProperty("prototype")&&(r.prototype=t.prototype),lr.set(t,r),r}return t}new WeakMap;var fr=HTMLHeadElement.prototype.appendChild,pr=HTMLHeadElement.prototype.removeChild,mr=HTMLBodyElement.prototype.appendChild,hr=HTMLBodyElement.prototype.removeChild,br=HTMLHeadElement.prototype.insertBefore,vr=HTMLElement.prototype.removeChild,jr="SCRIPT",gr="LINK",xr="STYLE";function yr(e){return(null===e||void 0===e?void 0:e.toUpperCase())===gr||(null===e||void 0===e?void 0:e.toUpperCase())===xr||(null===e||void 0===e?void 0:e.toUpperCase())===jr}function Or(e){var t,n;return!e.textContent&&((null===(t=e.sheet)||void 0===t?void 0:t.cssRules.length)||(null===(n=kr(e))||void 0===n?void 0:n.length))}function wr(e,t){return Object.defineProperties(e,{srcElement:{get:t},target:{get:t}}),e}function Nr(e){var t=wr(new CustomEvent("load"),(function(){return e}));Object(An.isFunction)(e.onload)?e.onload(t):e.dispatchEvent(t)}function Ir(e){var t=wr(new CustomEvent("error"),(function(){return e}));Object(An.isFunction)(e.onerror)?e.onerror(t):e.dispatchEvent(t)}var Er=new WeakMap,Sr=new WeakMap,Tr=new WeakMap;function _r(e){e.forEach((function(e){e instanceof HTMLStyleElement&&Or(e)&&e.sheet&&Er.set(e,e.sheet.cssRules)}))}function kr(e){return Er.get(e)}function Pr(e){return function(t,n){var r=t,a=e.rawDOMAppendOrInsertBefore,c=e.isInvokedByMicroApp,o=e.containerConfigGetter;if(!yr(r.tagName)||!c(r))return a.call(this,r,n);if(r.tagName){var i=o(r),s=i.appName,u=i.appWrapperGetter,l=i.proxy,d=i.strictGlobal,f=i.dynamicStyleSheetElements,p=i.scopedCSS,m=i.excludeAssetFilter;switch(r.tagName){case gr:case xr:var h=t,b=h.href;if(m&&b&&m(b))return a.call(this,r,n);var v,j=u();if(p)if((null===(v=r.tagName)||void 0===v?void 0:v.toUpperCase())===gr&&"stylesheet"===r.rel&&r.href){var g,x="function"===typeof ma.fetch?ma.fetch:null===(g=ma.fetch)||void 0===g?void 0:g.fn;h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fetch,r=document.createElement("style"),a=e.href;return r.dataset.freelogHref=a,n(a).then((function(e){return e.text()})).then((function(n){r.appendChild(document.createTextNode(n)),t(r),Nr(e)})).catch((function(){return Ir(e)})),r}(r,(function(e){return Zn(j,e,s)}),x),Tr.set(r,h)}else Zn(j,h,s);f.push(h);var y=j.contains(n)?n:null;return a.call(j,h,y);case jr:var O=r,w=O.src,N=O.text;if(m&&w&&m(w))return a.call(this,r,n);var I=u(),E=ma.fetch,S=I.contains(n)?n:null;if(w){Pn(null,[w],l,{fetch:E,strictGlobal:d,beforeExec:function(){Object.defineProperty(document,"currentScript",{get:function(){return r},configurable:!0})},success:function(){Nr(r),r=null},error:function(){Ir(r),r=null}});var T=document.createComment("dynamic script ".concat(w," replaced by freelog"));return Sr.set(r,T),a.call(I,T,S)}Pn(null,["<script>".concat(N,"<\/script>")],l,{strictGlobal:d});var _=document.createComment("dynamic inline script replaced by freelog");return Sr.set(r,_),a.call(I,_,S)}}return a.call(this,r,n)}}function Cr(e,t){return function(n){var r=n.tagName;if(!yr(r))return e.call(this,n);try{var a;switch(r){case gr:a=Tr.get(n)||n;break;case jr:a=Sr.get(n)||n;break;default:a=n}var c=t(n)();if(c.contains(a))return vr.call(c,a)}catch(o){console.warn(o)}return e.call(this,n)}}function Mr(e,t){return HTMLHeadElement.prototype.appendChild===fr&&HTMLBodyElement.prototype.appendChild===mr&&HTMLHeadElement.prototype.insertBefore===br&&(HTMLHeadElement.prototype.appendChild=Pr({rawDOMAppendOrInsertBefore:fr,containerConfigGetter:t,isInvokedByMicroApp:e}),HTMLBodyElement.prototype.appendChild=Pr({rawDOMAppendOrInsertBefore:mr,containerConfigGetter:t,isInvokedByMicroApp:e}),HTMLHeadElement.prototype.insertBefore=Pr({rawDOMAppendOrInsertBefore:br,containerConfigGetter:t,isInvokedByMicroApp:e})),HTMLHeadElement.prototype.removeChild===pr&&HTMLBodyElement.prototype.removeChild===hr&&(HTMLHeadElement.prototype.removeChild=Cr(pr,(function(e){return t(e).appWrapperGetter})),HTMLBodyElement.prototype.removeChild=Cr(hr,(function(e){return t(e).appWrapperGetter}))),function(){HTMLHeadElement.prototype.appendChild=fr,HTMLHeadElement.prototype.removeChild=pr,HTMLBodyElement.prototype.appendChild=mr,HTMLBodyElement.prototype.removeChild=hr,HTMLHeadElement.prototype.insertBefore=br}}function Ar(e,t){e.forEach((function(e){if(t(e)&&e instanceof HTMLStyleElement&&Or(e)){var n=kr(e);if(n)for(var r=0;r<n.length;r++){var a=n[r],c=e.sheet;c.insertRule(a.cssText,c.cssRules.length)}}}))}var Fr=Document.prototype.createElement,Dr=new WeakMap,Rr=new WeakMap;function Lr(){return Document.prototype.createElement===Fr&&(Document.prototype.createElement=function(e,t){var n=Fr.call(this,e,t);if(yr(e)){var r=cr;if(r){var a=Dr.get(r);a&&Rr.set(n,a)}}return n}),function(){Document.prototype.createElement=Fr}}var Br=0,Vr=0;function Gr(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5?arguments[5]:void 0,o=Dr.get(n);o||(o={appName:e,proxy:n,appWrapperGetter:t,dynamicStyleSheetElements:[],strictGlobal:!0,excludeAssetFilter:c,scopedCSS:a},Dr.set(n,o));var i=o,s=i.dynamicStyleSheetElements,u=Lr(),l=Mr((function(e){return Rr.has(e)}),(function(e){return Rr.get(e)}));return r||Br++,r&&Vr++,function(){return r||0===Br||Br--,r&&Vr--,0===Vr&&0===Br&&(l(),u()),_r(s),function(){Ar(s,(function(e){var n=t();return!n.contains(e)&&(fr.call(n,e),!0)}))}}}var Hr=window.setInterval,Ur=window.clearInterval;var Wr=window.addEventListener,qr=window.removeEventListener;function Yr(e,t,n,r,a){var c,o=[function(){return function(e){var t=[];return e.clearInterval=function(e){return t=t.filter((function(t){return t!==e})),Ur(e)},e.setInterval=function(e,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),c=2;c<r;c++)a[c-2]=arguments[c];var o=Hr.apply(void 0,[e,n].concat(a));return t=[].concat(Object(f.a)(t),[o]),o},function(){return t.forEach((function(t){return e.clearInterval(t)})),e.setInterval=Hr,e.clearInterval=Ur,An.noop}}(n.proxy)},function(){return function(e){var t=new Map;return e.addEventListener=function(e,n,r){var a=t.get(e)||[];return t.set(e,[].concat(Object(f.a)(a),[n])),Wr.call(window,e,n,r)},e.removeEventListener=function(e,n,r){var a=t.get(e);return a&&a.length&&-1!==a.indexOf(n)&&a.splice(a.indexOf(n),1),qr.call(window,e,n,r)},function(){return t.forEach((function(t,n){return Object(f.a)(t).forEach((function(t){return e.removeEventListener(n,t)}))})),e.addEventListener=Wr,e.removeEventListener=qr,An.noop}}(n.proxy)},function(){return function(){var e=function(e){return An.noop},t=[],n=[];return window.g_history&&Object(An.isFunction)(window.g_history.listen)&&(e=window.g_history.listen.bind(window.g_history),window.g_history.listen=function(r){t.push(r);var a=e(r);return n.push(a),function(){a(),n.splice(n.indexOf(a),1),t.splice(t.indexOf(r),1)}}),function(){var r=An.noop;return t.length&&(r=function(){t.forEach((function(e){return window.g_history.listen(e)}))}),n.forEach((function(e){return e()})),window.g_history&&Object(An.isFunction)(window.g_history.listen)&&(window.g_history.listen=e),r}}()}];return null===(c=Object(Ln.a)({},Rn.Proxy,[].concat(o,[function(){return Gr(e,t,n.proxy,!0,r,a)}]))[n.type])||void 0===c?void 0:c.map((function(e){return e()}))}var zr=Object.defineProperty,$r=window.__FREELOG_DEVELOPMENT__?["__REACT_ERROR_OVERLAY_GLOBAL_HOOK__"]:[],Kr=["System","__cjsWrapper"].concat($r),Jr={undefined:!0,Array:!0,Object:!0,String:!0,Boolean:!0,Math:!0,Number:!0,Symbol:!0,parseFloat:!0,Float32Array:!0};var Zr=0,Qr=function(){function e(t){var n=this;Object(Wn.a)(this,e),this.updatedValueSet=new Set,this.name=void 0,this.type=void 0,this.proxy=void 0,this.sandboxRunning=!0,this.latestSetProp=null,this.name=t,this.type=Rn.Proxy;var r,a,c,o,i=this.updatedValueSet,s=window,u=function(e){var t=new Map,n={};return Object.getOwnPropertyNames(e).filter((function(t){var n=Object.getOwnPropertyDescriptor(e,t);return!(null===n||void 0===n?void 0:n.configurable)})).forEach((function(r){var a=Object.getOwnPropertyDescriptor(e,r);if(a){var c=Object.prototype.hasOwnProperty.call(a,"get");"top"!==r&&"parent"!==r&&"self"!==r&&"window"!==r||(a.configurable=!0,c||(a.writable=!0)),c&&t.set(r,!0),zr(n,r,Object.freeze(a))}})),{fakeWindow:n,propertiesWithGetter:t}}(s),f=u.fakeWindow,m=u.propertiesWithGetter,h=new Map,b=function(e){return f.hasOwnProperty(e)||s.hasOwnProperty(e)},v=this,j=new Proxy(f,{set:function(e,t,r){if("freelogApp"===t)return!1;if(n.sandboxRunning){if(!e.hasOwnProperty(t)&&s.hasOwnProperty(t)){var a=Object.getOwnPropertyDescriptor(s,t),c=a.writable,o=a.configurable,u=a.enumerable;c&&Object.defineProperty(e,t,{configurable:o,enumerable:u,writable:c,value:r})}else e[t]=r;return-1!==Kr.indexOf(t)&&(s[t]=r),i.add(t),n.latestSetProp=t,!0}return!0},get:function(e,n){if(n===Symbol.unscopables)return Jr;if("__INJECTED_PUBLIC_PATH_BY_FREELOG__"===n)return function(e){var t=va.get(e);return/\/$/.test(t.entry)?t.entry:t.entry+"/"}(t);if("fetch"===n)return function(e,t){return e.indexOf("i18n-ts")>-1?s.fetch(e,Object(d.a)(Object(d.a)({},t),{},{credentials:"include"})):s.fetch(e,t)};if("window"===n||"self"===n)return j;if("globalThis"===n)return j;if("top"===n||"parent"===n)return s===s.parent?j:s[n];if("hasOwnProperty"===n)return b;if("freelogApp"===n)return o=o||(i=v,new Proxy({},{get:function(e,t){var n=window.freelogApp[t];return"function"===typeof n?function(){return n.bind(i).apply(void 0,arguments)}:n}}));var i,u,f;if("widgetName"===n)return t;if("history"===n)return r=r||ln(t);if("childWidgets"===n&&(c=c||function(e,t){return new Proxy({},{get:function(t,n){if("getAll"===n)return function(){var t=ga.get(e),n=[];return t&&t.forEach((function(e){n.push(ba.get(e))})),n}}})}(t)),"location"===n)return a=a||function(e,t){return new Proxy({},{set:function(e,t,n){return!0},get:function(t,n){return["href","pathname","hash","search"].indexOf(n)>-1?sn(e)&&sn(e)[n]||"":["replace"].indexOf(n)>-1?function(){}:["reload"].indexOf(n)>-1?Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ba.get(e).unmount();case 2:ba.get(e).mount();case 3:case"end":return t.stop()}}),t)}))):"toString"===n?function(){return sn(e)&&(sn(e).pathname||"")}:"function"===typeof tn[n]?tn[n].bind():tn[n]}})}(t);if("localStorage"===n)return u=t,{clear:function(e){},getItem:function(e){return nn.getItem(u+e)},key:function(e){},removeItem:function(e){nn.removeItem(u+e)},setItem:function(e,t){nn.setItem(u+e,t)},length:0};if("document"===n||"eval"===n)switch(ur(j),f=function(){return ur(null)},Promise.resolve().then(f),n){case"document":return function(e,t,n){var r=va.get(e).container,a=!1;if(r.shadowRoot&&(a=!0,r=r.shadowRoot),!r)return en;var c=r;return a?new Proxy({},{get:function(e,t){for(var a=null,o=r.children||[],i=0;i<o.length;i++)"DIV"===o.item(i).tagName&&(a=o.item(i));return"location"===t?n.location:"createElement"===t?en.createElement.bind(en):(en.addEventListener=c.addEventListener.bind(c),"head"===t?en[t]:(c[t]||a[t])&&-1===["querySelector","getElementsByTagName"].indexOf(t)?"nodeType"===t?en.nodeType:"function"===typeof c[t]?c[t].bind(c):"function"===typeof a[t]?a[t].bind(a):c[t]||a[t]:-1!==["querySelector","getElementsByTagName"].indexOf(t)?function(){return-1!==["head","html"].indexOf(arguments[0])?en[t].apply(en,arguments):-1!==["body"].indexOf(arguments[0])?a:c[t]?c[t].apply(c,arguments):(e=a)[t].apply(e,arguments);var e}:"getElementById"===t?c.getElementById?c.getElementById.bind(c):function(e){var t=c.getElementsByTagName("*");if(t)for(var n=0;n<t.length;n++)if(t.item(n).getAttribute("id")===e)return t.item(n);return null}:"function"===typeof en[t]?en[t].bind(en):en[t])}}):(en.getElementsByClassName=c.getElementsByClassName.bind(r),en.getElementsByTagName=function(e){return"head"===e?[en.head]:"body"===e?[c]:c.getElementsByTagName(e)},en.getElementsByTagNameNS=c.getElementsByTagNameNS.bind(c),en.querySelectorAll=c.querySelectorAll.bind(c),en.addEventListener=c.addEventListener.bind(c),en.body.appendChild=c.appendChild.bind(c),en.body.removeChild=c.removeChild.bind(c),en.querySelector=function(){return-1===["head","html"].indexOf(arguments[0])?-1!==["body"].indexOf(arguments[0])?c:c.querySelector.apply(c,arguments):"head"===arguments[0]?en.head:"html"===arguments[0]?mn.bind(document).apply(void 0,arguments):void 0},en.getElementById=function(e){var t=c.getElementsByTagName("*");if(t)for(var n=0;n<t.length;n++)if(t.item(n).getAttribute("id")===e)return t.item(n);return null},setTimeout((function(){en.getElementsByClassName=dn.bind(en),en.querySelectorAll=hn.bind(en),en.getElementsByTagName=fn.bind(en),en.getElementsByTagNameNS=pn.bind(en),en.addEventListener=gn.bind(en),en.body.appendChild=vn.bind(document.getElementById(window.rootId)),en.body.removeChild=jn.bind(document.getElementById(window.rootId)),en.querySelector=mn.bind(en),en.querySelector=mn.bind(en),en.getElementById=bn.bind(en)}),0),en)}(t,0,j);case"eval":return eval}var h=m.has(n)?s[n]:n in e?e[n]:s[n];return dr(s,h)},has:function(e,t){return t in Jr||t in e||t in s},getOwnPropertyDescriptor:function(e,t){if(e.hasOwnProperty(t)){var n=Object.getOwnPropertyDescriptor(e,t);return h.set(t,"target"),n}if(s.hasOwnProperty(t)){var r=Object.getOwnPropertyDescriptor(s,t);return h.set(t,"rawWindow"),r&&!r.configurable&&(r.configurable=!0),r}},ownKeys:function(e){return Reflect.ownKeys(s).concat(Reflect.ownKeys(e)).filter((function(e){return!(e in this)&&(this[e]=!0)}),Object.create(null))},defineProperty:function(e,t,n){switch(h.get(t)){case"rawWindow":return Reflect.defineProperty(s,t,n);default:return Reflect.defineProperty(e,t,n)}},deleteProperty:function(e,t){return!e.hasOwnProperty(t)||(delete e[t],i.delete(t),!0)}});this.proxy=j,Zr++,un(t,this)}return Object(qn.a)(e,[{key:"active",value:function(){this.sandboxRunning||Zr++,this.sandboxRunning=!0}},{key:"inactive",value:function(){var e=this;0===--Zr&&Kr.forEach((function(t){e.proxy.hasOwnProperty(t)&&delete window[t]})),this.sandboxRunning=!1}}]),e}();function Xr(e,t,n,r,a){var c;c=new Qr(e);var o=function(e,t,n,r,a){var c;return null===(c=Object(Ln.a)({},Rn.Proxy,[function(){return Gr(e,t,n.proxy,!1,r,a)}])[n.type])||void 0===c?void 0:c.map((function(e){return e()}))}(e,t,c,n,a),i=[],s=[];return{instance:c,mount:function(){return Object(p.a)(l.a.mark((function r(){var u,d;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:c.active(),u=s.slice(0,o.length),d=s.slice(o.length),u.length&&u.forEach((function(e){return e()})),i=Yr(e,t,c,n,a),d.length&&d.forEach((function(e){return e()})),s=[];case 7:case"end":return r.stop()}}),r)})))()},unmount:function(){return Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=[].concat(Object(f.a)(o),Object(f.a)(i)).map((function(e){return e()})),c.inactive();case 2:case"end":return e.stop()}}),e)})))()}}}function ea(e,t){if(!e){if(t)throw new Error(t);throw new Error("[freelog] element not existed!")}}function ta(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;return e.length?e.reduce((function(e,r){return e.then((function(){return r(t,n)}))}),Promise.resolve()):Promise.resolve()}function na(e,t){return ra.apply(this,arguments)}function ra(){return(ra=Object(p.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","function"===typeof t?t(n):!!t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var aa=document.head.attachShadow||document.head.createShadowRoot;function ca(e,t,n,r){var c=document.createElement("div");c.innerHTML=e;var o=c.firstChild;if(t)if(aa){var i=o.innerHTML;o.innerHTML="",(o.attachShadow?o.attachShadow({mode:"open"}):o.createShadowRoot()).innerHTML=i}else console.warn("[freelog]: As current browser not support shadow dom, your strictStyleIsolation configuration will be ignored!");if(o.setAttribute("style","width: 100%; height: 100%;,position: relative;z-index:1;"),n){o.getAttribute(a.FreelogCSSRewriteAttr)||o.setAttribute(a.FreelogCSSRewriteAttr,r);var s=o.querySelectorAll("style")||[];Object(An.forEach)(s,(function(e){a.process(o,e,r)}))}return o}function oa(e,t,n,r,a,c){return function(){if(n){if(r)throw new Error("[freelog]: strictStyleIsolation can not be used with legacy render!");if(a)throw new Error("[freelog]: experimentalStyleIsolation can not be used with legacy render!");var o=document.getElementById(rr(t));return ea(o,"[freelog] Wrapper element for ".concat(e," with instance ").concat(t," is not existed!")),o}var i=c();return ea(i,"[freelog] Wrapper element for ".concat(e," with instance ").concat(t," is not existed!")),r?i.shadowRoot:i}}var ia,sa=HTMLElement.prototype.appendChild,ua=HTMLElement.prototype.removeChild;function la(e,t,n){return function(r,a){var c=r.element,o=r.loading,i=r.container;if(n)return n({loading:o,appContent:c?t:""});var s=sr(i);"unmounted"!==a&&ea(s,function(){switch(a){case"loading":case"mounting":return"[freelog] Target container with ".concat(i," not existed while ").concat(e," ").concat(a,"!");case"mounted":return"[freelog] Target container with ".concat(i," not existed after ").concat(e," ").concat(a,"!");default:return"[freelog] Target container with ".concat(i," not existed while ").concat(e," rendering!")}}());if(s&&!s.contains(c)){for(;s.firstChild;)ua.call(s,s.firstChild);c&&sa.call(s,c)}}}function da(e,t,n,r){if(ar(e))return e;if(r){var a=n[r];if(ar(a))return a}var c=n[t];if(ar(c))return c;throw new Error("[freelog] You need to export lifecycle functions in ".concat(t," entry"))}function fa(e){return pa.apply(this,arguments)}function pa(){return(pa=Object(p.a)(l.a.mark((function e(t){var n,r,a,c,o,i,s,u,f,m,h,b,v,j,g,x,y,O,w,N,I,E,S,T,_,k,P,C,M,A,F,D,R,L,B,V,G,H,U,W,q,Y,z,$,K,J,Z,Q,X,ee,te,ne,re,ae=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ae.length>1&&void 0!==ae[1]?ae[1]:{},c=ae.length>2?ae[2]:void 0,o=t.entry,i=t.name,s="".concat(i,"_").concat(+new Date,"_").concat(Math.floor(1e3*Math.random())),"[freelog] App ".concat(s," Loading"),u=a.singular,f=void 0!==u&&u,m=a.sandbox,h=void 0===m||m,b=a.excludeAssetFilter,v=Object(ht.a)(a,["singular","sandbox","excludeAssetFilter"]),e.next=9,Mn(o,v);case 9:return j=e.sent,g=j.template,x=j.execScripts,y=j.assetPublicPath,e.next=15,na(f,t);case 15:if(!e.sent){e.next=18;break}return e.next=18,ia&&ia.promise;case 18:return O=nr(s,i)(g),w="object"===typeof h&&!!h.strictStyleIsolation,N=ir(h),I=ca(O,w,N,i),E="container"in t?t.container:void 0,S="render"in t?t.render:void 0,(T=la(i,O,S))({element:I,loading:!0,container:E},"loading"),_=oa(i,s,!!S,w,N,(function(){return I})),k=window,P=function(){return Promise.resolve()},C=function(){return Promise.resolve()},M="object"===typeof h&&!!h.loose,h&&(A=Xr(i,_,N,0,b),k=A.instance.proxy,P=A.mount,C=A.unmount),F=Object(An.mergeWith)({},Dn(k,y),c,(function(e,t){return Object(An.concat)(null!==e&&void 0!==e?e:[],null!==t&&void 0!==t?t:[])})),D=F.beforeUnmount,R=void 0===D?[]:D,L=F.afterUnmount,B=void 0===L?[]:L,V=F.afterMount,G=void 0===V?[]:V,H=F.beforeMount,U=void 0===H?[]:H,W=F.beforeLoad,q=void 0===W?[]:W,e.next=35,ta(Qn(q),t,k);case 35:return e.next=37,x(k,!M);case 37:return Y=e.sent,z=da(Y,i,k,null===(n=A)||void 0===n||null===(r=n.instance)||void 0===r?void 0:r.latestSetProp),$=z.bootstrap,K=z.mount,J=z.unmount,Z=z.update,Q=Hn(s),X=Q.onGlobalStateChange,ee=Q.setGlobalState,te=Q.offGlobalStateChange,ne=function(e){return I=e},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,n=I,r=oa(i,s,!!S,w,N,(function(){return n})),a={name:s,bootstrap:$,mount:[Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0;case 1:case"end":return e.stop()}}),e)}))),Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,na(f,t);case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}e.t0=ia;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return",ia.promise);case 7:return e.abrupt("return",void 0);case 8:case"end":return e.stop()}}),e)}))),Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:!(e!==E)&&n||(n=ca(O,w,N,i),ne(n)),T({element:n,loading:!0,container:e},"mounting");case 3:case"end":return t.stop()}}),t)}))),P,Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ta(Qn(U),t,k));case 1:case"end":return e.stop()}}),e)}))),function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",K(Object(d.a)(Object(d.a)({},t),{},{container:r(),setGlobalState:ee,onGlobalStateChange:X})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",T({element:n,loading:!1,container:e},"mounted"));case 1:case"end":return t.stop()}}),t)}))),Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ta(Qn(G),t,k));case 1:case"end":return e.stop()}}),e)}))),Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,na(f,t);case 2:if(!e.sent){e.next=4;break}ia=new or;case 4:case"end":return e.stop()}}),e)}))),Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0;case 1:case"end":return e.stop()}}),e)})))],unmount:[Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ta(Qn(R),t,k));case 1:case"end":return e.stop()}}),e)}))),function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(Object(d.a)(Object(d.a)({},t),{},{container:r()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C,Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ta(Qn(B),t,k));case 1:case"end":return e.stop()}}),e)}))),Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:T({element:null,loading:!1,container:e},"unmounted"),te(s),ne(n=null);case 4:case"end":return t.stop()}}),t)}))),Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,na(f,t);case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}e.t0=ia;case 5:if(!e.t0){e.next=7;break}ia.resolve();case 7:case"end":return e.stop()}}),e)})))]};return"function"===typeof Z&&(a.update=Z),a},e.abrupt("return",re);case 43:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ma={},ha=new Map;var ba=new Map,va=new Map,ja=new Map,ga=new Map,xa=new Map;function ya(e,t){ja.has(e)&&console.warn(ba.get(e).name+" reloaded"),ba.set(e,t),ja.set(e,t)}var Oa=!1;function wa(e,t,n){var r=xa.get("freelog-"+e.data.presentableId).proxy,a=[];e.subDeps.forEach((function(n){switch(n.resourceType){case"widget":var a=r.document.getElementById("freelog-"+n.id);if(!a)return void console.error("container is not exists: "+n.presentableName);window.freelogApp.mountWidget(n,a,{presentableId:window.freelogApp.nodeInfo.nodeThemeId,entityNid:e.entityNid,subDependId:n.id},"",t)}}));var c=a.length;if(0===c)n&&n();else{var o,i=Object(he.a)(a);try{for(i.s();!(o=i.n()).done;){o.value.finally((function(){0===--c&&n&&n()}))}}catch(s){i.e(s)}finally{i.f()}}}function Na(){return(Na=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null===(n=va.get(this.widgetName))||void 0===n?void 0:n.id,e.next=3,Ea.bind(this)(r);case 3:wa(e.sent,t);case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Ia(){return(Ia=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(t=va.get(this.name))||void 0===t?void 0:t.presentableId);case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Ea(e){return Sa.apply(this,arguments)}function Sa(){return(Sa=Object(p.a)(l.a.mark((function e(t){var n,r,a,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=xa.get(this.name))||(n={name:"freelog-"+t,presentableId:t}),e.next=4,Q.bind(n)(t);case 4:if(!(r=e.sent).data.errCode){e.next=17;break}return e.next=8,new Promise((function(e,r){D.bind(n)(t,e,r,{immediate:!0})}));case 8:return e.next=10,Q.bind(n)(t);case 10:if(!(r=e.sent).data.errCode){e.next=14;break}return e.next=14,new Promise((function(e,r){D.bind(n)(t,e,r,{immediate:!0})}));case 14:return e.next=16,Q.bind(n)(t);case 16:r=e.sent;case 17:return a=[r.headers["freelog-sub-dependencies"],r.headers["freelog-entity-nid"]],c=a[0],o=a[1],e.abrupt("return",{subDeps:c?JSON.parse(decodeURIComponent(c)):[],entityNid:o,data:r.data.data});case 19:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var Ta=null;function _a(){return ka.apply(this,arguments)}function ka(){return(ka=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ta){e.next=2;break}return e.abrupt("return",Ta);case 2:return e.next=4,B(V.getCurrent,"","");case 4:return t=e.sent,Ta=0===t.data.errCode?t.data.data:null,e.abrupt("return",Ta);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pa(){return Ta}function Ca(e){return Ma.apply(this,arguments)}function Ma(){return(Ma=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ta=t;case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Aa(e){var t="http://qi.freelog.com/v2/";window.location.href.indexOf("testfreelog")>-1&&(t="http://qi.testfreelog.com/v2/");var n=t+"auths/presentables/".concat(e.presentableId,"/fileStream?"),r="parentNid=".concat(e.parentNid,"&subResourceIdOrName=").concat(e.subResourceIdOrName);return e.parentNid?n+r+"&subResourceFile=":n+"subResourceFile="}var Fa=["width"],Da={width:"device-width",height:"device-height","initial-scale":1,"maximum-scale":1,"minimum-scale":1,"user-scalable":"no","viewport-fit":"auto"};var Ra=function(e){var t=Object(c.useState)(""),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(!1),i=Object(s.a)(o,2),u=i[0],d=i[1],f=Object(c.useState)(!1),b=Object(s.a)(f,2),j=b[0],y=b[1],O=Object(c.useState)({}),w=Object(s.a)(O,2),N=w[0],I=w[1];function E(){return(E=Object(p.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_a();case 2:return t=e.sent,e.next=5,B(V.getAccount,[t.userId],"");case 5:n=e.sent,I(n.data.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(p.a)(l.a.mark((function t(){var n,a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!u){t.next=2;break}return t.abrupt("return");case 2:return d(!0),t.next=5,B(G.pay,[e.contractId],{eventId:e.eventId,accountId:N.accountId,transactionAmount:e.transactionAmount,password:r});case 5:if(n=t.sent,console.log(n),0===n.data.errCode){t.next=11;break}return m.a.error({title:"\u652f\u4ed8\u5931\u8d25",content:n.data.msg,zIndex:9999}),d(!1),t.abrupt("return");case 11:a=m.a.success({title:"\u652f\u4ed8\u6210\u529f",content:n.data.msg,zIndex:9999}),c=setInterval(Object(p.a)(l.a.mark((function t(){var r,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B(H.getRecord,[n.data.data.transactionRecordId],"");case 2:r=t.sent,o=r.data.data.status,console.log(r),[2,3,4].includes(o)&&(e.paymentFinish(o),d(!1),a.destroy(),window.clearInterval(c));case 6:case"end":return t.stop()}}),t)}))),2e3);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){a(""),y(e.isModalVisible),e.isModalVisible&&function(){E.apply(this,arguments)}()}),[e.isModalVisible]),Object(h.jsx)(m.a,{title:"\u652f\u4ed8",zIndex:1201,centered:!0,footer:null,visible:j,className:"w-600 ",maskClosable:!1,onOk:function(){e.setIsModalVisible(!1)},onCancel:function(){!u&&e.setIsModalVisible(!1)},wrapClassName:"freelog-pay",getContainer:document.getElementById("runtime-pc"),children:Object(h.jsxs)("div",{className:"flex-column ",children:[Object(h.jsx)("div",{className:"amount text-center my-40 px-80",children:Object(h.jsxs)("span",{className:"ml-30",children:[e.transactionAmount,Object(h.jsx)("span",{className:"type ml-10",children:"\u7fbd\u5e01"})]})}),Object(h.jsxs)("div",{className:"flex-row px-80 over-h",children:[Object(h.jsxs)("div",{className:"flex-column shrink-0",children:[Object(h.jsx)("div",{className:"left-item",children:"\u6807\u7684\u7269"}),Object(h.jsx)("div",{className:"left-item",children:"\u6388\u6743\u5408\u7ea6"}),Object(h.jsx)("div",{className:"left-item",children:"\u6536\u6b3e\u65b9"}),Object(h.jsx)("div",{className:"left-item",children:"\u652f\u4ed8\u65b9\u5f0f"})]}),Object(h.jsxs)("div",{className:"flex-column flex-1",children:[Object(h.jsx)("div",{className:"right-item text-ellipsis",children:e.subjectName}),Object(h.jsx)("div",{className:"right-item text-ellipsis",children:e.contractName}),Object(h.jsx)("div",{className:"right-item text-ellipsis",children:e.receiver}),Object(h.jsxs)("div",{className:"right-item text-ellipsis",children:[Object(h.jsx)("span",{className:"",children:"\u7fbd\u5e01\u8d26\u6237"}),Object(h.jsxs)("span",{className:"balance",children:["\uff08\u4f59\u989d",N.balance,"\u679a\uff09"]})]})]})]}),Object(h.jsx)("div",{className:"forgot-p text-align-right px-80 mt-18 cur-pointer",children:"\u5fd8\u8bb0\u5bc6\u7801"}),Object(h.jsx)("div",{className:"px-80 pt-5",children:Object(h.jsx)(g.a.Password,{size:"large",onChange:function(e){a(e.target.value)},maxLength:6,value:r,placeholder:"\u8f93\u51656\u4f4d\u652f\u4ed8\u5bc6\u7801"})}),Object(h.jsx)("div",{className:"px-80 pt-20",children:Object(h.jsx)(v,{click:function(){return S.apply(this,arguments)},disabled:6!==r.length||u,className:"py-9",children:u?Object(h.jsxs)("span",{children:["\u652f\u4ed8\u4e2d...",Object(h.jsx)(x.a,{})]}):"\u786e\u8ba4\u652f\u4ed8"})})]})})},La=n(413),Ba=n(414),Va=(n(262),n(141)),Ga=function(e){var t=[];e.policy.bestPyramid.pyramid.forEach((function(e,n){e.forEach((function(e,r){if(e){var a={fill:"#FFFFFF",stroke:"#D4D4D4",rx:8,ry:8,zIndex:1};e.isAuth&&(a.fill="#E5F6EF",a.stroke="#8FD6B8"),t.push({id:e.status,x:100*r+80*r+10,y:60*n+60*n+10,width:100,height:60,label:e.status,zIndex:1e3,attrs:{body:a}})}}))}));var n=[];e.policy.translateInfo.fsmInfos.forEach((function(e){e.eventTranslateInfos.forEach((function(e){e.used=!1}))})),e.policy.nodesMap.forEach((function(t,r){t.from.forEach((function(t){var a="";e.policy.translateInfo.fsmInfos.forEach((function(e){e.stateInfo.origin===t&&e.eventTranslateInfos.forEach((function(e){e.origin.state===r&&(e.used=!0,a=e.content.substr(0,e.content.lastIndexOf("\uff0c")))}))})),n.push({source:t,target:r,labels:[{attrs:{label:{text:a}}}],attrs:{line:{stroke:"#979797"}}})})),t.to.forEach((function(t){var a="";e.policy.translateInfo.fsmInfos.forEach((function(e){e.stateInfo.origin===r&&e.eventTranslateInfos.forEach((function(e){e.origin.state===t&&(e.used=!0,a=e.content.substr(0,e.content.lastIndexOf("\uff0c")))}))})),n.push({source:r,target:t,labels:[{attrs:{label:{text:a}}}],attrs:{line:{stroke:"#979797"}}})}))}));var r={edges:[].concat(n),nodes:t};return Object(c.useEffect)((function(){new Va.a({container:document.getElementById(e.policy.policyId),width:800,height:600,panning:!1,interacting:{nodeMovable:!1,edgeMovable:!1}}).fromJSON(r)})),Object(h.jsx)("div",{className:"w-100x h-100x x-auto y-auto ",children:Object(h.jsx)("div",{id:e.policy.policyId,className:"  w-100x  x-auto y-auto"})})},Ha=function(e){return Object(h.jsx)("div",{className:"fs-14 lh-24 fw-regular fc-main py-10",children:e.policyText})},Ua=function(e){return Object(h.jsx)("pre",{className:"fs-14 lh-24 fw-regular fc-main",children:e.translateInfo.content})},Wa=n(406),qa=Wa.a.TabPane,Ya=n(182),za=function(e){var t=Object(c.useState)(-1),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(!1),i=Object(s.a)(o,2),u=i[0],l=i[1],f=Object(c.useState)(new Map),p=Object(s.a)(f,2),m=p[0],b=p[1],g=Object(c.useState)("bg-auth-non"),x=Object(s.a)(g,2),y=x[0],O=x[1],w=Object(c.useState)("\u672a\u6388\u6743"),N=Object(s.a)(w,2),I=N[0],E=N[1],S=Object(c.useState)({eventTranslateInfos:[{origin:{args:{amount:""}}}]}),T=Object(s.a)(S,2),_=T[0],k=T[1],P=Object(c.useState)(!1),C=Object(s.a)(P,2),M=C[0],A=C[1];function F(e){A(!0)}return Object(c.useEffect)((function(){var t,n=new Map;null===(t=e.contract.fsmDeclarations.envArgs)||void 0===t||t.forEach((function(e){n.set(e.name,e)})),b(n);var r="bg-auth-end",a="\u5df2\u7ec8\u6b62";1!==e.contract.status&&(a="\u672a\u6388\u6743",r="bg-auth-non",(2===e.contract.authStatus&&window.isTest||1===e.contract.authStatus)&&(a="\u5df2\u6388\u6743",r="bg-auth")),E(a),O(r),e.contract.policyInfo.translateInfo.fsmInfos.some((function(t){if(t.stateInfo.origin===e.contract.fsmCurrentState){var n=0;t.eventTranslateInfos.forEach((function(t){"TransactionEvent"===t.origin.name&&n++,e.contract.policyInfo.translateInfo.fsmInfos.some((function(n){if(n.stateInfo.origin===t.origin.state)return t.nextState=Object(d.a)(Object(d.a)({},n),e.contract.policyInfo.fsmDescriptionInfo[t.origin.state]),!0}))}));var r=Object(d.a)(Object(d.a)({tec:n,status:e.contract.fsmCurrentState},t),e.contract.policyInfo.fsmDescriptionInfo[e.contract.fsmCurrentState]);return k(r),!0}}))}),[e.contract]),Object(h.jsxs)("div",{className:"contract-card px-20 py-15 mt-15 w-100x",children:[r>-1&&Object(h.jsx)(Ra,{contractId:e.contract.contractId,subjectName:e.contract.subjectName,contractName:e.contract.contractName,paymentFinish:function(t){2===t&&A(!1),e.paymentFinish()},receiver:m.get(_.eventTranslateInfos[r].origin.args.account).ownerName,eventId:_.eventTranslateInfos[r].origin.id,transactionAmount:_.eventTranslateInfos[r].origin.args.amount,isModalVisible:M,setIsModalVisible:A}),Object(h.jsx)("div",{className:"flex-row w-100x",children:Object(h.jsx)("div",{className:"contract-name  text-ellipsis",children:e.contract.contractName})}),Object(h.jsxs)(Wa.a,{defaultActiveKey:"1",className:"select-none",children:[Object(h.jsxs)(qa,{tab:"\u5408\u7ea6\u6d41\u8f6c\u8bb0\u5f55",children:[Object(h.jsxs)("div",{className:"status-card p-15 mt-15",children:[Object(h.jsxs)("div",{className:"flex-row",children:[Object(h.jsx)("div",{className:"auth-status text-center select-none "+y,children:I}),Object(h.jsx)("div",{className:"auth-time",children:Ya(e.contract.updateDate).format("YYYY-MM-DD HH:mm")})]}),Object(h.jsxs)("div",{className:"flex-row py-10 space-between align-center",children:[Object(h.jsx)("div",{children:"\u5f53\u524d\u65e0\u6388\u6743\uff0c\u8bf7\u9009\u62e9\u6267\u884c\u4e8b\u4ef6"}),_.tec>1&&Object(h.jsx)(v,{className:"fs-12",disabled:-1===r,click:F,children:"\u652f\u4ed8"})]}),Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"flex-row",children:Object(h.jsx)(j.a.Group,{onChange:function(e){a(e.target.value)},value:r,children:Object(h.jsx)("div",{className:"flex-column",children:_.eventTranslateInfos&&_.eventTranslateInfos.map((function(e,t){return Object(h.jsx)("div",{className:"event-card p-10 mt-10 flex-column "+(t!==r?"":"event-selected"),children:Object(h.jsxs)(j.a,{className:"",value:t,disabled:"TransactionEvent"!==e.origin.name,children:[Object(h.jsxs)("div",{className:"flex-row event flex-wrap align-center",children:[Object(h.jsxs)("div",{className:"mr-10 flex-row align-center",children:[Object(h.jsx)("span",{children:e.content}),Object(h.jsx)("span",{className:"auth ml-10",children:e.nextState&&e.nextState.isAuth?"\u83b7\u5f97\u6388\u6743":""})]}),1===_.tec&&"TransactionEvent"===e.origin.name&&Object(h.jsx)(v,{disabled:t!==r,className:"fs-12",click:F,children:"\u652f\u4ed8"})]}),Object(h.jsxs)("div",{className:"flex-column event-next pt-5 ml-3",children:[Object(h.jsx)("div",{className:"event-next",children:e.nextState&&e.nextState.isAuth?"\u83b7\u5f97\u6388\u6743\u540e":"\u6267\u884c\u6210\u529f\u540e:"}),e.nextState&&e.nextState.eventTranslateInfos.map((function(e,t){return Object(h.jsxs)("div",{className:"flex-row align-center",children:[Object(h.jsx)("div",{className:"event-dot mr-5"}),Object(h.jsx)("span",{children:e.content})]},t)}))]})]})},t)}))})})})}),Object(h.jsx)("div",{className:"fluent-record text-align-center cur-pointer select-none mt-20",children:u?Object(h.jsxs)("div",{onClick:function(e){l(!1)},children:["\u6536\u8d77\u6d41\u8f6c\u8bb0\u5f55 ",Object(h.jsx)(Ba.a,{})]}):Object(h.jsxs)("div",{onClick:function(e){l(!0)},children:["\u5c55\u5f00\u6d41\u8f6c\u8bb0\u5f55 ",Object(h.jsx)(La.a,{})]})})]}),Object(h.jsxs)("div",{className:"contract-code pt-12",children:["\u5408\u540c\u7f16\u53f7 ",e.contract.contractId," | \u7b7e\u7ea6\u65f6\u95f4"," ",Ya(e.contract.updateDate).format("YYYY-MM-DD HH:mm")]})]},"1"),Object(h.jsx)(qa,{tab:"\u7b56\u7565\u5185\u5bb9",children:Object(h.jsx)(Ua,{translateInfo:e.policy.translateInfo})},"2"),Object(h.jsx)(qa,{tab:"\u72b6\u6001\u673a\u89c6\u56fe",children:Object(h.jsx)(Ga,{policy:e.policy})},"3"),Object(h.jsx)(qa,{tab:"\u7b56\u7565\u4ee3\u7801",children:Object(h.jsx)(Ha,{policyText:e.policy.policyText})},"4")]})]})},$a=(n(264),n(412)),Ka=n(411),Ja=Wa.a.TabPane,Za=function(e){var t=Object(c.useState)(!1),n=Object(s.a)(t,2),r=n[0],a=n[1];function o(){return(o=Object(p.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.getAuth(),a(!1);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(h.jsxs)("div",{className:"flex-column policy-card",children:[Object(h.jsxs)("div",{className:"flex-row space-between px-20 py-15",children:[Object(h.jsx)("div",{className:"flex-1 policy-name  text-ellipsis",children:e.policy.policyName}),e.selectType?Object(h.jsx)($a.a,{title:"\u786e\u5b9a\u4f7f\u7528\u6b64\u7b56\u7565\u4e0e\u8d44\u6e90\u7b7e\u7ea6\uff1f",onConfirm:function(e){return o.apply(this,arguments)},onCancel:function(t){e.policySelect(),a(!1)},zIndex:1202,visible:r,getPopupContainer:function(){return document.getElementById("runtime-pc")},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:Object(h.jsx)(v,{className:"fs-13",click:function(){e.policySelect(e.policy.policyId,!0,!0),a(!0)},children:"\u7b7e\u7ea6"})}):Object(h.jsx)(Ka.a,{onChange:function(t){console.log(t),e.policySelect(e.policy.policyId,t.target.checked)}})]}),Object(h.jsx)("div",{className:"flex-column px-20",children:Object(h.jsxs)(Wa.a,{defaultActiveKey:"1",onChange:function(e){},className:"select-none",children:[Object(h.jsx)(Ja,{tab:"\u7b56\u7565\u5185\u5bb9",children:Object(h.jsx)(Ua,{translateInfo:e.policy.translateInfo})},"1"),Object(h.jsx)(Ja,{tab:"\u72b6\u6001\u673a\u89c6\u56fe",children:Object(h.jsx)(Ga,{policy:e.policy})},"2"),Object(h.jsx)(Ja,{tab:"\u7b56\u7565\u4ee3\u7801",children:Object(h.jsx)(Ha,{policyText:e.policy.policyText})},"3")]})})]})},Qa=function(e){var t=Object(c.useState)(""),n=Object(s.a)(t,2),r=n[0],a=n[1];return Object(c.useEffect)((function(){if(e.isModalVisible){var t="";e.policies.forEach((function(e){e.checked&&(t+=t?t+"\uff0c"+e.policyName:e.policyName)})),a(t)}}),[e.isModalVisible]),Object(h.jsx)(m.a,{title:"\u7b7e\u7ea6\u786e\u8ba4",zIndex:1201,centered:!0,footer:null,visible:e.isModalVisible,className:"w-560",onOk:function(){e.setIsModalVisible(!1)},onCancel:function(){e.setIsModalVisible(!1)},wrapClassName:"freelog-confirm",getContainer:document.getElementById("runtime-pc"),children:Object(h.jsxs)("div",{className:"w-100x h-100x flex-column justify-center  pt-16",children:[Object(h.jsxs)("div",{className:"flex-row fc-grey mb-20 fs-14 justify-center",children:[Object(h.jsx)("span",{className:"pr-10 shrink-0",children:"\u5c55\u54c1\u540d\u79f0"}),e.currentPresentable?Object(h.jsx)("span",{children:e.currentPresentable.presentableName}):""]}),Object(h.jsxs)("div",{className:"flex-row align-center lh-25 fs-16 fc-grey mb-70 justify-center",children:[Object(h.jsx)("span",{className:"shrink-0",children:"\u786e\u5b9a\u4f7f\u7528"}),Object(h.jsx)("span",{className:"fc-main fw-bold px-10 text-ellipsis",children:r}),Object(h.jsx)("span",{className:"shrink-0",children:"\u83b7\u53d6\u6388\u6743\uff1f"})]}),Object(h.jsxs)("div",{className:"flex-row justify-center",children:[Object(h.jsx)(v,{type:"cancel",click:function(t){e.setIsModalVisible(!1)},className:"mr-10",children:"\u53d6\u6d88"}),Object(h.jsx)(v,{click:function(t){e.getAuth()},type:"main",children:"\u786e\u5b9a"})]})]})})},Xa=n(407),ec=(n(265),{labelCol:{span:8},wrapperCol:{span:16}}),tc=function(e){var t=Xa.a.useForm(),n=Object(s.a)(t,1)[0],r=Object(c.useState)(!0),a=Object(s.a)(r,2),o=a[0],i=a[1];var u=function(){var t=Object(p.a)(l.a.mark((function t(){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(n.getFieldsValue()),(r=n.getFieldsValue()).isRemember=r.isRemember?1:0,t.next=5,B(V.login,"",r);case 5:0===(a=t.sent).data.errCode&&e.loginFinished(0,a.data.data);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(h.jsx)(m.a,{title:"\u767b\u5f55",zIndex:1200,centered:!0,footer:null,visible:!0,closable:!1,className:"",onOk:function(){e.setIsLoginVisible(!1)},onCancel:function(){e.setIsLoginVisible(!1)},maskClosable:!1,wrapClassName:"freelog-login",getContainer:document.getElementById("runtime-pc"),children:Object(h.jsxs)("div",{className:"w-100x h-100x flex-column align-center",children:[Object(h.jsx)("div",{className:"login-title py-55",children:"\u767b\u5f55freelog"}),Object(h.jsxs)(Xa.a,Object(d.a)(Object(d.a)({},ec),{},{onValuesChange:function(e,t){console.log(e,t),i(!t.loginName||!t.password)},name:"basic",form:n,className:"",initialValues:{remember:!0},onFinish:u,onFinishFailed:function(e){console.log("Failed:",e)},children:[Object(h.jsx)("div",{className:"login-label",children:"\u7528\u6237\u540d/\u624b\u673a\u53f7/\u90ae\u7bb1"}),Object(h.jsx)(Xa.a.Item,{name:"loginName",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d!"}],children:Object(h.jsx)(g.a,{})}),Object(h.jsxs)("div",{className:"flex-row space-between login-label mt-10",children:[Object(h.jsx)("div",{className:"",children:"\u5bc6\u7801"}),Object(h.jsx)("div",{className:"login-forgot select-none cur-pointer",children:"\u5fd8\u8bb0\u5bc6\u7801\uff1f"})]}),Object(h.jsx)(Xa.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801!"}],children:Object(h.jsx)(g.a.Password,{})}),Object(h.jsx)(Xa.a.Item,{className:"pt-30",children:Object(h.jsx)(v,{className:"py-9",click:u,disabled:o,children:"\u767b\u5f55"})})]})),Object(h.jsxs)("div",{className:"flex-row  mt-30",children:[Object(h.jsx)("span",{className:"login-new",children:"freelog\u65b0\u7528\u6237\uff1f"}),Object(h.jsx)("span",{className:"regist-now",children:"\u7acb\u5373\u6ce8\u518c"})]})]})})};var nc=[];function rc(){return(rc=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"function"===typeof t?nc.push(t):console.error("onLogin error: ",t," is not a function!");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ac={getContractInfo:{url:"contracts/".concat(N),method:"GET",dataModel:{contractIds:"string",isLoadPolicyInfo:"int",projection:"string"}},getContracts:{url:"contracts/list",method:"GET",dataModel:{contractIds:"string",subjectIds:"string",subjectType:"int",licenseeIdentityType:"int",licensorId:"string",licenseeId:"string",isLoadPolicyInfo:"int",projection:"string",isTranslate:"int"}},contract:{url:"contracts",method:"POST",dataModel:{subjectId:"string",subjectType:"int",policyId:"string",licenseeId:"string",licenseeIdentityType:"int"}},contracts:{url:"contracts/batchSign",method:"POST",dataModel:{subjects:"array",subjectId:"string",subjectType:"int",policyId:"string",licenseeId:"string",licenseeIdentityType:"int",isWaitInitial:"int"}}},cc=new Map;function oc(e,t){var n=0;return t.some((function(t){return t.some((function(t,r){return n=r,t&&t.status===e}))})),n}function ic(e){cc=new Map;var t=null,n={},r=function(e){var t=[];t.push([Object(d.a)({status:"initial"},e.initial)]),function n(r){var a=t[r]||[];t[r-1].forEach((function(t){var n=cc.get(t.status)||{row:0,column:0,relations:[],route:["initial"],to:[],from:[]};t.transitions.forEach((function(c,o){var i=cc.get(c.toState)||{row:0,column:0,relations:[],route:[],to:[],from:[]};if(n.route.includes(c.toState))return n.to.push(c.toState),void(n.relations.includes(c.toState)||n.relations.push(c.toState));i.from.push(t.status),i.relations.includes(t.status)||i.relations.push(t.status),i.row=r,i.route=[].concat(Object(f.a)(n.route),Object(f.a)(i.route),[c.toState]),cc.set(c.toState,i),a.some((function(e){return e.status===c.toState}))||a.push(Object(d.a)({status:c.toState},e[c.toState]))}))})),a.length&&(t[r]=a,n(r+1))}(1);for(var n=0,r=function(e){var r=t[e];n<r.length&&(n=r.length),r.forEach((function(n,r){for(var a=e-1;a>-1;a--)t[a]=t[a].filter((function(e,t){return e.status!==n.status}))}))},a=t.length-1;a>0;a--)r(a);return n<t[0].length&&(n=t[0].length),{policyPyramid:t,maxWidth:n}}(e),a=r.policyPyramid,c=r.maxWidth,o=[];a.forEach((function(e){for(var t=Object(f.a)(e),n=e.length;n<c;n++)t[n]=null;o.push(function(e){for(var t=[],n=0;n<e.length;n++)t.some((function(t){return t.equals(e[n])}))||t.push(e[n]);return t}(function(e){var t=[],n=[];return function e(r){var a,c;for(a=0;a<r.length;a++)c=r.splice(a,1)[0],n.push(c),0==r.length&&t.push(n.slice()),e(r),r.splice(a,0,c),n.pop();return t}(e)}(t)))}));!function e(r,a,c){r.forEach((function(r,i){var s=Object(f.a)(c);if(s.push(r),a+1!==o.length)e(o[a+1],a+1,Object(f.a)(s));else{var u=function(e){for(var t=0,n=function(n){e[n].forEach((function(r,a){if(r)for(var c=cc.get(r.status),o=function(n){e[n].forEach((function(r,o){if(o>a&&r){var i=cc.get(r.status);null===i||void 0===i||i.relations.forEach((function(r){var a=oc(r,e);null===c||void 0===c||c.relations.forEach((function(r){var c=cc.get(r);if(!((null===c||void 0===c?void 0:c.row)>=n)){var o=oc(r,e);a<o&&t++}}))}))}}))},i=n;i>-1;i--)o(i)}))},r=e.length-1;r>-1;r--)n(r);return t}(s);if(u||0,!t||u<t.crosses)t={crosses:u,pyramid:s},n={};else if(u===t.crosses){var l=n[u]||[];l.push(s),n[u]=l}}}))}(o[0],0,[]);var i=function(e){var t=[];return e.initial.transitions?(function n(r,a){r.transitions.forEach((function(r,c){var o=a.some((function(e){return e[0]===r.toState})),i=r,s=Object(f.a)(a);s.push([r.toState,i,e[r.toState]]),o?t.push(s):e[r.toState].transitions.length?n(e[r.toState],s):t.push(s)}))}(e.initial,[["initial","",e.initial]]),t):[[["initial","",e.initial]]]}(e);return t.maxWidth=c,{policyMaps:i,bestPyramid:t,betterPyramids:n,nodesMap:cc}}Array.prototype.equals=function(e){if(!e)return!1;if(this.length!=e.length)return!1;for(var t=0,n=this.length;t<n;t++)if(this[t]instanceof Array&&e[t]instanceof Array){if(!this[t].equals(e[t]))return!1}else if(this[t]!=e[t])return!1;return!0},Object.defineProperty(Array.prototype,"equals",{enumerable:!1});var sc=function(e){var t=Object(c.useState)(!1),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(!1),i=Object(s.a)(o,2),u=i[0],b=i[1],j=Object(c.useState)([]),g=Object(s.a)(j,2),x=g[0],y=g[1],O=e.events||[],w=Object(c.useState)(O[0]),N=Object(s.a)(w,2),I=N[0],E=N[1],S=Object(c.useState)([]),T=Object(s.a)(S,2),_=T[0],k=T[1],P=Object(c.useState)([]),C=Object(s.a)(P,2),M=C[0],A=C[1];function F(){D()}function D(e){return R.apply(this,arguments)}function R(){return(R=Object(p.a)(l.a.mark((function t(n){var r,a,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(A([]),r=Pa(),t.t0=r,!t.t0){t.next=7;break}return t.next=6,B(ac.getContracts,"",{subjectIds:I.presentableId,subjectType:2,licenseeIdentityType:3,licenseeId:r.userId,isLoadPolicyInfo:1,isTranslate:1});case 6:t.t0=t.sent;case 7:if(a=t.t0,n){t.next=12;break}return a.data.data.some((function(t){if(window.isTest&&2===t.authStatus||1===t.authStatus)return e.contractFinished(I.eventId,0),!0}))||e.updateEvents(Object(d.a)(Object(d.a)({},I),{},{contracts:a.data.data})),t.abrupt("return");case 12:return t.next=14,B(U.getPresentableDetail,[n||I.presentableId],{isLoadPolicyInfo:1,isTranslate:1});case 14:(c=t.sent).data.data.policies=c.data.data.policies.filter((function(e){return 1===e.status})),c.data.data.policies.forEach((function(e){var t=ic(e.fsmDescriptionInfo),n=t.policyMaps,r=t.bestPyramid,a=t.betterPyramids,c=t.nodesMap;e.policyMaps=n,e.bestPyramid=r,e.betterPyramids=a,e.nodesMap=c})),k(c.data.data.policies),a&&(o=a.data.data.filter((function(e){if(0===e.status)return c.data.data.policies.some((function(t){if(e.policyId===t.policyId)return e.policyInfo=t,t.contracted=!0,!0})),!0})),y(o));case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(c.useEffect)((function(){!O.some((function(e){if(e.presentableId===I.presentableId)return E(e),!0}))&&E(O[0])}),[e.events]),Object(c.useEffect)((function(){I&&D(I.presentableId)}),[I]);function L(e,t,n){A(e?t?n?[e]:[].concat(Object(f.a)(M),[e]):Object(f.a)(M).filter((function(t){return t!==e})):[])}var V=function(){var t=Object(p.a)(l.a.mark((function t(){var n,r,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],_.forEach((function(e){M.includes(e.policyId)&&n.push({subjectId:I.presentableId,policyId:e.policyId})})),r=Pa(),t.next=5,B(ac.contracts,[],{subjects:n,subjectType:2,licenseeId:r.userId+"",licenseeIdentityType:3,isWaitInitial:1});case 5:(c=t.sent).data.isAuth,a(!1),c.data.data.some((function(t){if(window.isTest&&2===t.authStatus||1===t.authStatus){var n=m.a.success({title:"\u63d0\u793a",content:"\u83b7\u5f97\u6388\u6743",zIndex:9999});return setTimeout((function(){n.destroy(),e.contractFinished(I.eventId,0)}),2e3),!0}}))||(o=m.a.success({title:"\u63d0\u793a",content:"\u7b7e\u7ea6\u6210\u529f",zIndex:9999}),setTimeout((function(){o.destroy(),e.updateEvents(Object(d.a)(Object(d.a)({},I),{},{contracts:c.data.data}))}),2e3));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"runtime-pc",id:"runtime-pc",children:[r&&Object(h.jsx)(Qa,{setIsModalVisible:a,isModalVisible:r,getAuth:V,policies:_,currentPresentable:I}),u&&Object(h.jsx)(tc,{loginFinished:function(t,n){Ca(n),nc.forEach((function(e){e&&e()})),b(!1),e.loginFinished()},setIsLoginVisible:b}),Object(h.jsx)(m.a,{title:"\u5c55\u54c1\u6388\u6743",zIndex:1200,centered:!0,footer:null,visible:!0,width:860,onCancel:function(){e.contractFinished("",2)},className:"h-600",keyboard:!1,maskClosable:!1,wrapClassName:"freelog-contract",getContainer:document.getElementById("runtime-pc"),children:Object(h.jsxs)("div",{className:"w-100x h-574 flex-column",children:[Object(h.jsx)("div",{className:"w-100x flex-1 flex-row over-h",children:Object(h.jsxs)("div",{className:"w-100x h-100x  flex-row",children:[Object(h.jsx)("div",{className:"flex-column w-344 h-100x  y-auto",children:O.length?O.map((function(e,t){return 0===e.event?null:Object(h.jsxs)("div",{onClick:function(){E(e)},className:(I===e?"presentable-selected ":"")+" px-20 py-15 w-100x b-box x-auto  cur-pointer presentable-item select-none flex-column",children:[Object(h.jsx)("div",{className:"presentable-name w-100x text-ellipsis flex-1 flex-row align-center",title:e.presentableName,children:Object(h.jsx)("span",{children:e.presentableName})}),e.contracts.length?Object(h.jsx)("div",{className:"flex-row pt-10",children:e.contracts.map((function(e,t){return Object(h.jsxs)("div",{className:"contract-tag flex-row align-center mr-5",children:[Object(h.jsx)("div",{className:"contract-name",children:e.contractName}),Object(h.jsx)("div",{className:"contract-dot ml-6 "+(128===e.authStatus||window.isTest||1!==e.authStatus?"bg-auth-none":"bg-auth")})]},t)}))}):null]},t)})):null}),Object(h.jsxs)("div",{className:"w-516 bg-content h-100x   y-auto px-20 pb-20",children:[x.length&&_.length-x.length?Object(h.jsx)("div",{className:"policy-tip flex-row align-center mt-15 px-10",children:Object(h.jsx)("div",{className:"tip",children:"\u6700\u4e0b\u65b9\u6709\u53ef\u7b7e\u7ea6\u7684\u7b56\u7565"})}):null,x.map((function(e,t){return Object(h.jsx)(za,{policy:e.policyInfo,contract:e,paymentFinish:F},t)})),_.map((function(e,t){return e.contracted?null:Object(h.jsx)(Za,{policy:e,seq:t,getAuth:V,policySelect:L,selectType:!!x.length},t)}))]})]})}),x.length?"":Object(h.jsx)("div",{className:"h-74 w-100x text-center",children:Object(h.jsx)(v,{disabled:0===M.length&&Pa(),click:function(){Pa()?a(!0):b(!0)},className:"w-300 h-38 fs-14 text-center",children:Pa()?"\u7acb\u5373\u7b7e\u7ea6":"\u8bf7\u767b\u5f55"})})]})})]})},uc=(n(100),n(58)),lc=n.n(uc),dc=(n(85),n(43)),fc=n.n(dc),pc=(n(380),n(381),n(86),n(41)),mc=n.n(pc),hc=(n(383),function(e){var t=Object(c.useState)({loginName:"",password:""}),n=Object(s.a)(t,2),r=(n[0],n[1],Object(c.useState)(!1)),a=Object(s.a)(r,2),o=a[0],i=a[1],u=Object(c.useState)(""),d=Object(s.a)(u,2),f=d[0],m=d[1],b=Object(c.useState)(""),v=Object(s.a)(b,2),j=v[0],g=v[1],x=function(){var t=Object(p.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),(n={loginName:f,password:j}).isRemember=n.isRemember?1:0,t.next=5,B(V.login,"",n);case 5:0===(r=t.sent).data.errCode?(i(!1),e.loginFinished(0,r.data.data)):lc.a.fail(r.data.msg,2);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(h.jsx)(fc.a,{popup:!0,visible:e.visible,maskClosable:!1,animationType:"slide",className:"w-100x h-100x",wrapClassName:"user-login",children:Object(h.jsxs)("div",{className:"w-100x h-100x flex-column align-center",children:[Object(h.jsxs)("div",{className:"flex-1 w-100x flex-column align-center",children:[Object(h.jsx)("i",{className:"iconfont  mt-50 mb-20 logo",children:"\ue614"}),Object(h.jsx)("div",{className:"login-title mb-46 flex-row justify-center",children:"\u514d\u8d39\u4e13\u4e1a\u7684\u8d44\u6e90\u53d1\u884c\u548c\u8fd0\u8425\u5e73\u53f0"}),Object(h.jsxs)("div",{className:"login-container flex-column justify-center",children:[Object(h.jsx)("input",{type:"text",value:f,placeholder:"\u7528\u6237\u540d/\u624b\u673a\u53f7/\u90ae\u7bb1",onChange:function(e){m(e.target.value)}}),Object(h.jsx)("input",{type:"password",value:j,placeholder:"\u5bc6\u7801",onChange:function(e){g(e.target.value)}}),Object(h.jsx)(mc.a,{loading:o,type:"primary",className:"mb-15",onClick:x,disabled:!f||!j,children:o?"\u767b\u9646\u4e2d":"\u767b \u5f55"}),Object(h.jsx)(mc.a,{className:"registry",onClick:function(){return e.setModalType(2)},children:"\u6ce8 \u518c"})]})]}),Object(h.jsx)("div",{className:"text-center login-forgot mb-50",children:Object(h.jsx)(mc.a,{type:"ghost",inline:!0,size:"small",onClick:function(){return e.setModalType(3)},children:"\u5fd8\u8bb0\u5bc6\u7801"})})]})})}),bc=(n(384),function(e){var t=Object(c.useState)({loginName:"",password:""}),n=Object(s.a)(t,2),r=(n[0],n[1],Object(c.useState)(!1)),a=Object(s.a)(r,2),o=a[0],i=a[1],u=Object(c.useState)(""),d=Object(s.a)(u,2),f=d[0],m=d[1],b=Object(c.useState)(""),v=Object(s.a)(b,2),j=v[0],g=v[1],x=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),(t={loginName:f,password:j}).isRemember=t.isRemember?1:0,e.next=5,B(V.login,"",t);case 5:0===(n=e.sent).data.errCode?i(!1):lc.a.fail(n.data.msg,2);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)(fc.a,{popup:!0,visible:e.visible,maskClosable:!1,animationType:"slide",className:"w-100x h-100x",wrapClassName:"user-forgot",children:Object(h.jsxs)("div",{className:"w-100x h-100x flex-column align-center",children:[Object(h.jsxs)("div",{className:"flex-1 w-100x flex-column align-center",children:[Object(h.jsx)("i",{className:"iconfont  mt-50 mb-20 logo",children:"\ue614"}),Object(h.jsx)("div",{className:"login-title mb-46 flex-row justify-center",children:"\u5fd8\u8bb0\u5bc6\u7801"}),Object(h.jsxs)("div",{className:"login-container flex-column justify-center",children:[Object(h.jsx)("input",{type:"text",value:f,placeholder:"\u7528\u6237\u540d/\u624b\u673a\u53f7/\u90ae\u7bb1",onChange:function(e){m(e.target.value)}}),Object(h.jsx)("input",{type:"password",value:j,placeholder:"\u5bc6\u7801",onChange:function(e){g(e.target.value)}}),Object(h.jsx)(mc.a,{loading:o,type:"primary",className:"mb-15",onClick:x,disabled:!f||!j,children:o?"\u767b\u9646\u4e2d":"\u767b \u5f55"}),Object(h.jsx)(mc.a,{className:"registry",children:"\u6ce8 \u518c"})]})]}),Object(h.jsx)("div",{className:"text-center login-forgot mb-50",children:"\u5fd8\u8bb0\u5bc6\u7801"})]})})}),vc=(n(385),function(e){var t=Object(c.useState)({username:"",loginName:"",phone:"",email:"",password:"",authCode:""}),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(!1),i=Object(s.a)(o,2),u=i[0],f=i[1],m=Object(c.useState)(!1),b=Object(s.a)(m,2),v=b[0],j=b[1],g=Object(c.useState)(!1),x=Object(s.a)(g,2),y=x[0],O=x[1],w=Object(c.useState)(60),N=Object(s.a)(w,2),I=N[0],E=N[1],S=Object(c.useState)(""),T=Object(s.a)(S,2),_=T[0],k=T[1],P=Object(c.useState)(!1),C=Object(s.a)(P,2),M=C[0],A=C[1],F=Object(c.useState)(""),D=Object(s.a)(F,2),R=D[0],L=D[1],G=Object(c.useState)(""),H=Object(s.a)(G,2),U=H[0],W=H[1],q=Object(c.useState)(""),Y=Object(s.a)(q,2),z=Y[0],$=Y[1],K=Object(c.useState)(""),J=Object(s.a)(K,2),Z=J[0],Q=J[1],X=Object(c.useState)(1),ee=Object(s.a)(X,2),te=ee[0],ne=ee[1],re=function(e,t){var n;t=t||"";var c=Object(Ln.a)({},e,"");"username"!==e||function(e){return!!/^(?!-)[A-Za-z0-9-]{1,30}(?<!-)$/.test(e)}(t)||(c[e]=t?"\u4e0d\u8d85\u8fc730\u4e2a\u5b57\u7b26\uff1b\u53ea\u80fd\u4f7f\u7528\u5c0f\u5199\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u77ed\u6a2a\u7ebf\uff08-\uff09\uff1b\u5fc5\u987b\u4ee5\u5c0f\u5199\u5b57\u6bcd\u6216\u6570\u5b57\u5f00\u5934\u548c\u7ed3\u5c3e\u3002":"\u8bf7\u8f93\u5165\u7528\u6237\u540d"),"phone"!==e||function(e){return!!/^1(3|4|5|6|7|8|9)\d{9}$/.test(e)}(t)||(c[e]=t?"\u624b\u673a\u53f7\u683c\u5f0f\u4e0d\u6b63\u786e":"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"),"email"!==e||function(e){return!!/^([a-zA-Z0-9]+[_|\-|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\-|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/gi.test(e)}(t)||(c[e]=t?"\u65e0\u6548\u90ae\u7bb1\u5730\u5740":"\u8bf7\u8f93\u5165\u90ae\u7bb1\u5730\u5740"),"password"!==e||function(e){return!!/^(?=.*[0-9])(?=.*[a-zA-Z])(.{6,24})$/.test(e)}(t)||(c[e]=t?"\u5bc6\u7801\u957f\u5ea6\u5fc5\u987b\u4e3a6-24\u4e2a\u5b57\u7b26\uff0c\u5fc5\u987b\u5305\u542b\u6570\u5b57\u548c\u5b57\u6bcd":"\u8bf7\u8f93\u5165\u5bc6\u7801"),"authCode"===e&&(c[e]=t?"":"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801");var o=Object(d.a)(Object(d.a)({},r),c);a(o);var i=(n={username:R,password:Z,authCode:_},Object(Ln.a)(n,e,t),Object(Ln.a)(n,"loginName",1===te?U:z),n),s=Object.keys(o).some((function(e){if(o[e])return!0})),u=Object.keys(i).some((function(e){if(!i[e])return!0}));O(!(s||u))};Object(c.useEffect)((function(){if(M){var e=window.setInterval((function(){if(I<=0)return window.clearInterval(e),A(!1),void E(60);E((function(t){return t<=0?(window.clearInterval(e),A(!1),60):t-1}))}),1e3);return function(){window.clearInterval(e)}}}),[M]);var ae=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(V.getAuthCode,"",{loginName:1===te?U:z,authCodeType:"register"});case 2:0!==(t=e.sent).errCode&&((n={})[1===te?"phone":"email"]=t.data.msg,a(Object(d.a)(Object(d.a)({},r),n)));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),t={loginName:1===te?U:z,username:R,password:Z,authCode:_},e.next=4,B(V.postRegister,"",t);case 4:0===(n=e.sent).data.errCode?(f(!0),j(!1)):(lc.a.fail(n.data.msg,2),n.data.msg.startWith("\u9a8c\u8bc1\u7801")&&(c={authCode:n.data.msg},a(Object(d.a)(Object(d.a)({},r),c))),setTimeout((function(){return j(!1)}),2e3));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(fc.a,{popup:!0,visible:e.visible,maskClosable:!1,animationType:"slide",className:"w-100x h-100x",wrapClassName:"user-register",children:[Object(h.jsxs)("div",{className:"w-100x h-100x flex-column align-center",children:[Object(h.jsxs)("div",{className:"flex-1 w-100x flex-column align-center",children:[Object(h.jsx)("div",{className:"register-title mb-38 mt-45 flex-row px-30 self-start",children:"\u6ce8\u518c"}),Object(h.jsxs)("div",{className:"register-type mb-30  flex-row px-30 self-start align-center",children:[Object(h.jsx)("input",{type:"radio",id:"phone-type",name:"register-type",className:"mr-4",checked:1===te,value:"1",onChange:function(e){ne(parseInt(e.target.value))}})," ",Object(h.jsx)("label",{htmlFor:"phone-type",className:1===te?"selected mr-20":" mr-20",children:"\u624b\u673a\u53f7\u6ce8\u518c"}),Object(h.jsx)("input",{type:"radio",id:"mail-type",name:"register-type",className:"mr-4",checked:2===te,onChange:function(e){ne(parseInt(e.target.value))},value:"2"})," ",Object(h.jsx)("label",{htmlFor:"mail-type",className:2===te?"selected":"",children:"\u90ae\u7bb1\u6ce8\u518c"})]}),Object(h.jsxs)("div",{className:"register-container flex-column justify-center px-30",children:[Object(h.jsx)("input",{type:"text",className:"w-100x mb-5",value:R,placeholder:"\u7528\u6237\u540d",onChange:function(e){re("username",e.target.value),L(e.target.value)}}),""!==r.username?Object(h.jsx)("div",{className:"error-tip self-start",children:r.username}):null,1===te?Object(h.jsx)("input",{type:"text",value:U,className:"w-100x  mb-5 mt-15",placeholder:"\u624b\u673a\u53f7",onChange:function(e){re("phone",e.target.value),W(e.target.value)}}):Object(h.jsx)("input",{type:"text",value:z,className:"w-100x  mb-5 mt-15",placeholder:"\u90ae\u7bb1\u5730\u5740",onChange:function(e){re("email",e.target.value),$(e.target.value)}}),""!==r[1===te?"phone":"email"]?Object(h.jsx)("div",{className:"error-tip self-start",children:r[1===te?"phone":"email"]}):null,Object(h.jsxs)("div",{className:"flex-row mb-5 mt-15",children:[Object(h.jsx)("input",{type:"text",value:_,className:"mr-10",placeholder:"\u9a8c\u8bc1\u7801",onChange:function(e){re("authCode",e.target.value),k(e.target.value)}}),Object(h.jsx)(mc.a,{loading:v,type:"primary",className:"flex-1 shrink-0 fs-16",disabled:M||(1===te?!U||r.phone:!z||r.email),onClick:function(){ae(),A(!0),E(60)},children:M?Object(h.jsxs)("span",{children:["\u83b7\u53d6\u9a8c\u8bc1\u7801 ",I,"s"]}):"\u83b7\u53d6\u9a8c\u8bc1\u7801"})]}),Object(h.jsx)("input",{type:"password",value:Z,className:"w-100x  mt-15 mb-5",placeholder:"\u5bc6\u7801",onChange:function(e){re("password",e.target.value),Q(e.target.value)}}),""!==r.password?Object(h.jsx)("div",{className:"error-tip  self-start",children:r.password}):null,Object(h.jsx)(mc.a,{loading:v,type:"primary",className:"mt-15",onClick:ce,disabled:!y,children:v?"\u6ce8\u518c\u4e2d":"\u6ce8 \u518c"})]})]}),Object(h.jsxs)("div",{className:"flex-row justify-center align-center register-bottom mb-50",children:["\u5df2\u6709\u8d26\u53f7\uff1f",Object(h.jsx)(mc.a,{type:"ghost",inline:!0,size:"small",onClick:function(){return e.setModalType(1)},children:"\u9a6c\u4e0a\u767b\u9646"})]})]}),Object(h.jsx)(fc.a,{visible:v,transparent:!0,maskClosable:!1,title:"",className:"w-325 h-220 register-tip",children:Object(h.jsx)("div",{className:"paying bg-white",children:Object(h.jsx)(mc.a,{loading:!0,className:"loading",children:"\u6ce8\u518c\u4e2d"})})}),Object(h.jsx)(fc.a,{popup:!0,visible:u,maskClosable:!1,animationType:"slide",className:"w-100x h-100x",wrapClassName:"register-success",children:Object(h.jsx)("div",{className:"w-100x h-100 flex-column justify-center",children:Object(h.jsxs)("div",{className:"flex-column align-center ",children:[Object(h.jsx)("i",{className:"iconfont ",children:"\ue62d"}),Object(h.jsx)("span",{className:" success mb-60 mt-4",children:"\u6ce8\u518c\u6210\u529f"}),Object(h.jsxs)("div",{className:"flex-row justify-center align-center",children:[Object(h.jsx)("span",{className:"count-back",children:"3s\u540e\u8fd4\u56de\u767b\u9646\u9875\uff1b"}),Object(h.jsx)(mc.a,{type:"ghost",inline:!0,size:"small",onClick:function(){f(!1),e.setModalType(1)},children:"\u7acb\u5373\u767b\u9646"})]})]})})})]})}),jc=(n(205),n(140)),gc=n.n(jc),xc=(n(207),n(65)),yc=n.n(xc),Oc=(n(394),fc.a.prompt,function(e){var t=Object(c.useState)(0),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(!1),i=Object(s.a)(o,2),u=i[0],d=i[1],m=Object(c.useState)(!1),b=Object(s.a)(m,2),v=b[0],j=b[1],g=Object(c.useState)(0),y=Object(s.a)(g,2),O=y[0],w=y[1],N=Object(c.useState)(!1),I=Object(s.a)(N,2),E=(I[0],I[1],Object(c.useState)(["","","","","",""])),S=Object(s.a)(E,2),T=S[0],_=S[1],k=Object(c.useState)({}),P=Object(s.a)(k,2),C=P[0],M=P[1],A=Object(c.useRef)(null),F=Object(c.useRef)(null),D=Object(c.useRef)(null),R=Object(c.useRef)(null),L=Object(c.useRef)(null),U=Object(c.useRef)(null),W=[U,A,F,D,R,L];Object(c.useEffect)((function(){v&&(U.current.focus(),_(["","","","","",""]))}),[v]);function q(){return(q=Object(p.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_a();case 2:return t=e.sent,e.next=5,B(V.getAccount,[t.userId],"");case 5:n=e.sent,M(n.data.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){e.isModalVisible&&function(){q.apply(this,arguments)}()}),[e.isModalVisible]);var Y=function(){var t=Object(p.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!u){t.next=2;break}return t.abrupt("return");case 2:return w(1),d(!0),t.next=6,B(G.pay,[e.contractId],{eventId:e.eventId,accountId:C.accountId,transactionAmount:e.transactionAmount,password:n});case 6:if(0===(r=t.sent).data.errCode){t.next=11;break}return lc.a.fail(r.data.msg,2),setTimeout((function(){d(!1),L.current.focus()}),2e3),t.abrupt("return");case 11:console.log(r),w(2),a=setInterval(Object(p.a)(l.a.mark((function t(){var n,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B(H.getRecord,[r.data.data.transactionRecordId],"");case 2:n=t.sent,c=n.data.data.status,console.log(n),[2,3,4].includes(c)&&(j(!1),d(!1),window.clearInterval(a),e.paymentFinish(c));case 6:case"end":return t.stop()}}),t)}))),2e3);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsx)(fc.a,{popup:!0,visible:e.isModalVisible,maskClosable:!1,onClose:function(){e.setIsModalVisible(!1)},animationType:"slide-up",wrapClassName:"freelog-pay",children:Object(h.jsxs)("div",{className:"flex-column px-30",children:[Object(h.jsxs)("div",{className:" mb-10 flex-row space-between",children:[Object(h.jsxs)("span",{className:"amount mt-30",children:[e.transactionAmount,Object(h.jsx)("span",{className:"type ml-10",children:"\u7fbd\u5e01"})]}),Object(h.jsx)("span",{className:"fs-28 mt-10",onClick:function(){e.setIsModalVisible(!1)},children:Object(h.jsx)("i",{className:"iconfont",children:"\ue637"})})]}),Object(h.jsxs)("div",{className:"flex-column over-h",children:[Object(h.jsx)("div",{className:"title-item",children:"\u6807\u7684\u7269"}),Object(h.jsx)("div",{className:"content-item text-ellipsis",children:e.subjectName}),Object(h.jsx)("div",{className:"title-item",children:"\u6388\u6743\u5408\u7ea6"}),Object(h.jsx)("div",{className:"content-item text-ellipsis",children:e.contractName}),Object(h.jsx)("div",{className:"title-item",children:"\u6536\u6b3e\u65b9"}),Object(h.jsx)("div",{className:"content-item text-ellipsis",children:e.receiver}),Object(h.jsx)("div",{className:"title-item",children:"\u652f\u4ed8\u65b9\u5f0f"}),Object(h.jsxs)("div",{className:"content-item",children:[Object(h.jsx)("span",{className:"",children:"\u7fbd\u5e01\u8d26\u6237"}),Object(h.jsxs)("span",{className:"balance",children:["\uff08\u4f59\u989d",C.balance,"\u679a\uff09"]})]})]}),Object(h.jsx)(fc.a,{visible:u&&O>0,transparent:!0,maskClosable:!1,title:"",className:"w-325 h-220 pay-tip",children:1===O?Object(h.jsx)("div",{className:"paying bg-white",children:Object(h.jsx)(mc.a,{loading:!0,className:"loading",children:"\u652f\u4ed8\u4e2d"})}):Object(h.jsxs)("div",{className:"paying w-100x h-100x flex-column justify-center",children:[Object(h.jsxs)("div",{className:"pb-15 success flex-row align-center justify-center",children:[Object(h.jsx)("i",{className:"iconfont mr-10",children:"\ue62d"}),Object(h.jsx)("span",{className:"mr-10",children:"\u652f\u4ed8\u6210\u529f"})]}),Object(h.jsx)(mc.a,{loading:!0,className:"loading  pt-15 proccessing",children:"\u7cfb\u7edf\u5904\u7406\u4e2d\u8bf7\u7a0d\u540e..."})]})}),Object(h.jsxs)(fc.a,{visible:v,transparent:!0,maskClosable:!1,title:"\u8f93\u5165\u652f\u4ed8\u5bc6\u7801",className:"w-325  input-password",children:[Object(h.jsx)("div",{className:"p-absolute  rt-0 pr-24 pt-20",onClick:function(){return j(!1)},children:Object(h.jsx)("i",{className:"iconfont fs-11",children:"\ue637"})}),Object(h.jsx)("div",{className:"flex-row space-between",children:[0,0,0,0,0,0].map((function(e,t){return Object(h.jsx)("input",{type:"password",maxLength:1,minLength:1,ref:W[t],value:T[t],onChange:function(e){},onClick:function(e){W[r].current.focus()},onKeyDown:function(e){var n=Object(f.a)(T);if([46,8,229].includes(e.keyCode)&&t>0&&isNaN(parseInt(n[t])))return W[t-1]&&(W[t-1].current.focus(),a(t-1)),n[t-1]="",void _(n);if(isNaN(parseInt(e.key)))n[t]="";else if(n[t]=e.key,W[t+1]&&(W[t+1].current.focus(),a(t+1)),5===t){var r=n.join("");Y(r)}_(n)}},t)}))}),Object(h.jsx)("div",{className:"flex-row space-around password-forget pb-30",children:"\u5fd8\u8bb0\u5bc6\u7801"})]}),Object(h.jsx)("div",{className:" pt-35 mb-40",children:Object(h.jsx)(mc.a,{type:"primary",size:"large",className:"",onClick:function(){j(!0)},children:u?Object(h.jsxs)("span",{children:["\u652f\u4ed8\u4e2d...",Object(h.jsx)(x.a,{})]}):"\u7acb\u5373\u652f\u4ed8"})})]})})}),wc=(n(395),function(e){var t=[];e.policy.bestPyramid.pyramid.forEach((function(e,n){e.forEach((function(e,r){if(e){var a={fill:"#FFFFFF",stroke:"#D4D4D4",rx:8,ry:8,zIndex:1};e.isAuth&&(a.fill="#E5F6EF",a.stroke="#8FD6B8"),t.push({id:e.status,x:100*r+80*r+10,y:60*n+60*n+10,width:100,height:60,label:e.status,zIndex:1e3,attrs:{body:a}})}}))}));var n=[];e.policy.translateInfo.fsmInfos.forEach((function(e){e.eventTranslateInfos.forEach((function(e){e.used=!1}))})),e.policy.nodesMap.forEach((function(t,r){t.from.forEach((function(t){var a="";e.policy.translateInfo.fsmInfos.forEach((function(e){e.stateInfo.origin===t&&e.eventTranslateInfos.forEach((function(e){e.origin.state===r&&(e.used=!0,a=e.content.substr(0,e.content.lastIndexOf("\uff0c")))}))})),n.push({source:t,target:r,labels:[{attrs:{label:{text:a}}}],attrs:{line:{stroke:"#979797"}}})})),t.to.forEach((function(t){var a="";e.policy.translateInfo.fsmInfos.forEach((function(e){e.stateInfo.origin===r&&e.eventTranslateInfos.forEach((function(e){e.origin.state===t&&(e.used=!0,a=e.content.substr(0,e.content.lastIndexOf("\uff0c")))}))})),n.push({source:r,target:t,labels:[{attrs:{label:{text:a}}}],attrs:{line:{stroke:"#979797"}}})}))}));var r={edges:[].concat(n),nodes:t};return Object(c.useEffect)((function(){new Va.a({container:document.getElementById(e.policy.policyId),width:800,height:600,panning:!1,interacting:{nodeMovable:!1,edgeMovable:!1}}).fromJSON(r)})),Object(h.jsx)("div",{className:"w-100x h-100x x-auto y-auto ",children:Object(h.jsx)("div",{id:e.policy.policyId,className:"  w-100x  x-auto y-auto"})})}),Nc=function(e){return Object(h.jsx)("div",{className:"fs-14 lh-24 fw-regular fc-main py-10",children:e.policyText})},Ic=function(e){return Object(h.jsx)("pre",{className:"fs-14 lh-24 fw-regular fc-main",children:e.translateInfo.content})},Ec=n(182),Sc=[{title:Object(h.jsx)(yc.a,{children:"\u5408\u7ea6\u6d41\u8f6c\u8bb0\u5f55"})},{title:Object(h.jsx)(yc.a,{children:"\u7b56\u7565\u5185\u5bb9"})},{title:Object(h.jsx)(yc.a,{children:"\u72b6\u6001\u673a\u89c6\u56fe"})},{title:Object(h.jsx)(yc.a,{children:"\u7b56\u7565\u4ee3\u7801"})}],Tc=function(e){var t=Object(c.useState)(-1),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(!1),i=Object(s.a)(o,2),u=i[0],l=i[1],f=Object(c.useState)(new Map),p=Object(s.a)(f,2),m=p[0],b=p[1],v=Object(c.useState)("bg-auth-non"),j=Object(s.a)(v,2),g=j[0],x=j[1],y=Object(c.useState)("\u672a\u6388\u6743"),O=Object(s.a)(y,2),w=O[0],N=O[1],I=Object(c.useState)({eventTranslateInfos:[{origin:{args:{amount:""}}}]}),E=Object(s.a)(I,2),S=E[0],T=E[1],_=Object(c.useState)(!1),k=Object(s.a)(_,2),P=k[0],C=k[1];function M(e){a(parseInt(e.target.value))}function A(e){"undefined"!=typeof e&&a(e),C(!0)}return Object(c.useEffect)((function(){var t,n=new Map;null===(t=e.contract.fsmDeclarations.envArgs)||void 0===t||t.forEach((function(e){n.set(e.name,e)})),b(n);var r="bg-auth-end",a="\u5df2\u7ec8\u6b62";1!==e.contract.status&&(a="\u672a\u6388\u6743",r="bg-auth-non",(2===e.contract.authStatus&&window.isTest||1===e.contract.authStatus)&&(a="\u5df2\u6388\u6743",r="bg-auth")),N(a),x(r),e.contract.policyInfo.translateInfo.fsmInfos.some((function(t){if(t.stateInfo.origin===e.contract.fsmCurrentState){var n=0;t.eventTranslateInfos.forEach((function(t){"TransactionEvent"===t.origin.name&&n++,e.contract.policyInfo.translateInfo.fsmInfos.some((function(n){if(n.stateInfo.origin===t.origin.state)return t.nextState=Object(d.a)(Object(d.a)({},n),e.contract.policyInfo.fsmDescriptionInfo[t.origin.state]),!0}))}));var r=Object(d.a)(Object(d.a)({tec:n,status:e.contract.fsmCurrentState},t),e.contract.policyInfo.fsmDescriptionInfo[e.contract.fsmCurrentState]);return T(r),!0}}))}),[e.contract]),Object(h.jsxs)("div",{className:"flex-column brs-10 b-1 mx-10 mt-15 pb-12 contract-card",children:[r>-1&&Object(h.jsx)(Oc,{contractId:e.contract.contractId,subjectName:e.contract.subjectName,contractName:e.contract.contractName,paymentFinish:function(t){2===t&&C(!1),e.paymentFinish()},receiver:m.get(S.eventTranslateInfos[r].origin.args.account).ownerName,eventId:S.eventTranslateInfos[r].origin.id,transactionAmount:S.eventTranslateInfos[r].origin.args.amount,isModalVisible:P,setIsModalVisible:C}),Object(h.jsx)("div",{className:"flex-row  p-15",children:Object(h.jsx)("div",{className:"flex-1 text-ellipsis fc-main fs-16 fw-bold lh-33",children:e.contract.contractName})}),Object(h.jsxs)(gc.a,{tabs:Sc,initialPage:0,onChange:function(e,t){console.log("onChange",t,e)},onTabClick:function(e,t){console.log("onTabClick",t,e)},children:[Object(h.jsxs)("div",{className:"px-15",children:[Object(h.jsxs)("div",{className:"status-card p-15 mt-15",children:[Object(h.jsxs)("div",{className:"flex-row",children:[Object(h.jsx)("div",{className:"auth-status text-center select-none "+g,children:w}),Object(h.jsx)("div",{className:"auth-time",children:Ec(e.contract.updateDate).format("YYYY-MM-DD HH:mm")})]}),Object(h.jsxs)("div",{className:"flex-row py-10 space-between align-center",children:[Object(h.jsx)("div",{className:"contract-tip fs-12",children:"\u5f53\u524d\u65e0\u6388\u6743\uff0c\u8bf7\u9009\u62e9\u6267\u884c\u4e8b\u4ef6"}),S.tec>1&&Object(h.jsx)(mc.a,{type:"primary",size:"small",className:"fs-12",disabled:-1===r,onClick:function(){A()},children:"\u652f\u4ed8"})]}),Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"flex-column",children:S.eventTranslateInfos&&S.eventTranslateInfos.map((function(t,n){return Object(h.jsxs)("div",{className:"event-card p-10 mt-10 flex-row "+(n!==r?"":"event-selected"),children:[Object(h.jsx)("input",{className:1===S.tec?"mt-8":"mt-4",type:"radio",checked:n===r,onChange:M,id:t.origin.id,name:e.contract.contractId,value:n,disabled:"TransactionEvent"!==t.origin.name}),Object(h.jsxs)("label",{htmlFor:t.origin.id,children:[Object(h.jsxs)("div",{className:"flex-row event flex-wrap align-center  justify-end",children:[Object(h.jsxs)("div",{className:"mx-10 flex-row align-center pe-none flex-wrap flex-1",children:[Object(h.jsx)("span",{className:"mr-10 ",children:t.content}),Object(h.jsx)("span",{className:"auth shrink-0",children:t.nextState&&t.nextState.isAuth?"\u83b7\u5f97\u6388\u6743":""})]}),1===S.tec&&"TransactionEvent"===t.origin.name&&Object(h.jsx)(mc.a,{type:"primary",size:"small",className:"fs-12  shrink-0 ",onClick:function(){A(n)},children:"\u652f\u4ed8"})]}),Object(h.jsxs)("div",{className:"flex-column event-next pt-5 ml-12 pe-none",children:[Object(h.jsx)("div",{className:"event-next",children:t.nextState&&t.nextState.isAuth?"\u83b7\u5f97\u6388\u6743\u540e":"\u6267\u884c\u6210\u529f\u540e:"}),t.nextState&&t.nextState.eventTranslateInfos.map((function(e,t){return Object(h.jsxs)("div",{className:"flex-row align-center",children:[Object(h.jsx)("div",{className:"event-dot mr-5"}),Object(h.jsx)("span",{children:e.content})]},t)}))]})]})]},n)}))})}),Object(h.jsx)("div",{className:"fluent-record text-align-center cur-pointer select-none mt-20",children:u?Object(h.jsxs)("div",{onClick:function(e){l(!1)},children:["\u6536\u8d77\u6d41\u8f6c\u8bb0\u5f55 ",Object(h.jsx)(Ba.a,{})]}):Object(h.jsxs)("div",{onClick:function(e){l(!0)},children:["\u5c55\u5f00\u6d41\u8f6c\u8bb0\u5f55 ",Object(h.jsx)(La.a,{})]})})]}),Object(h.jsxs)("div",{className:"contract-code pt-12",children:[Object(h.jsxs)("div",{children:["\u5408\u540c\u7f16\u53f7\uff1a ",e.contract.contractId]}),Object(h.jsxs)("div",{children:["\u7b7e\u7ea6\u65f6\u95f4\uff1a",Ec(e.contract.updateDate).format("YYYY-MM-DD HH:mm")]})]})]}),Object(h.jsx)("div",{className:"px-15",children:Object(h.jsx)(Ic,{translateInfo:e.policy.translateInfo})}),Object(h.jsx)("div",{className:"px-15",children:Object(h.jsx)(wc,{policy:e.policy})}),Object(h.jsx)("div",{className:"px-15",children:Object(h.jsx)(Nc,{policyText:e.policy.policyText})})]})]})},_c=fc.a.alert,kc=(fc.a.prompt,[{title:Object(h.jsx)(yc.a,{children:"\u7b56\u7565\u5185\u5bb9"})},{title:Object(h.jsx)(yc.a,{children:"\u72b6\u6001\u673a\u89c6\u56fe"})},{title:Object(h.jsx)(yc.a,{children:"\u7b56\u7565\u4ee3\u7801"})}]),Pc=function(e){var t=Object(c.useState)(!1),n=Object(s.a)(t,2);n[0],n[1];function r(){return(r=Object(p.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.getAuth(n);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(h.jsxs)("div",{className:"flex-column brs-10 b-1 mx-10 mt-15",children:[Object(h.jsxs)("div",{className:"flex-row space-between px-15 py-15",children:[Object(h.jsx)("div",{className:"flex-1 text-ellipsis fc-main fs-16 fw-bold",children:e.policy.policyName}),e.selectType?Object(h.jsx)(mc.a,{type:"primary",size:"small",onClick:function(){Pa()?(e.policySelect(e.policy.policyId,!0,!0),setTimeout((function(){_c("\u7b7e\u7ea6","\u786e\u5b9a\u4f7f\u7528\u7b56\u7565 "+e.policy.policyName+" \u4e0e\u8d44\u6e90\u7b7e\u7ea6\uff1f",[{text:"\u53d6\u6d88",onPress:function(){e.policySelect()}},{text:"\u786e\u5b9a",onPress:function(){return function(e){return r.apply(this,arguments)}(e.policy.policyId)}}])}),0)):e.setModalType(1)},children:Pa()?"\u7b7e\u7ea6":"\u8bf7\u767b\u5f55"}):Object(h.jsx)(Ka.a,{onChange:function(t){console.log(t),e.policySelect(e.policy.policyId,t.target.checked)}})]}),Object(h.jsx)("div",{className:"flex-column",children:Object(h.jsxs)(gc.a,{tabs:kc,initialPage:0,onChange:function(e,t){console.log("onChange",t,e)},onTabClick:function(e,t){console.log("onTabClick",t,e)},children:[Object(h.jsx)("div",{className:"px-15",children:Object(h.jsx)(Ic,{translateInfo:e.policy.translateInfo})}),Object(h.jsx)("div",{children:Object(h.jsx)(wc,{policy:e.policy})}),Object(h.jsx)("div",{className:"px-15",children:Object(h.jsx)(Nc,{policyText:e.policy.policyText})})]})})]})},Cc=new Map;function Mc(e,t){var n=0;return t.some((function(t){return t.some((function(t,r){return n=r,t&&t.status===e}))})),n}function Ac(e){Cc=new Map;var t=null,n={},r=function(e){var t=[];t.push([Object(d.a)({status:"initial"},e.initial)]),function n(r){var a=t[r]||[];t[r-1].forEach((function(t){var n=Cc.get(t.status)||{row:0,column:0,relations:[],route:["initial"],to:[],from:[]};t.transitions.forEach((function(c,o){var i=Cc.get(c.toState)||{row:0,column:0,relations:[],route:[],to:[],from:[]};if(n.route.includes(c.toState))return n.to.push(c.toState),void(n.relations.includes(c.toState)||n.relations.push(c.toState));i.from.push(t.status),i.relations.includes(t.status)||i.relations.push(t.status),i.row=r,i.route=[].concat(Object(f.a)(n.route),Object(f.a)(i.route),[c.toState]),Cc.set(c.toState,i),a.some((function(e){return e.status===c.toState}))||a.push(Object(d.a)({status:c.toState},e[c.toState]))}))})),a.length&&(t[r]=a,n(r+1))}(1);for(var n=0,r=function(e){var r=t[e];n<r.length&&(n=r.length),r.forEach((function(n,r){for(var a=e-1;a>-1;a--)t[a]=t[a].filter((function(e,t){return e.status!==n.status}))}))},a=t.length-1;a>0;a--)r(a);return n<t[0].length&&(n=t[0].length),{policyPyramid:t,maxWidth:n}}(e),a=r.policyPyramid,c=r.maxWidth,o=[];a.forEach((function(e){for(var t=Object(f.a)(e),n=e.length;n<c;n++)t[n]=null;o.push(function(e){for(var t=[],n=0;n<e.length;n++)t.some((function(t){return t.equals(e[n])}))||t.push(e[n]);return t}(function(e){var t=[],n=[];return function e(r){var a,c;for(a=0;a<r.length;a++)c=r.splice(a,1)[0],n.push(c),0==r.length&&t.push(n.slice()),e(r),r.splice(a,0,c),n.pop();return t}(e)}(t)))}));!function e(r,a,c){r.forEach((function(r,i){var s=Object(f.a)(c);if(s.push(r),a+1!==o.length)e(o[a+1],a+1,Object(f.a)(s));else{var u=function(e){for(var t=0,n=function(n){e[n].forEach((function(r,a){if(r)for(var c=Cc.get(r.status),o=function(n){e[n].forEach((function(r,o){if(o>a&&r){var i=Cc.get(r.status);null===i||void 0===i||i.relations.forEach((function(r){var a=Mc(r,e);null===c||void 0===c||c.relations.forEach((function(r){var c=Cc.get(r);if(!((null===c||void 0===c?void 0:c.row)>=n)){var o=Mc(r,e);a<o&&t++}}))}))}}))},i=n;i>-1;i--)o(i)}))},r=e.length-1;r>-1;r--)n(r);return t}(s);if(u||0,!t||u<t.crosses)t={crosses:u,pyramid:s},n={};else if(u===t.crosses){var l=n[u]||[];l.push(s),n[u]=l}}}))}(o[0],0,[]);var i=function(e){var t=[];return e.initial.transitions?(function n(r,a){r.transitions.forEach((function(r,c){var o=a.some((function(e){return e[0]===r.toState})),i=r,s=Object(f.a)(a);s.push([r.toState,i,e[r.toState]]),o?t.push(s):e[r.toState].transitions.length?n(e[r.toState],s):t.push(s)}))}(e.initial,[["initial","",e.initial]]),t):[[["initial","",e.initial]]]}(e);return t.maxWidth=c,{policyMaps:i,bestPyramid:t,betterPyramids:n,nodesMap:Cc}}Array.prototype.equals=function(e){if(!e)return!1;if(this.length!=e.length)return!1;for(var t=0,n=this.length;t<n;t++)if(this[t]instanceof Array&&e[t]instanceof Array){if(!this[t].equals(e[t]))return!1}else if(this[t]!=e[t])return!1;return!0},Object.defineProperty(Array.prototype,"equals",{enumerable:!1});var Fc=fc.a.alert,Dc=function(e){var t=Object(c.useState)(!1),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(0),i=Object(s.a)(o,2),u=i[0],m=i[1],b=Object(c.useState)([]),v=Object(s.a)(b,2),j=v[0],g=v[1],x=e.events||[],y=Object(c.useState)(x[0]),O=Object(s.a)(y,2),w=O[0],N=O[1],I=Object(c.useState)([]),E=Object(s.a)(I,2),S=E[0],T=E[1],_=Object(c.useState)([]),k=Object(s.a)(_,2),P=k[0],C=k[1];function M(){F()}function A(t,n){Ca(n),nc.forEach((function(e){e&&e()})),m(0),e.loginFinished()}function F(e){return D.apply(this,arguments)}function D(){return(D=Object(p.a)(l.a.mark((function t(n){var r,a,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(C([]),r=Pa(),t.t0=r,!t.t0){t.next=7;break}return t.next=6,B(ac.getContracts,"",{subjectIds:w.presentableId,subjectType:2,licenseeIdentityType:3,licenseeId:r.userId,isLoadPolicyInfo:1,isTranslate:1});case 6:t.t0=t.sent;case 7:if(a=t.t0,n){t.next=12;break}return a.data.data.some((function(t){if(window.isTest&&2===t.authStatus||1===t.authStatus)return e.contractFinished(w.eventId,0),!0}))||e.updateEvents(Object(d.a)(Object(d.a)({},w),{},{contracts:a.data.data})),t.abrupt("return");case 12:return t.next=14,B(U.getPresentableDetail,[n||w.presentableId],{isLoadPolicyInfo:1,isTranslate:1});case 14:(c=t.sent).data.data.policies=c.data.data.policies.filter((function(e){return 1===e.status})),c.data.data.policies.forEach((function(e){var t=Ac(e.fsmDescriptionInfo),n=t.policyMaps,r=t.bestPyramid,a=t.betterPyramids,c=t.nodesMap;e.policyMaps=n,e.bestPyramid=r,e.betterPyramids=a,e.nodesMap=c})),T(c.data.data.policies),a&&(o=a.data.data.filter((function(e){if(0===e.status)return c.data.data.policies.some((function(t){if(e.policyId===t.policyId)return e.policyInfo=t,t.contracted=!0,!0})),!0})),g(o));case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(c.useEffect)((function(){!x.some((function(e){if(e.presentableId===w.presentableId)return N(e),!0}))&&N(x[0])}),[e.events]),Object(c.useEffect)((function(){w&&F(w.presentableId)}),[w]);var R=function(){e.contractFinished("",2)};function L(e,t,n){C(e?t?n?[e]:[].concat(Object(f.a)(P),[e]):Object(f.a)(P).filter((function(t){return t!==e})):[])}var V=function(){var t=Object(p.a)(l.a.mark((function t(n){var r,a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],S.forEach((function(e){[].concat(Object(f.a)(P),[n]).includes(e.policyId)&&r.push({subjectId:w.presentableId,policyId:e.policyId})})),a=Pa(),t.next=5,B(ac.contracts,[],{subjects:r,subjectType:2,licenseeId:a.userId+"",licenseeIdentityType:3,isWaitInitial:1});case 5:(c=t.sent).data.isAuth,c.data.data.some((function(t){if(window.isTest&&2===t.authStatus||1===t.authStatus)return lc.a.success("\u83b7\u5f97\u6388\u6743",2),setTimeout((function(){e.contractFinished(w.eventId,0)}),2e3),!0}))||(lc.a.success("\u7b7e\u7ea6\u6210\u529f",2),setTimeout((function(){e.updateEvents(Object(d.a)(Object(d.a)({},w),{},{contracts:c.data.data}))}),2e3));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{id:"runtime-mobile",className:"w-100x h-100x over-h",children:[1===u?Object(h.jsx)(hc,{loginFinished:A,visible:1===u,setModalType:m}):2===u?Object(h.jsx)(vc,{visible:2===u,setModalType:m}):3===u?Object(h.jsx)(bc,{visible:3===u,setModalType:m}):null,Object(h.jsxs)(fc.a,{popup:!0,visible:r,maskClosable:!1,animationType:"slide",wrapClassName:"presentable-list",children:[Object(h.jsxs)("div",{className:"flex-row space-between px-15 py-20 list-title",children:[Object(h.jsx)("div",{className:"list-title-name",children:"\u5c55\u54c1\u5217\u8868"}),Object(h.jsx)("div",{className:"list-exit",onClick:function(){Fc("\u63d0\u793a","\u5f53\u524d\u8fd8\u6709\u5c55\u54c1\u672a\u83b7\u5f97\u6388\u6743\uff0c\u786e\u5b9a\u9000\u51fa\uff1f",[{text:"\u53d6\u6d88",onPress:function(){}},{text:"\u786e\u5b9a",onPress:function(){return R()}}])},children:"\u9000\u51fa"})]}),x.length?x.map((function(e,t){return 0===e.event?null:Object(h.jsxs)("div",{onClick:function(){a(!1),N(e)},className:(w===e?"presentable-selected ":"")+" px-15 py-15 presentable-item  flex-row space-between algin-center",children:[Object(h.jsxs)("div",{className:"flex-1 flex-column over-h",children:[Object(h.jsx)("div",{className:"presentable-name text-ellipsis flex-1 flex-row align-center",title:e.presentableName,children:Object(h.jsx)("span",{className:"text-ellipsis",children:e.presentableName})}),e.contracts.length?Object(h.jsx)("div",{className:"flex-row pt-10",children:e.contracts.map((function(e,t){return Object(h.jsxs)("div",{className:"contract-tag flex-row align-center mr-5",children:[Object(h.jsx)("div",{className:"contract-name",children:e.contractName}),Object(h.jsx)("div",{className:"contract-dot ml-6 "+(128===e.authStatus||window.isTest||1!==e.authStatus?"bg-auth-none":"bg-auth")})]},t)}))}):null]}),Object(h.jsx)("div",{className:"shrink-0 text-center pl-10 fs-24",children:">"})]},t)})):null]}),Object(h.jsxs)("div",{className:"flex-column w-100x h-100x over-h",children:[Object(h.jsxs)("div",{className:"flex-column justify-center bb-1",children:[Object(h.jsx)("div",{className:"text-center mt-20 fs-16 fc-main fw-bold",children:"\u7b7e\u7ea6"}),Object(h.jsx)("div",{className:"p-absolute fs-16 mt-20 mr-15 rt-0 fc-blue cur-pointer",onClick:function(){1===x.length?Fc("\u63d0\u793a","\u5f53\u524d\u5c55\u54c1\u672a\u83b7\u5f97\u6388\u6743\uff0c\u786e\u5b9a\u9000\u51fa\uff1f",[{text:"\u53d6\u6d88",onPress:function(){}},{text:"\u786e\u5b9a",onPress:function(){return R()}}]):a(!0)},children:1===x.length?"\u9000\u51fa":"\u5173\u95ed"}),Object(h.jsx)("div",{className:"text-center my-20 fs-20 fc-main fw-bold",children:w.presentableName}),w.contracts.length?Object(h.jsx)("div",{className:"flex-row justify-center mb-15",children:w.contracts.map((function(e,t){return Object(h.jsxs)("div",{className:"contract-tag flex-row align-center mr-5",children:[Object(h.jsx)("div",{className:"contract-name",children:e.contractName}),Object(h.jsx)("div",{className:"contract-dot ml-6 "+(128===e.authStatus||window.isTest||1!==e.authStatus?"bg-auth-none":"bg-auth")})]},t)}))}):null]}),Object(h.jsx)("div",{className:"flex-column flex-1 over-h",children:Object(h.jsxs)("div",{className:"w-100x h-100x y-auto pb-20",children:[j.map((function(e,t){return Object(h.jsx)(Tc,{policy:e.policyInfo,contract:e,paymentFinish:M},t)})),S.map((function(e,t){return e.contracted?null:Object(h.jsx)(Pc,{policy:e,seq:t,loginFinished:A,setModalType:m,getAuth:V,policySelect:L,selectType:(j.length,!0)},t)}))]})})]})]})};var Rc=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),o=Object(s.a)(a,2),i=(o[0],o[1]),u=Object(c.useState)(!1),l=Object(s.a)(u,2),d=l[0],f=l[1];function p(){_.clear(),k.clear(),b()}function m(){var e=document.getElementById(window.rootId);e.style.zIndex=0,e.style.opacity=0,document.getElementById("freelog-plugin-container").style.zIndex=1,f(!1)}function b(e){var t=function(e){return e?(_.set(e.eventId,e),_):_}(e);A(!0);var n=[];t.forEach((function(e,t){n.push(e)}));var a=[];k.forEach((function(e){a.push(e)})),i(a),r(n),n.length?(!function(){var e=document.getElementById(window.rootId);e.style.zIndex=1,e.style.opacity=1,document.getElementById("freelog-plugin-container").style.zIndex=0}(),f(!0)):m()}function v(e,t,n){if(2===t&&!e)return L(e,t,n),void m();L(e,t,n)}return Object(c.useEffect)((function(){A(!1)}),[n]),P=function(){b()},C=function(){b()},Object(h.jsx)("div",{id:"freelog-app",className:"w-100x h-100x over-h",children:d?window.isMobile?Object(h.jsx)(Dc,{events:n,contractFinished:v,updateEvents:b,loginFinished:p}):Object(h.jsx)(sc,{events:n,contractFinished:v,updateEvents:b,loginFinished:p}):null})},Lc=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,415)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},Bc={mountWidget:function(e,t,n,r,a){r&&/\/$/.test(r)&&(r=r.substr(0,r.length-1));var c=window.freelogApp.devData;c&&!r&&(2===c.type&&(r=c.params[e.id]||""),1!==c.type||Oa||(r=c.params.dev,Oa=!0)),!n&&e&&(n={presentableId:e.presentableId||"",entityNid:"",subDependId:e.presentableId||"",resourceInfo:{resourceId:e.id}});var o=e?"freelog-"+n.resourceInfo.resourceId:"freelogDev";e&&ba.has(e.id)&&(o="freelog-"+e.id+"-1");var i={container:t,name:o,isTheme:n.isTheme,presentableId:n.presentableId,widgetName:e?e.name.replace("/","-"):"freelogDev",parentNid:r?"":n.entityNid,subResourceIdOrName:r?"":n.resourceInfo.resourceId,resourceId:e?n.resourceInfo.resourceId:"freelogDev",entry:r||Aa({presentableId:n.presentableId,parentNid:n.entityNid,subResourceIdOrName:n.resourceInfo.resourceId}),isDev:!!r};!function(e,t){va.set(e,t)}(o,i),console.log(i);var s=function(e,t,n){var r=e.props,a=e.name,c=function(e){var t=sr(e);if(t)return function(e,t){if(t.body.contains(e)){for(var n,r,a="",c=e;c!==t.documentElement;){for(n=0,r=c;r;)1===r.nodeType&&r.nodeName===c.nodeName&&(n+=1),r=r.previousSibling;a="*[name()='".concat(c.nodeName,"' and namespace-uri()='").concat(null===c.namespaceURI?"":c.namespaceURI,"'][").concat(n,"]/").concat(a),c=c.parentNode}return(a="/*[name()='".concat(t.documentElement.nodeName,"' and namespace-uri()='").concat(null===c.namespaceURI?"":c.namespaceURI,"']/").concat(a)).replace(/\/$/,"")}}(t,document)},o=function(e){return Object(d.a)(Object(d.a)({},e),{},{bootstrap:function(){return Promise.resolve()}})};return Ke(function(){var r=Object(p.a)(l.a.mark((function r(){var i,s,u,f,p,m,h,b;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=null!==t&&void 0!==t?t:Object(d.a)(Object(d.a)({},ma),{},{singular:!1}),s=i.$$cacheLifecycleByAppName,!(u="container"in e?e.container:void 0)){r.next=23;break}if(!s){r.next=13;break}if(!(f=ha.get(a))){r.next=13;break}return r.t0=o,r.next=10,f;case 10:return r.t1=r.sent,r.t2=(0,r.t1)(u),r.abrupt("return",(0,r.t0)(r.t2));case 13:if(!(p=c(u))){r.next=23;break}if(!(m=ha.get("".concat(a,"-").concat(p)))){r.next=23;break}return r.t3=o,r.next=20,m;case 20:return r.t4=r.sent,r.t5=(0,r.t4)(u),r.abrupt("return",(0,r.t3)(r.t5));case 23:return h=fa(e,i,n),u&&(s?ha.set(a,h):(b=c(u))&&ha.set("".concat(a,"-").concat(b),h)),r.next=27,h;case 27:return r.t6=r.sent,r.abrupt("return",(0,r.t6)(u));case 29:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),Object(d.a)({domElement:document.createElement("div")},r))}(i,{sandbox:{strictStyleIsolation:!!a&&!!a.shadowDom,experimentalStyleIsolation:!a||!!a.scopedCss}}),u=Object(d.a)(Object(d.a)({},s),{},{mount:function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.mount();case 2:ya(o,s);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),unmount:function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.unmount();case 2:t=o,ja.has(t)&&ja.delete(t),cn();case 4:case"end":return e.stop()}var t}),e)})));return function(){return e.apply(this,arguments)}}()});return ya(o,u),u},getPresentables:function(e){return z.apply(this,arguments)},getPresentablesPaging:function(e){return $.apply(this,arguments)},getPresentablesSearch:function(e){return K.apply(this,arguments)},getInfoById:Q,getInfoByName:function(e){return se.apply(this,arguments)},getResultById:function(e){return Z.apply(this,arguments)},getResultByName:function(e){return ie.apply(this,arguments)},getFileStreamById:function(e,t,n){return te.apply(this,arguments)},getFileStreamByName:function(e,t,n){return le.apply(this,arguments)},getSubInfoById:function(e,t,n){return re.apply(this,arguments)},getSubInfoByName:function(e,t,n){return fe.apply(this,arguments)},getSubResultById:function(e,t,n){return ne.apply(this,arguments)},getSubResultByName:function(e,t,n){return de.apply(this,arguments)},getSubFileStreamById:function(e,t,n,r,a){return ce.apply(this,arguments)},getSubFileStreamByName:function(e,t,n,r,a){return me.apply(this,arguments)},getResourceInfoById:function(e){return ee.apply(this,arguments)},getResourceInfoByName:function(e){return ue.apply(this,arguments)},getSubResourceInfoById:function(e,t,n){return ae.apply(this,arguments)},getSubResourceInfoByName:function(e,t,n){return pe.apply(this,arguments)},devData:"",getStaticPath:function(e,t){return/^\//.test(e)||(e="/"+e),va.get(this.name).entry+e},autoMoutSubWdigets:function(e){return Na.apply(this,arguments)},getSubDep:Ea,getSelfId:function(){return Ia.apply(this,arguments)},callAuth:function(){F?M?setTimeout((function(){C&&C()}),0):C&&C():P&&P()},addAuth:D,onLogin:function(e){return rc.apply(this,arguments)},getCurrentUser:Pa,setViewport:function(e){var t;if(null===(t=va.get(this.name))||void 0===t?void 0:t.isTheme){Object.keys(e).forEach((function(t){Da.hasOwnProperty(t)&&!Fa.includes(t)&&(Da[t]=e[t])}));var n=window.document.querySelector('meta[name="viewport"]'),r="";Object.keys(Da).forEach((function(e){Da.hasOwnProperty(e)&&(r+=e+"="+Da[e]+",")})),n.setAttribute("content",r)}}};function Vc(){return document.addEventListener("click",(function(e){if("A"===e.target.nodeName)return!1})),new Promise(function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r,a,c,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gc(window.location.host);case 2:return n=e.sent,e.next=5,Hc(n);case 5:if(30!==(r=e.sent).errCode){e.next=12;break}return e.next=9,new Promise((function(e,t){D.bind({name:"node",event:0})("",e,t,{immediate:!0})}));case 9:return e.next=11,Hc(n);case 11:r=e.sent;case 12:return a=r.data,Bc.nodeInfo=a,document.title=a.nodeName,Y=window.freelogApp.nodeInfo.nodeId,c=Xt(),Bc.devData=Object(d.a)({},c),Object.freeze(Bc),an(),e.next=22,_a();case 22:if(o=document.getElementById("freelog-plugin-container"),1!==c.type){e.next=26;break}return Bc.mountWidget("",o,{presentableId:a.nodeThemeId,isTheme:!0},"",{shadowDom:!1,scopedCss:!0}),e.abrupt("return");case 26:return e.next=28,Ea.bind({name:"freelog-"+a.nodeThemeId,presentableId:a.nodeThemeId})(a.nodeThemeId);case 28:i=e.sent,Bc.mountWidget({id:i.data.presentableId,name:i.data.resourceInfo.resourceName},o,{presentableId:i.data.presentableId,entityNid:"",subDependId:i.data.presentableId,resourceInfo:{resourceId:i.data.resourceInfo.resourceId},isTheme:!0},"",{shadowDom:!1,scopedCss:!0});case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function Gc(e){return"t"===e.split(".")[0]?e.split(".")[1]:e.split(".")[0]}function Hc(e){return Uc.apply(this,arguments)}function Uc(){return(Uc=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.bind({name:"node"})(W.getInfoByNameOrDomain,"",{nodeDomain:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.freelogApp=Bc;var Wc=n(222),qc=n.n(Wc),Yc=n(27);window.rootId="pc-root",function(){var e=function(){var e=navigator.userAgent;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1===e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1===e.indexOf("Safari")}}();return(navigator.browserLanguage||navigator.language).toLowerCase(),!!(e.mobile||e.ios||e.android||e.iPhone||e.iPad)}()&&(window.isMobile=!0,window.rootId="mobile-root",document.querySelector("meta[name=viewport]").content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no"),console.log("1234234234234234234234"),document.getElementById(window.rootId).style.display="block",window.isTest=!1,0===window.location.href.replace("http://","").replace("https://","").indexOf("t.")&&(window.isTest=!0),document.domain="testfreelog.com",console.log(window.__REACT_ERROR_OVERLAY_GLOBAL_HOOK__),console.log(window.parent.__REACT_ERROR_OVERLAY_GLOBAL_HOOK__),i.a.render(Object(h.jsx)(Yc.a,{locale:qc.a,children:Object(h.jsx)(Rc,{})}),document.getElementById(window.rootId)),setTimeout((function(){Vc()}),0),Lc()}},[[400,1,2]]]);
//# sourceMappingURL=main.b5a57916.chunk.js.map